webpackJsonp([2],{IN4q:function(e,t,n){var o;!function(o){if(!o.WebVideoCtrl){var r=function(){function r(){this.id=this.createUUID()}var i="100%",a="100%",c="",l="",u={szContainerID:"",szColorProperty:"",szOcxClassId:"clsid:FDF0038A-CF64-4634-81AB-80F0A7946D6C",szMimeTypes:"application/webvideo-plugin-kit",szBasePath:"",iWndowType:1,iPlayMode:2,bWndFull:!0,iPackageType:2,bDebugMode:!1,bNoPlugin:!0,cbSelWnd:null,myCbSelWnd:null,cbDoubleClickWnd:null,cbEvent:null,cbRemoteConfig:null,cbInitPluginComplete:null},d=null,p=0,f=!1,h=[],P=[],I=null,v=null,m=null,y=null,C=this,S=null,g="IPCamera",x="IPDome",b="IPZoom";GetSelectWndInfo=function(e){if(V()){p=e,(t=[]).push("<RealPlayInfo>"),t.push("<SelectWnd>"+e+"</SelectWnd>"),t.push("</RealPlayInfo>"),u.cbSelWnd&&u.cbSelWnd(y.loadXML(t.join("")))}else{var t,n=y.loadXML2(e);if(s.$XML(n).find("SelectWnd",!0).length>0)p=parseInt(s.$XML(n).find("SelectWnd").eq(0).text(),10),null===S&&k(),(t=[]).push("<RealPlayInfo>"),t.push("<SelectWnd>"+p+"</SelectWnd>"),t.push("</RealPlayInfo>"),u.cbSelWnd&&u.cbSelWnd(y.loadXML2(t.join(""))),u.myCbSelWnd&&u.myCbSelWnd(t.join(""));else if(s.$XML(n).find("DoubleClickWnd",!0).length>0){var o=parseInt(s.$XML(n).find("DoubleClickWnd").eq(0).text(),10);f="0"===s.$XML(n).find("IsFullScreen").eq(0).text(),u.cbDoubleClickWnd&&u.cbDoubleClickWnd(o,f)}}},o.WindowDblClick=function(e){f=e,u.cbDoubleClickWnd&&u.cbDoubleClickWnd(p,f)},o.ZoomInfoCallback=function(e){var t=C.findWndIndexByIndex(p);if(-1!=t){var n=P[t];if(-1!=(t=C.findDeviceIndexByIP(n.szDeviceIdentify))){var o=h[t];o.oProtocolInc.set3DZoom(o,n,e,{success:function(e){},error:function(){}})}}},PluginEventHandler=function(e,t,n){V()?u.cbEvent&&u.cbEvent(n,t,""):(D("插件事件：PluginEventHandler iEventType：%s iParam1: %s, iParam2: %s",e,t,n),0==e||2==e?C.I_Stop(t):21==e?C.I_StopRecord(t):3==e&&C.I_StopVoiceTalk(),u.cbEvent&&u.cbEvent(e,t,n))},GetHttpInfo=function(e,t,n){D("http响应返回：http状态：%s, http数据：%s",e,t),U.prototype.processCallback(e,t)},o.RemoteConfigInfo=function(e){u.cbRemoteConfig&&u.cbRemoteConfig(e)},o.KeyBoardEventInfo=function(e){100===parseInt(e,10)&&(f=!1,u.cbDoubleClickWnd&&u.cbDoubleClickWnd(p,f))};var D=function(){if(u.bDebugMode){var e=w(arguments);I._alert(e)}},w=function(){for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace("%s",arguments[t]);return e},T=function(e){var t=e.indexOf(":");return t>-1?e.substring(0,t):e},_=function(e){return void 0===e},z=function(e){return"[object Object]"===Object.prototype.toString.call(e)},W=function(){var e="";if(y.browser().msie)e="<object classid='"+u.szOcxClassId+"' codebase='' standby='Waiting...' id='"+c+"' width='"+i+"' height='"+a+"' align='center' ><param name='wndtype' value='"+u.iWndowType+"'><param name='playmode' value='"+u.iPlayMode+"'><param name='colors' value='"+u.szColorProperty+"'></object>";else for(var t=navigator.mimeTypes.length,n=0;t>n;n++)navigator.mimeTypes[n].type.toLowerCase()==u.szMimeTypes&&(e="<embed align='center' type='"+u.szMimeTypes+"' width='"+i+"' height='"+a+"' name='"+l+"' wndtype='"+u.iWndowType+"' playmode='"+u.iPlayMode+"' colors='"+u.szColorProperty+"'>");return e},k=function(){if(!V()&&null!==d){var e=d.HWP_GetLocalConfig();S=y.loadXML2(e)}},M=function(e){C.I_GetDeviceInfo(e.szIP,{success:function(t){e.szDeviceType=s.$XML(t).find("deviceType").eq(0).text()}}),C.I_GetAnalogChannelInfo(e.szIP,{success:function(t){e.iAnalogChannelNum=s.$XML(t).find("VideoInputChannel",!0).length}}),C.I_GetAudioInfo(e.szIP,{success:function(t){var n=s.$XML(t).find("audioCompressionType",!0);if(n.length>0){var o=s.$XML(n).eq(0).text(),r=0;"G.711ulaw"==o?r=1:"G.711alaw"==o?r=2:"G.726"==o?r=3:"MP2L2"==o||"MPEL2"==o?r=4:"G.722.1"==o?r=0:"AAC"==o?r=5:"PCM"==o&&(r=6),e.iAudioType=r}""!==s.$XML(t).find("audioBitRate").eq(0).text()?e.m_iAudioBitRate=1e3*parseInt(s.$XML(t).find("audioBitRate").eq(0).text(),10):e.m_iAudioBitRate=0,""!==s.$XML(t).find("audioSamplingRate").eq(0).text()?e.m_iAudioSamplingRate=1e3*parseInt(s.$XML(t).find("audioSamplingRate").eq(0).text(),10):e.m_iAudioSamplingRate=0}})},R=function(e){e.bSupportWebsocket=!1,e.bSupportSubStreamPlayback=!1,e.oProtocolInc.getSystemCapa(e,{success:function(t){var n=s.$XML(t).find("NetworkCap").eq(0).find("isSupportWebsocket",!0);n.length>0&&(e.bSupportWebsocket="true"===s.$XML(t).find("NetworkCap").eq(0).find("isSupportWebsocket").eq(0).text()),(n=s.$XML(t).find("RacmCap").eq(0).find("isSupportMainAndSubRecord",!0)).length>0&&(e.bSupportSubStreamPlayback="true"===s.$XML(t).find("RacmCap").eq(0).find("isSupportMainAndSubRecord").eq(0).text())}})},q=function(){var e=u.bWndFull?1:0;d.HWP_SetCanFullScreen(e),d.HWP_SetPackageType(u.iPackageType)},A=function(e){var t=null;if(X(e))(t=L(e)).iRtspPort,t.iDevicePort;else{for(var n=Z(e),o=!1,r=0;r<n.length;r++)if(n[r].ipv4==e.szIP||n[r].ipv6==e.szIP){o=!0;break}o?t=L(e):-1==(t=G(e)).iRtspPort&&-1==t.iDevicePort&&(t=L(e)),t.iRtspPort,t.iHttpPort,t.iDevicePort}return t},L=function(e){var t=-1,n=-1,o=-1;return e.oProtocolInc.getPortInfo(e,{async:!1,success:function(e){var r=s.$XML(e).find("AdminAccessProtocol",!0);t=554;for(var i=0,a=r.length;a>i;i++)"rtsp"===s.$XML(r).eq(i).find("protocol").eq(0).text().toLowerCase()&&(t=parseInt(s.$XML(r).eq(i).find("portNo").eq(0).text(),10)),"http"===s.$XML(r).eq(i).find("protocol").eq(0).text().toLowerCase()&&(n=parseInt(s.$XML(r).eq(i).find("portNo").eq(0).text(),10)),"dev_manage"===s.$XML(r).eq(i).find("protocol").eq(0).text().toLowerCase()&&(o=parseInt(s.$XML(r).eq(i).find("portNo").eq(0).text(),10))},error:function(){t=-1,n=-1,o=-1}}),{iRtspPort:t,iHttpPort:n,iDevicePort:o}},G=function(e){var t=-1,n=-1,o=-1;return e.oProtocolInc.getUPnPPortStatus(e,{async:!1,success:function(e){for(var r=s.$XML(e).find("portStatus",!0),i=0,a=r.length;a>i;i++)"rtsp"==s.$XML(r).eq(i).find("internalPort").eq(0).text().toLowerCase()&&(t=parseInt(s.$XML(r).eq(i).find("externalPort").eq(0).text(),10)),"http"==s.$XML(r).eq(i).find("internalPort").eq(0).text().toLowerCase()&&(n=parseInt(s.$XML(r).eq(i).find("externalPort").eq(0).text(),10)),"admin"==s.$XML(r).eq(i).find("internalPort").eq(0).text().toLowerCase()&&(o=parseInt(s.$XML(r).eq(i).find("externalPort").eq(0).text(),10))},error:function(){t=-1,n=-1,o=-1}}),{iRtspPort:t,iHttpPort:n,iDevicePort:o}},Z=function(e){var t=[];return e.oProtocolInc.getNetworkBond(e,{async:!1,success:function(n){"true"==s.$XML(n).find("enabled").eq(0).text()?t.push({ipv4:s.$XML(n).find("ipAddress").eq(0).text(),ipv6:s.$XML(n).find("ipv6Address").eq(0).text()}):e.oProtocolInc.getNetworkInterface(e,{async:!1,success:function(e){for(var n=0,o=s.$XML(e).find("NetworkInterface",!0).length;o>n;n++){t.push({ipv4:s.$XML(e).find("ipAddress").eq(0).text(),ipv6:s.$XML(e).find("ipv6Address").eq(0).text()});break}},error:function(){}})},error:function(){e.oProtocolInc.getNetworkInterface(e,{async:!1,success:function(e){for(var n=0,o=s.$XML(e).find("NetworkInterface",!0).length;o>n;n++){t.push({ipv4:s.$XML(e).find("ipAddress").eq(0).text(),ipv6:s.$XML(e).find("ipv6Address").eq(0).text()});break}},error:function(){}})}}),t},X=function(e){var t=!1;return e.oProtocolInc.getPPPoEStatus(e,{async:!1,success:function(e){t=s.$XML(e).find("ipAddress",!0).length>0||s.$XML(e).find("ipv6Address",!0).length>0},error:function(){t=!1}}),t},H=function(e){e.oStreamCapa.bObtained||e.oProtocolInc instanceof j&&e.oProtocolInc.getSDKCapa(e,{async:!1,success:function(t){e.oStreamCapa.bObtained=!0,e.oStreamCapa.bSupportShttpPlay="true"===s.$XML(t).find("isSupportHttpPlay").eq(0).text(),e.oStreamCapa.bSupportShttpPlayback="true"===s.$XML(t).find("isSupportHttpPlayback").eq(0).text(),e.oStreamCapa.bSupportShttpsPlay="true"===s.$XML(t).find("isSupportHttpsPlay").eq(0).text(),e.oStreamCapa.bSupportShttpsPlayback="true"===s.$XML(t).find("isSupportHttpsPlayback").eq(0).text(),e.oStreamCapa.bSupportShttpPlaybackTransCode="true"===s.$XML(t).find("isSupportHttpTransCodePlayback").eq(0).text(),e.oStreamCapa.bSupportShttpsPlaybackTransCode="true"===s.$XML(t).find("isSupportHttpsTransCodePlayback").eq(0).text(),s.$XML(t).find("ipChanBase",!0).length>0&&(e.oStreamCapa.iIpChanBase=parseInt(s.$XML(t).find("ipChanBase").eq(0).text(),10))},error:function(){e.oStreamCapa.bObtained=!0}})},V=function(){if(u.bNoPlugin){var e=y.browser();return!!(e.chrome&&parseInt(e.version,10)>45||e.mozilla&&parseInt(e.version,10)>52)}return!1},E=function(e){var t=location.hostname,n=location.port||"80";return/^(http|https):\/\/([^\/]+)(.+)$/.test(e)&&(e=e.replace(RegExp.$2,t+":"+n)),y.cookie("webVideoCtrlProxy",RegExp.$2,{raw:!0}),e},O=function(){var e="<ResponseStatus>";return e+="<requestURL></requestURL>",e+="<statusCode>4</statusCode>",e+="<statusString>Invalid Operation</statusString>",e+="<subStatusCode>notSupport</subStatusCode>",e+="</ResponseStatus>",y.loadXML(e)};this.I_InitPlugin=function(r,s,c){if(i=r,a=s,y.extend(u,c),V()){var l=y.getDirName();l&&("object"==typeof t&&void 0!==e||n.e(16).then(function(){var e=[!function(){var e=new Error('Cannot find module "."');throw e.code="MODULE_NOT_FOUND",e}()];(function(e){o.JSPlugin=e.JSPlugin,c.cbInitPluginComplete&&c.cbInitPluginComplete()}).apply(null,e)}).catch(n.oe)),addEventListener("resize",function(){null!==d&&d.JS_Resize(i,a)}),_(document.fullScreen)?_(document.webkitIsFullScreen)?_(document.mozFullScreen)||document.addEventListener("mozfullscreenchange",function(e){var t=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1;f&&!t&&o.KeyBoardEventInfo(100)}):document.addEventListener("webkitfullscreenchange",function(e){var t=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1;f&&!t&&o.KeyBoardEventInfo(100)}):document.addEventListener("fullscreenchange",function(e){var t=document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen||!1;f&&!t&&o.KeyBoardEventInfo(100)}),addEventListener("unload",function(){null!==d&&d.JS_DestroyWorker()})}else c.cbInitPluginComplete&&c.cbInitPluginComplete()},this.I_InsertOBJECTPlugin=function(e){if(_(e)||(u.szContainerID=e),null==document.getElementById(u.szContainerID))return-1;if(null!=document.getElementById(c)||0!=document.getElementsByName(c).length)return-1;if(V()){var t={szId:e,iType:1,iWidth:i,iHeight:a,iMaxSplit:4,iCurrentSplit:u.iWndowType,szBasePath:y.getDirName()},n=u.szColorProperty;if(""!=n){for(var r={},s=n.split(";"),p="",f=0,h=s.length;h>f;f++)(p=s[f]).indexOf("sub-background")>-1?r.background=p.split(":")[1]:p.indexOf("sub-border-select")>-1?r.borderSelect=p.split(":")[1]:p.indexOf("sub-border")>-1&&(r.border=p.split(":")[1]);t.oStyle=r}d=new JSPlugin(t)}else document.getElementById(u.szContainerID).innerHTML=W(),d=y.browser().msie?document.getElementById(c):document.getElementsByName(l)[0];return null==d&&null==d.object?-1:("object"==typeof o.attachEvent&&y.browser().msie&&(d.attachEvent("GetSelectWndInfo",GetSelectWndInfo),d.attachEvent("ZoomInfoCallback",ZoomInfoCallback),d.attachEvent("GetHttpInfo",GetHttpInfo),d.attachEvent("PluginEventHandler",PluginEventHandler),d.attachEvent("RemoteConfigInfo",RemoteConfigInfo),d.attachEvent("KeyBoardEventInfo",KeyBoardEventInfo)),k(),0)},this.I_WriteOBJECT_XHTML=function(){return V()?-1:(document.writeln(W()),null==(d=y.browser().msie?document.getElementById(c):document.getElementsByName(l)[0])&&null==d.object?-1:("object"==typeof o.attachEvent&&y.browser().msie&&(d.attachEvent("GetSelectWndInfo",GetSelectWndInfo),d.attachEvent("ZoomInfoCallback",ZoomInfoCallback),d.attachEvent("GetHttpInfo",GetHttpInfo),d.attachEvent("PluginEventHandler",PluginEventHandler),d.attachEvent("RemoteConfigInfo",RemoteConfigInfo),d.attachEvent("KeyBoardEventInfo",KeyBoardEventInfo)),k(),0))},this.I_OpenFileDlg=function(e){var t="";if(V())return t;if(null==(t=d.HWP_OpenFileBrowser(e,"")))return"";if(1==e){if(t.length>100)return-1}else if(t.length>130)return-1;return t},this.I_GetLocalCfg=function(){var e=null;if(V())return e;var t=d.HWP_GetLocalConfig(),n=[];return S=y.loadXML(t),n.push("<LocalConfigInfo>"),n.push("<ProtocolType>"+s.$XML(S).find("ProtocolType").eq(0).text()+"</ProtocolType>"),n.push("<PackgeSize>"+s.$XML(S).find("PackgeSize").eq(0).text()+"</PackgeSize>"),n.push("<PlayWndType>"+s.$XML(S).find("PlayWndType").eq(0).text()+"</PlayWndType>"),n.push("<BuffNumberType>"+s.$XML(S).find("BuffNumberType").eq(0).text()+"</BuffNumberType>"),n.push("<RecordPath>"+s.$XML(S).find("RecordPath").eq(0).text()+"</RecordPath>"),n.push("<CapturePath>"+s.$XML(S).find("CapturePath").eq(0).text()+"</CapturePath>"),n.push("<PlaybackFilePath>"+s.$XML(S).find("PlaybackFilePath").eq(0).text()+"</PlaybackFilePath>"),n.push("<PlaybackPicPath>"+s.$XML(S).find("PlaybackPicPath").eq(0).text()+"</PlaybackPicPath>"),n.push("<DeviceCapturePath>"+s.$XML(S).find("DeviceCapturePath").eq(0).text()+"</DeviceCapturePath>"),n.push("<DownloadPath>"+s.$XML(S).find("DownloadPath").eq(0).text()+"</DownloadPath>"),n.push("<IVSMode>"+s.$XML(S).find("IVSMode").eq(0).text()+"</IVSMode>"),n.push("<CaptureFileFormat>"+s.$XML(S).find("CaptureFileFormat").eq(0).text()+"</CaptureFileFormat>"),n.push("</LocalConfigInfo>"),y.loadXML(n.join(""))},this.I_SetLocalCfg=function(e){if(V())return-1;var t=y.loadXML(e);return s.$XML(S).find("ProtocolType").eq(0).text(s.$XML(t).find("ProtocolType").eq(0).text()),s.$XML(S).find("PackgeSize").eq(0).text(s.$XML(t).find("PackgeSize").eq(0).text()),s.$XML(S).find("PlayWndType").eq(0).text(s.$XML(t).find("PlayWndType").eq(0).text()),s.$XML(S).find("BuffNumberType").eq(0).text(s.$XML(t).find("BuffNumberType").eq(0).text()),s.$XML(S).find("RecordPath").eq(0).text(s.$XML(t).find("RecordPath").eq(0).text()),s.$XML(S).find("CapturePath").eq(0).text(s.$XML(t).find("CapturePath").eq(0).text()),s.$XML(S).find("PlaybackFilePath").eq(0).text(s.$XML(t).find("PlaybackFilePath").eq(0).text()),s.$XML(S).find("DeviceCapturePath").eq(0).text(s.$XML(t).find("DeviceCapturePath").eq(0).text()),s.$XML(S).find("PlaybackPicPath").eq(0).text(s.$XML(t).find("PlaybackPicPath").eq(0).text()),s.$XML(S).find("DownloadPath").eq(0).text(s.$XML(t).find("DownloadPath").eq(0).text()),s.$XML(S).find("IVSMode").eq(0).text(s.$XML(t).find("IVSMode").eq(0).text()),s.$XML(S).find("CaptureFileFormat").eq(0).text(s.$XML(t).find("CaptureFileFormat").eq(0).text()),d.HWP_SetLocalConfig(y.toXMLStr(S))?0:-1};var N=function(e,t,n,o,r,s,i){var a={protocol:t,success:null,error:null};y.extend(a,i),y.extend(a,{success:function(a){var c=new F;c.szIP=e,2==t?(c.szHttpProtocol="https://",c.iHttpsPort=n):(c.szHttpProtocol="http://",c.iHttpPort=n),c.iCGIPort=n,c.szDeviceIdentify=e+"_"+n,c.szAuth=o,c.iDeviceProtocol=r,c.oProtocolInc=s,h.push(c),D("使用%s协议登录成功",r),M(c),q(),R(c),i.success&&i.success(a)},error:function(e,t){i.error&&i.error(e,t)}}),s.login(e,n,o,a)};this.I_Login=function(e,t,n,r,i,a){var c=e+"_"+n;if(-1!=this.findDeviceIndexByIP(c))return D("设备已经登录过"),-1;var l=v,u=1;if(_(a.cgi)||(1==a.cgi?(l=v,u=1):(l=m,u=2)),V())if(1==u){var d={success:null,error:null};y.extend(d,{success:function(c){var d={success:null,error:null};y.extend(d,{success:function(r){var i=new F;i.szIP=e,2==t?(i.szHttpProtocol="https://",i.iHttpsPort=n):(i.szHttpProtocol="http://",i.iHttpPort=n),i.iCGIPort=n,i.szDeviceIdentify=e+"_"+n,i.szAuth=s.$XML(r).find("sessionID").eq(0).text(),i.iDeviceProtocol=u,i.oProtocolInc=l,h.push(i),D("使用%s协议登录成功",u),M(i),R(i),i.sessionFailed=0,i.sesstionTimer=setInterval(function(){l.sessionHeartbeat(i,function(){i.sessionFailed=0},function(){i.sessionFailed++,i.sessionFailed>=5&&(clearInterval(i.sesstionTimer),o.PluginEventHandler(-1,i.szDeviceIdentify))})},3e4),a.success&&a.success(r)},error:function(e,t){a.error&&a.error(e,t)}}),l.sessionLogin(e,t,n,r,i,c,d)},error:function(e,t){a.error&&a.error(e,t)}}),l.getSessionCap(e,t,n,r,d)}else a.error&&a.error(403,O());else{var p="";if(1==u){p=y.Base64.encode(":"+r+":"+i);d={success:null,error:null};y.extend(d,a),y.extend(d,{error:function(o,s){p=y.Base64.encode(r+":"+i),u=1,l=v;var c={success:null,error:null};y.extend(c,a),y.extend(c,{error:function(){if(_(a.cgi)){p=y.Base64.encode(":"+r+":"+i),u=2,l=m;var c={success:null,error:null};y.extend(c,a),y.extend(c,{error:function(o,s){p=y.Base64.encode(r+":"+i),u=2,l=m;var c={success:null,error:null};y.extend(c,a),y.extend(c,{error:function(){a.error&&a.error(o,s)}}),N(e,t,n,p,u,l,c)}}),N(e,t,n,p,u,l,c)}else a.error&&a.error(o,s)}}),N(e,t,n,p,u,l,c)}}),N(e,t,n,p,u,l,d)}else{p=y.Base64.encode(":"+r+":"+i),u=2,l=m;d={success:null,error:null};y.extend(d,a),y.extend(d,{error:function(o,s){p=y.Base64.encode(r+":"+i),u=2,l=m;var c={success:null,error:null};y.extend(c,a),y.extend(c,{error:function(){a.error&&a.error(o,s)}}),N(e,t,n,p,u,l,c)}}),N(e,t,n,p,u,l,d)}}},this.I_Logout=function(e){var t=this.findDeviceIndexByIP(e);if(-1!=t){if(V()){var n=h[t];clearInterval(n.sesstionTimer),n.oProtocolInc.sessionLogout(n,{})}return h.splice(t,1),0}return-1},this.I_GetAudioInfo=function(e,t){var n=this.findDeviceIndexByIP(e);if(-1!=n){var o=h[n],r={success:null,error:null};y.extend(r,t),o.oProtocolInc.getAudioInfo(o,r)}},this.I_GetDeviceInfo=function(e,t){var n=this.findDeviceIndexByIP(e);if(-1!=n){var o=h[n],r={success:null,error:null};y.extend(r,t),o.oProtocolInc.getDeviceInfo(o,r)}},this.I_GetAnalogChannelInfo=function(e,t){var n=this.findDeviceIndexByIP(e);if(-1!=n){var o=h[n],r={success:null,error:null};y.extend(r,t),o.oProtocolInc.getAnalogChannelInfo(o,r)}},this.I_GetDigitalChannelInfo=function(e,t){var n=this.findDeviceIndexByIP(e);if(-1!=n){var o=h[n],r={success:null,error:null};y.extend(r,t),o.oProtocolInc.getDigitalChannelInfo(o,r)}},this.I_GetZeroChannelInfo=function(e,t){var n=this.findDeviceIndexByIP(e);if(-1!=n){var o=h[n],r={success:null,error:null};y.extend(r,t),o.oProtocolInc.getZeroChannelInfo(o,r)}},this.I_StartRealPlay=function(e,t){var n=this.findDeviceIndexByIP(e),o="",r="",i=-1,a=0,c=0,l=!1,u={iWndIndex:p,iStreamType:1,iChannelID:1,bZeroChannel:!1};if(y.extend(u,t),-1!=n){H(h[n]);var d=h[n];if(V()){if(!d.bSupportWebsocket)return void(t.error&&t.error(403,O()));o=d.oProtocolInc.CGI.startWsRealPlay,r="ws://",_(u.iWSPort)?d.iWSPort=7681:d.iWSPort=u.iWSPort,i=d.iWSPort,c=u.iStreamType,a=u.iChannelID<=d.iAnalogChannelNum?u.iChannelID:d.oStreamCapa.iIpChanBase+parseInt(u.iChannelID,10)-d.iAnalogChannelNum-1,l=!0}else{0==parseInt(s.$XML(S).find("ProtocolType").eq(0).text(),10)&&d.oStreamCapa.bSupportShttpPlay?(D("SHTTP RealPlay"),o=d.oProtocolInc.CGI.startShttpRealPlay,r="http://",c=u.iStreamType-1,a=u.iChannelID<=d.iAnalogChannelNum?u.iChannelID:d.oStreamCapa.iIpChanBase+parseInt(u.iChannelID,10)-d.iAnalogChannelNum-1,l=!0,_(u.iPort)?"https://"==d.szHttpProtocol?(-1==d.iHttpPort&&(d.iHttpPort=A(d).iHttpPort),i=d.iHttpPort):i=d.iCGIPort:(d.iHttpPort=u.iPort,i=u.iPort)):(D("RTSP RealPlay"),o=d.oProtocolInc.CGI.startRealPlay,r="rtsp://",c=u.iStreamType,a=u.iChannelID,_(u.iRtspPort)||(d.iRtspPort=u.iRtspPort),-1==d.iRtspPort&&(d.iRtspPort=A(d).iRtspPort),i=d.iRtspPort)}if(-1==i)return D("获取端口号失败"),void(t.error&&t.error());if(y.extend(u,{urlProtocol:r,cgi:o,iPort:i,iStreamType:c,iChannelID:a}),-1==(n=this.findWndIndexByIndex(u.iWndIndex)))if(V())d.oProtocolInc.startRealPlay(d,u).then(function(){n=this.findWndIndexByIndex(u.iWndIndex),P[n].bShttpIPChannel=l,t.success&&t.success()},function(){t.error&&t.error()});else{if(0==d.oProtocolInc.startRealPlay(d,u))n=this.findWndIndexByIndex(u.iWndIndex),P[n].bShttpIPChannel=l,t.success&&t.success();else d.iRtspPort=-1,t.error&&t.error()}}else t.error&&t.error()},this.I_Stop=function(e){var t={iWndIndex:p};z(e)?y.extend(t,e):_(e)||(t.iWndIndex=e);var n=this.findWndIndexByIndex(t.iWndIndex);if(-1!=n){var o=P[n];if(o.bRecord&&(V()||d.HWP_StopSave(o.iIndex)),o.bSound&&(V()||d.HWP_CloseSound()),o.bEZoom&&(V()||d.HWP_DisableZoom(o.iIndex)),V())d.JS_Stop(t.iWndIndex).then(function(){P.splice(n,1),t.success&&t.success()},function(){t.error&&t.error()});else 0==d.HWP_Stop(t.iWndIndex)?(P.splice(n,1),t.success&&t.success()):t.error&&t.error()}else t.error&&t.error()},this.I_OpenSound=function(e){e=_(e)?p:e;var t=this.findWndIndexByIndex(e),n=-1;if(-1!=t){var o=P[t];o.bSound||0==(n=V()?d.JS_OpenSound(e):d.HWP_OpenSound(e))&&(o.bSound=!0)}return n},this.I_CloseSound=function(e){e=_(e)?p:e;var t=this.findWndIndexByIndex(e),n=-1;if(-1!=t){var o=P[t];o.bSound&&(0==(n=V()?d.JS_CloseSound():d.HWP_CloseSound())&&(o.bSound=!1))}return n},this.I_SetVolume=function(e,t){var n=-1;return e=parseInt(e,10),isNaN(e)?n:0>e||e>100?n:(t=_(t)?p:t,-1!=this.findWndIndexByIndex(t)&&(V()?(d.JS_SetVolume(t,e),n=0):n=d.HWP_SetVolume(t,e)),n)},this.I_CapturePic=function(e,t){var n={iWndIndex:p,bDateDir:!0};z(t)?y.extend(n,t):_(t)||(n.iWndIndex=t);var o=-1;if(-1!=this.findWndIndexByIndex(n.iWndIndex))if(V()){var r="JPEG";".jpg"===e.slice(-4).toLowerCase()?e=e.slice(0,-4):".jpeg"===e.slice(-5).toLowerCase()?e=e.slice(0,-5):".bmp"===e.slice(-4).toLowerCase()&&(e=e.slice(0,-4),r="BMP"),o=d.JS_CapturePicture(n.iWndIndex,e,r)}else".jpg"===e.slice(-4).toLowerCase()?e=e.slice(0,-4):".jpeg"===e.slice(-5).toLowerCase()&&(e=e.slice(0,-5)),o=d.HWP_CapturePicture(n.iWndIndex,e,n.bDateDir);return o},this.I_StartRecord=function(e,t){var n={iWndIndex:p,bDateDir:!0};z(t)?y.extend(n,t):_(t)||(n.iWndIndex=t);var o=this.findWndIndexByIndex(n.iWndIndex);if(-1!=o){var r=P[o];if(r.bRecord)n.error&&n.error();else if(V()){y.browser().chrome?d.JS_StartSave(n.iWndIndex,e).then(function(){r.bRecord=!0,n.success&&n.success()},function(){n.error&&n.error()}):n.error&&n.error()}else{0==d.HWP_StartSave(n.iWndIndex,e,n.bDateDir)?(r.bRecord=!0,n.success&&n.success()):n.error&&n.error()}}else n.error&&n.error()},this.I_StopRecord=function(e){var t={iWndIndex:p};z(e)?y.extend(t,e):_(e)||(t.iWndIndex=e);var n=this.findWndIndexByIndex(t.iWndIndex);if(-1!=n){var o=P[n];if(o.bRecord)if(V()){y.browser().chrome?d.JS_StopSave(t.iWndIndex).then(function(){o.bRecord=!1,t.success&&t.success()},function(){t.error&&t.error()}):t.error&&t.error()}else{0==d.HWP_StopSave(t.iWndIndex)?(o.bRecord=!1,t.success&&t.success()):t.error&&t.error()}else t.error&&t.error()}else t.error&&t.error()},this.I_StartVoiceTalk=function(e,t){if(isNaN(parseInt(t,10)))return-1;var n=this.findDeviceIndexByIP(e),o=-1;if(-1!=n){var r=h[n];r.bVoiceTalk||0==(o=V()?-1:r.oProtocolInc.startVoiceTalk(r,t))&&(h[n].bVoiceTalk=!0)}return o},this.I_StopVoiceTalk=function(){var e=-1;if(!V()){e=d.HWP_StopVoiceTalk();for(var t=0,n=h.length;n>t;t++)if(h[t].bVoiceTalk){h[t].bVoiceTalk=!1;break}}return e},this.I_PTZControl=function(e,t,n){var o={iWndIndex:p,iPTZIndex:e,iPTZSpeed:4};y.extend(o,n),y.extend(o,{async:!1});var r=this.findWndIndexByIndex(o.iWndIndex);if(-1!=r){var s=P[r];if(-1!=(r=this.findDeviceIndexByIP(s.szIP))){var i=h[r];9==e?i.oProtocolInc.ptzAutoControl(i,t,s,o):i.oProtocolInc.ptzControl(i,t,s,o)}}},this.I_EnableEZoom=function(e){e=_(e)?p:e;var t=this.findWndIndexByIndex(e),n=-1;if(-1!=t){var o=P[t];o.bEZoom||0==(n=V()?d.JS_EnableZoom(e):d.HWP_EnableZoom(e,0))&&(o.bEZoom=!0)}return n},this.I_DisableEZoom=function(e){e=_(e)?p:e;var t=this.findWndIndexByIndex(e),n=-1;if(-1!=t){var o=P[t];o.bEZoom&&(V()?n=d.JS_DisableZoom(e):(d.HWP_DisableZoom(e),n=0),0==n&&(o.bEZoom=!1))}return n},this.I_Enable3DZoom=function(e){e=_(e)?p:e;var t=this.findWndIndexByIndex(e),n=-1;if(-1!=t){var o=P[t];o.b3DZoom||0==(n=V()?-1:d.HWP_EnableZoom(e,1))&&(o.b3DZoom=!0)}return n},this.I_Disable3DZoom=function(e){e=_(e)?p:e;var t=this.findWndIndexByIndex(e),n=-1;if(-1!=t){var o=P[t];o.b3DZoom&&(V()?n=-1:(d.HWP_DisableZoom(e),n=0),0==n&&(o.b3DZoom=!1))}return n},this.I_FullScreen=function(e){V()?d.JS_FullScreenDisplay(e):d.HWP_FullScreenDisplay(e)},this.I_SetPreset=function(e,t){var n={iWndIndex:p,iPresetID:e};y.extend(n,t);var o=this.findWndIndexByIndex(n.iWndIndex);if(-1!=o){var r=P[o];if(-1!=(o=this.findDeviceIndexByIP(r.szIP))){var s=h[o];s.oProtocolInc.setPreset(s,r,n)}}},this.I_GoPreset=function(e,t){var n={iWndIndex:p,iPresetID:e};y.extend(n,t);var o=this.findWndIndexByIndex(n.iWndIndex);if(-1!=o){var r=P[o];if(-1!=(o=this.findDeviceIndexByIP(r.szIP))){var s=h[o];s.oProtocolInc.goPreset(s,r,n)}}},this.I_RecordSearch=function(e,t,n,o,r){var s=this.findDeviceIndexByIP(e);if(-1!=s){var i=h[s],a={iChannelID:t,szStartTime:n,szEndTime:o,iSearchPos:0,iStreamType:1,success:null,error:null};y.extend(a,r),i.oProtocolInc.recordSearch(i,a)}},this.I_StartPlayback=function(e,t){var n=this.findDeviceIndexByIP(e),o="",r="",i=-1,a=1,c=0,l=y.dateFormat(new Date,"yyyy-MM-dd"),u={iWndIndex:p,iStreamType:1,iChannelID:1,szStartTime:l+" 00:00:00",szEndTime:l+" 23:59:59"};if(y.extend(u,t),-1!=n){H(h[n]);var d=h[n];if(V()){if(!d.bSupportWebsocket)return void(t.error&&t.error(403,O()));if(!_(u.oTransCodeParam))return void(t.error&&t.error());o=d.oProtocolInc.CGI.startWsPlayback,r="ws://",_(u.iWSPort)?d.iWSPort=7681:d.iWSPort=u.iWSPort,i=d.iWSPort,c=u.iStreamType,a=100*(a=u.iChannelID<=d.iAnalogChannelNum?u.iChannelID:d.oStreamCapa.iIpChanBase+parseInt(u.iChannelID,10)-d.iAnalogChannelNum-1)+c}else{0==parseInt(s.$XML(S).find("ProtocolType").eq(0).text(),10)&&d.oStreamCapa.bSupportShttpPlay?(o=_(u.oTransCodeParam)?d.oProtocolInc.CGI.startShttpPlayback:d.oProtocolInc.CGI.startTransCodePlayback,r="http://",c=u.iStreamType-1,a=u.iChannelID<=d.iAnalogChannelNum?u.iChannelID:d.oStreamCapa.iIpChanBase+parseInt(u.iChannelID,10)-d.iAnalogChannelNum-1,d.bSupportSubStreamPlayback&&(a=100*a+c),_(u.iPort)?"https://"==d.szHttpProtocol?(-1==d.iHttpPort&&(d.iHttpPort=A(d).iHttpPort),i=d.iHttpPort):i=d.iCGIPort:(d.iHttpPort=u.iPort,i=u.iPort)):(o=d.oProtocolInc.CGI.startPlayback,r="rtsp://",c=u.iStreamType,a=100*u.iChannelID+c,_(u.iRtspPort)||(d.iRtspPort=u.iRtspPort),-1==d.iRtspPort&&(d.iRtspPort=A(d).iRtspPort),i=d.iRtspPort)}if(-1==i)return D("获取端口号失败"),void(t.error&&t.error());if(y.extend(u,{urlProtocol:r,cgi:o,iPort:i,iChannelID:a}),-1==(n=this.findWndIndexByIndex(u.iWndIndex)))if(V())u.szStartTime=u.szStartTime.replace(" ","T")+"Z",u.szEndTime=u.szEndTime.replace(" ","T")+"Z",d.oProtocolInc.startPlayback(d,u).then(function(){t.success&&t.success()},function(){t.error&&t.error()});else{u.szStartTime=u.szStartTime.replace(/[-:]/g,"").replace(" ","T")+"Z",u.szEndTime=u.szEndTime.replace(/[-:]/g,"").replace(" ","T")+"Z",0==d.oProtocolInc.startPlayback(d,u)?t.success&&t.success():(d.iRtspPort=-1,t.error&&t.error())}}else t.error&&t.error()},this.I_ReversePlayback=function(e,t){var n=this.findDeviceIndexByIP(e),o=-1,r="",i="",a=-1,c=-1,l=0,u=y.dateFormat(new Date,"yyyy-MM-dd"),d={iWndIndex:p,iStreamType:1,iChannelID:1,szStartTime:u+" 00:00:00",szEndTime:u+" 23:59:59"};if(y.extend(d,t),-1!=n){H(h[n]);var f=h[n];if(V())return o;if(0==parseInt(s.$XML(S).find("ProtocolType").eq(0).text(),10)&&f.oStreamCapa.bSupportShttpPlay?(r=f.oProtocolInc.CGI.startShttpReversePlayback,i="http://",l=d.iStreamType-1,c=100*(c=d.iChannelID<=f.iAnalogChannelNum?d.iChannelID:f.oStreamCapa.iIpChanBase+parseInt(d.iChannelID,10)-f.iAnalogChannelNum-1)+l,_(d.iPort)?"https://"==f.szHttpProtocol?(-1==f.iHttpPort&&(f.iHttpPort=A(f).iHttpPort),a=f.iHttpPort):a=f.iCGIPort:(f.iHttpPort=d.iPort,a=d.iPort)):(r=f.oProtocolInc.CGI.startPlayback,i="rtsp://",l=d.iStreamType,c=100*d.iChannelID+l,_(d.iRtspPort)||(f.iRtspPort=d.iRtspPort),-1==f.iRtspPort&&(f.iRtspPort=A(f).iRtspPort),a=f.iRtspPort),-1==a)return D("获取端口号失败"),o;y.extend(d,{urlProtocol:i,cgi:r,iPort:a,iChannelID:c}),-1==(n=this.findWndIndexByIndex(d.iWndIndex))&&(d.szStartTime=d.szStartTime.replace(/[-:]/g,"").replace(" ","T")+"Z",d.szEndTime=d.szEndTime.replace(/[-:]/g,"").replace(" ","T")+"Z",o=f.oProtocolInc.reversePlayback(f,d))}return-1==o&&(f.iRtspPort=-1),o},this.I_Frame=function(e){var t={iWndIndex:p};z(e)?y.extend(t,e):_(e)||(t.iWndIndex=e);var n=this.findWndIndexByIndex(t.iWndIndex);if(-1!=n){var o=P[n],r=o.iPlayStatus;if(2==r||4==r)if(V())d.JS_FrameForward(t.iWndIndex).then(function(){o.iPlayStatus=4,t.success&&t.success()},function(){t.error&&t.error()});else{0==d.HWP_FrameForward(t.iWndIndex)?(o.iPlayStatus=4,t.success&&t.success()):t.error&&t.error()}else t.error&&t.error()}else t.error&&t.error()},this.I_Pause=function(e){var t={iWndIndex:p};z(e)?y.extend(t,e):_(e)||(t.iWndIndex=e);var n=this.findWndIndexByIndex(t.iWndIndex);if(-1!=n){var o=P[n],r=o.iPlayStatus,s=-1;if(2==r)s=3;else{if(5!=r)return void(t.error&&t.error());s=6}if(V())d.JS_Pause(t.iWndIndex).then(function(){o.iPlayStatus=s,t.success&&t.success()},function(){t.error&&t.error()});else 0==d.HWP_Pause(t.iWndIndex)?(o.iPlayStatus=s,t.success&&t.success()):t.error&&t.error()}else t.error&&t.error()},this.I_Resume=function(e){var t={iWndIndex:p};z(e)?y.extend(t,e):_(e)||(t.iWndIndex=e);var n=this.findWndIndexByIndex(t.iWndIndex);if(-1!=n){var o=P[n],r=o.iPlayStatus,s=-1;if(3==r||4==r)s=2;else{if(6!=r)return void(t.error&&t.error());s=5}if(V())d.JS_Resume(t.iWndIndex).then(function(){o.iPlayStatus=s,t.success&&t.success()},function(){t.error&&t.error()});else 0==d.HWP_Resume(t.iWndIndex)?(o.iPlayStatus=s,t.success&&t.success()):t.error&&t.error()}else t.error&&t.error()},this.I_PlaySlow=function(e){var t={iWndIndex:p};z(e)?y.extend(t,e):_(e)||(t.iWndIndex=e);var n=this.findWndIndexByIndex(t.iWndIndex);if(-1!=n)if(2==P[n].iPlayStatus)if(V()){d.JS_GetWndStatus(t.iWndIndex).iRate<=-4?t.error&&t.error():d.JS_Slow(t.iWndIndex).then(function(){t.success&&t.success()},function(){t.error&&t.error()})}else{0==d.HWP_Slow(t.iWndIndex)?t.success&&t.success():t.error&&t.error()}else t.error&&t.error();else t.error&&t.error()},this.I_PlayFast=function(e){var t={iWndIndex:p};z(e)?y.extend(t,e):_(e)||(t.iWndIndex=e);var n=this.findWndIndexByIndex(t.iWndIndex);if(-1!=n)if(2==P[n].iPlayStatus)if(V()){d.JS_GetWndStatus(t.iWndIndex).iRate>=4?t.error&&t.error():d.JS_Fast(t.iWndIndex).then(function(){t.success&&t.success()},function(){t.error&&t.error()})}else{0==d.HWP_Fast(t.iWndIndex)?t.success&&t.success():t.error&&t.error()}else t.error&&t.error();else t.error&&t.error()},this.I_GetOSDTime=function(e){var t={iWndIndex:p};if(z(e)?y.extend(t,e):_(e)||(t.iWndIndex=e),-1!=this.findWndIndexByIndex(t.iWndIndex)){if(V())d.JS_GetOSDTime(t.iWndIndex).then(function(e){if(t.success){var n=y.dateFormat(new Date(1e3*e),"yyyy-MM-dd hh:mm:ss");t.success(n)}},function(){t.error&&t.error()});else if(t.success){var n=d.HWP_GetOSDTime(t.iWndIndex),o=y.dateFormat(new Date(1e3*n),"yyyy-MM-dd hh:mm:ss");t.success(o)}}else t.error&&t.error()},this.I_StartDownloadRecord=function(e,t,n,o){var r=this.findDeviceIndexByIP(e),s=-1;if(-1!=r){var i=h[r],a={szPlaybackURI:t,szFileName:n,bDateDir:!0};_(o)||y.extend(a,o),s=i.oProtocolInc.startDownloadRecord(i,a)}return s},this.I_GetDownloadStatus=function(e){var t=-1;return V()?t:(1==(t=d.HWP_GetDownloadStatus(e))&&(t=-1),t)},this.I_GetDownloadProgress=function(e){return V()?-1:d.HWP_GetDownloadProgress(e)},this.I_StopDownloadRecord=function(e){return V()?-1:d.HWP_StopDownload(e)},this.I_ExportDeviceConfig=function(e){var t=this.findDeviceIndexByIP(e),n=-1;if(-1!=t){var o=h[t];if(V())return n;n=o.oProtocolInc.exportDeviceConfig(o)}return n},this.I_ImportDeviceConfig=function(e,t){var n=this.findDeviceIndexByIP(e),o=-1;if(-1!=n){var r=h[n],s={szFileName:t};if(V())return o;o=r.oProtocolInc.importDeviceConfig(r,s)}return o},this.I_RestoreDefault=function(e,t,n){var o={success:null,error:null};y.extend(o,n);var r=this.findDeviceIndexByIP(e);if(-1!=r){var s=h[r];s.oProtocolInc.restore(s,t,o)}},this.I_Restart=function(e,t){var n=this.findDeviceIndexByIP(e),o={success:null,error:null};if(y.extend(o,t),-1!=n){var r=h[n];r.oProtocolInc.restart(r,o)}},this.I_Reconnect=function(e,t){var n=this.findDeviceIndexByIP(e),o={success:null,error:null};if(y.extend(o,t),-1!=n){var r=h[n];r.oProtocolInc.login(r.szIP,r.iCGIPort,r.szAuth,o)}},this.I_StartUpgrade=function(e,t){var n=this.findDeviceIndexByIP(e),o=-1;if(-1!=n){var r=h[n],s={szFileName:t};if(V())return o;o=r.oProtocolInc.startUpgrade(r,s)}return o},this.I_UpgradeStatus=function(){return V()?-1:d.HWP_UpgradeStatus()},this.I_UpgradeProgress=function(){return V()?-1:d.HWP_UpgradeProgress()},this.I_StopUpgrade=function(){return V()?-1:d.HWP_StopUpgrade()},this.I_CheckPluginInstall=function(){var e=-1,t=y.browser();if(V())e=0;else if(t.msie)try{new ActiveXObject("WebVideoKitActiveX.WebVideoKitActiveXCtrl.1"),e=0}catch(e){}else for(var n=0,o=navigator.mimeTypes.length;o>n;n++)if("application/webvideo-plugin-kit"==navigator.mimeTypes[n].type.toLowerCase()){e=0;break}return e},this.I_CheckPluginVersion=function(){return V()?0:d.HWP_CheckPluginUpdate("<?xml version='1.0' encoding='utf-8'?><FileVersion><Platform name='win32'><npWebVideoKitPlugin.dll>3,0,6,2</npWebVideoKitPlugin.dll><WebVideoKitActiveX.ocx>3,0,6,2</WebVideoKitActiveX.ocx><PlayCtrl.dll>7,3,3,61</PlayCtrl.dll><StreamTransClient.dll>1,1,3,6</StreamTransClient.dll><SystemTransform.dll>2,5,2,8</SystemTransform.dll><NetStream.dll>1,0,5,59</NetStream.dll></Platform></FileVersion>")?-1:0},this.I_SendHTTPRequest=function(e,t,n){var o=this.findDeviceIndexByIP(e);if(!(0>o)){var r=h[o],s=new U,i={type:"GET",url:r.szHttpProtocol+r.szIP+":"+r.iCGIPort+"/"+t,auth:r.szAuth,success:null,error:null};y.extend(i,n),y.extend(i,{success:function(e){n.success&&n.success(e)},error:function(e,t){n.error&&n.error(e,t)}}),s.setRequestParam(i),s.submitRequest()}},this.I_RemoteConfig=function(e,t){var n=this.findDeviceIndexByIP(e),o=-1;if(V())return-1;var r={iLan:0,iDevicePort:-1,iType:0};if(y.extend(r,t),-1!=n){var s=h[n];if(-1==r.iDevicePort)if(-1==s.iDevicePort){if(s.iDevicePort=A(s).iDevicePort,-1==(o=s.iDevicePort))return-1}else o=s.iDevicePort;else o=r.iDevicePort;if(":"==y.Base64.decode(s.szAuth)[0])var i=y.Base64.decode(s.szAuth).split(":")[1],a=y.Base64.decode(s.szAuth).split(":")[2];else i=y.Base64.decode(s.szAuth).split(":")[0],a=y.Base64.decode(s.szAuth).split(":")[1];var c="<RemoteInfo><DeviceInfo><DeviceType>"+r.iType+"</DeviceType><LanType>"+r.iLan+"</LanType><IP>"+s.szIP+"</IP><Port>"+o+"</Port><UName>"+i+"</UName><PWD>"+y.Base64.encode(a)+"</PWD></DeviceInfo></RemoteInfo>";return d.HWP_ShowRemConfig(c)}return-1},this.I_ChangeWndNum=function(e){return isNaN(parseInt(e,10))?-1:(V()?d.JS_ArrangeWindow(e):d.HWP_ArrangeWindow(e),0)},this.I_GetLastError=function(){return V()?-1:d.HWP_GetLastError()},this.I_GetWindowStatus=function(e){if(_(e)){var t=[];return y.extend(t,P),t}var n=this.findWndIndexByIndex(e);if(-1!=n){t={};return y.extend(t,P[n]),t}return null},this.I_GetIPInfoByMode=function(e,t,n,o){return V()?"":d.HWP_GetIpInfoByMode(e,t,n,o)},this.I_SetPlayModeType=function(e){return V()?-1:d.HWP_SetPlayModeType(e)},this.I_SetSnapDrawMode=function(e,t){return V()?-1:d.HWP_SetSnapDrawMode(e,t)},this.I_SetSnapPolygonInfo=function(e,t){if(V())return-1;var n,o,r,i,a,c,l,u,p,f,h,P=d.HWP_GetSnapPolygonInfo(e);n=y.loadXML(P);var I=(o=s.$XML(n).find("SnapPolygon",!0)).length,v=[];for(r=0,i=o.length;i>r;r++)a=o[r],v.push(s.$XML(a).find("id").eq(0).text());var m=v.join(",");if(m=","+m+",",n=y.loadXML(t),I+(o=s.$XML(n).find("SnapPolygon",!0)).length>32)return-3;for(r=0,i=o.length;i>r;r++){if(a=o[r],c=s.$XML(a).find("id").eq(0).text(),!y.isInt(c))return-2;if(1>(l=parseInt(c,10))||l>32)return-2;if(m.indexOf(","+c+",")>-1)return-4;if(s.$XML(a).find("tips").eq(0).text().length>32)return-2;if(!("true"===s.$XML(a).find("isClosed").eq(0).text())){if(u=s.$XML(a).find("MinClosed").eq(0).text(),!y.isInt(u))return-2;if(4>(p=parseInt(u,10))||p>17)return-2;if(f=s.$XML(a).find("PointNumMax").eq(0).text(),!y.isInt(f))return-2;if(p>(h=parseInt(f,10))||h>17)return-2}}return d.HWP_SetSnapPolygonInfo(e,t)},this.I_GetSnapPolygonInfo=function(e){return V()?"":d.HWP_GetSnapPolygonInfo(e)},this.I_ClearSnapInfo=function(e){return V()?-1:d.HWP_ClearSnapInfo(e,1)},this.I_DeviceCapturePic=function(e,t,n,o){var r=this.findDeviceIndexByIP(e),s=-1;if(-1!=r){var i=h[r],a={bDateDir:!0};if(y.extend(a,o),!_(a.iResolutionWidth)&&!y.isInt(a.iResolutionWidth))return s;if(!_(a.iResolutionHeight)&&!y.isInt(a.iResolutionHeight))return s;s=i.oProtocolInc.deviceCapturePic(i,t,n,a)}return s},this.I_SetPackageType=function(e){return V()?-1:d.HWP_SetPackageType(e)},this.I_GetDevicePort=function(e){var t=this.findDeviceIndexByIP(e),n=null;if(-1!=t){var o=h[t];n=A(o)}return n},this.findDeviceIndexByIP=function(e){if(e.indexOf("_")>-1){for(var t=0,n=h.length;n>t;t++)if(h[t].szDeviceIdentify==e)return t}else for(t=0,n=h.length;n>t;t++)if(h[t].szIP==e)return t;return-1},this.findWndIndexByIndex=function(e){for(var t=0,n=P.length;n>t;t++)if(P[t].iIndex==e)return t;return-1};var F=function(){this.szIP="",this.szHostName="",this.szAuth="",this.szHttpProtocol="http://",this.iCGIPort=80,this.szDeviceIdentify="",this.iDevicePort=-1,this.iHttpPort=-1,this.iHttpsPort=-1,this.iRtspPort=-1,this.iWSPort=-1,this.iAudioType=1,this.m_iAudioBitRate=-1,this.m_iAudioSamplingRate=-1,this.iDeviceProtocol=1,this.oProtocolInc=null,this.iAnalogChannelNum=0,this.szDeviceType="",this.bVoiceTalk=!1,this.oStreamCapa={bObtained:!1,bSupportShttpPlay:!1,bSupportShttpPlayback:!1,bSupportShttpsPlay:!1,bSupportShttpsPlayback:!1,bSupportShttpPlaybackTransCode:!1,bSupportShttpsPlaybackTransCode:!1,iIpChanBase:1}},B=function(){this.iIndex=0,this.szIP="",this.iCGIPort=80,this.szDeviceIdentify="",this.iChannelID="",this.iPlayStatus=0,this.bSound=!1,this.bRecord=!1,this.bPTZAuto=!1,this.bEZoom=!1,this.b3DZoom=!1},U=function(){this.options={type:"GET",url:"",auth:"",timeout:1e4,data:"",async:!0,success:null,error:null},this.m_szHttpHead="",this.m_szHttpContent="",this.m_szHttpData=""};U.prototype.m_httpRequestSet=[],U.prototype.setRequestParam=function(e){y.extend(this.options,e)},U.prototype.submitRequest=function(){var e=null,t=this;if(V()){this.options.auth?y.cookie("WebSession",this.options.auth):y.cookie("WebSession",null);var n=E(this.options.url),r=new o.XMLHttpRequest;r.open(this.options.type,n,this.options.async),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("If-Modified-Since","0"),r.send(this.options.data||null);var s=function(){if(4===r.readyState){e={funSuccessCallback:t.options.success,funErrorCallback:t.options.error};var n=r.status+r.responseText;0===r.status&&(n=""),t.httpDataAnalyse(e,n)}};this.options.async?(r.timeout=this.options.timeout,r.onreadystatechange=function(){s()}):s()}else{var i=this.getHttpMethod(this.options.type);if(this.options.async){var a=d.HWP_SubmitHttpRequest(i,this.options.url,this.options.auth,this.options.data,this.options.timeout);-1!=a&&(e={iRequestID:a,funSuccessCallback:this.options.success,funErrorCallback:this.options.error},this.m_httpRequestSet.push(e))}else{var c=d.HWP_SendHttpSynRequest(i,this.options.url,this.options.auth,this.options.data,this.options.timeout);e={funSuccessCallback:this.options.success,funErrorCallback:this.options.error},this.httpDataAnalyse(e,c)}}},U.prototype.getHttpMethod=function(e){var t={GET:1,POST:2,PUT:5,DELETE:6}[e];return t||-1},U.prototype.processCallback=function(e,t){for(var n=null,o=0;o<this.m_httpRequestSet.length;o++)if(e==this.m_httpRequestSet[o].iRequestID){n=this.m_httpRequestSet[o],this.m_httpRequestSet.splice(o,1);break}null!=n&&(this.httpDataAnalyse(n,t),delete n)},U.prototype.httpDataAnalyse=function(e,t){var n="",o=0;""==t||_(t)?e.funErrorCallback():(o=parseInt(t.substring(0,3)),n=t.substring(3,t.length),isNaN(o)?e.funErrorCallback():200==o?e.funSuccessCallback(y.loadXML2(n)):e.funErrorCallback(o,y.loadXML2(n)))};var j=function(){};j.prototype.CGI={login:"%s%s:%s/ISAPI/Security/userCheck",getAudioInfo:"%s%s:%s/ISAPI/System/TwoWayAudio/channels",getDeviceInfo:"%s%s:%s/ISAPI/System/deviceInfo",getAnalogChannelInfo:"%s%s:%s/ISAPI/System/Video/inputs/channels",getDigitalChannel:"%s%s:%s/ISAPI/ContentMgmt/InputProxy/channels",getDigitalChannelInfo:"%s%s:%s/ISAPI/ContentMgmt/InputProxy/channels/status",getZeroChannelInfo:"%s%s:%s/ISAPI/ContentMgmt/ZeroVideo/channels",getStreamChannels:{analog:"%s%s:%s/ISAPI/Streaming/channels",digital:"%s%s:%s/ISAPI/ContentMgmt/StreamingProxy/channels"},getStreamDynChannels:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/DynStreaming/channels",startRealPlay:{channels:"%s%s:%s/PSIA/streaming/channels/%s",zeroChannels:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/ZeroStreaming/channels/%s"},startShttpRealPlay:{channels:"%s%s:%s/SDK/play/%s/004",zeroChannels:"%s%s:%s/SDK/play/100/004/ZeroStreaming"},startWsRealPlay:{channels:"%s%s:%s/%s",zeroChannels:"%s%s:%s/%s"},startVoiceTalk:{open:"%s%s:%s/ISAPI/System/TwoWayAudio/channels/%s/open",close:"%s%s:%s/ISAPI/System/TwoWayAudio/channels/%s/close",audioData:"%s%s:%s/ISAPI/System/TwoWayAudio/channels/%s/audioData"},ptzControl:{analog:"%s%s:%s/ISAPI/PTZCtrl/channels/%s/continuous",digital:"%s%s:%s/ISAPI/ContentMgmt/PTZCtrlProxy/channels/%s/continuous"},ptzAutoControl:{ipdome:"%s%s:%s/ISAPI/PTZCtrl/channels/%s/presets/%s/goto",analog:"%s%s:%s/ISAPI/PTZCtrl/channels/%s/autoPan",digital:"%s%s:%s/ISAPI/ContentMgmt/PTZCtrlProxy/channels/%s/autoPan"},setPreset:{analog:"%s%s:%s/ISAPI/PTZCtrl/channels/%s/presets/%s",digital:"%s%s:%s/ISAPI/ContentMgmt/PTZCtrlProxy/channels/%s/presets/%s"},goPreset:{analog:"%s%s:%s/ISAPI/PTZCtrl/channels/%s/presets/%s/goto",digital:"%s%s:%s/ISAPI/ContentMgmt/PTZCtrlProxy/channels/%s/presets/%s/goto"},ptzFocus:{analog:"%s%s:%s/ISAPI/Image/channels/%s/focus",digital:"%s%s:%s/ISAPI/ContentMgmt/ImageProxy/channels/%s/focus",ipc:"%s%s:%s/ISAPI/System/Video/inputs/channels/%s/focus"},ptzIris:{analog:"%s%s:%s/ISAPI/Image/channels/%s/iris",digital:"%s%s:%s/ISAPI/ContentMgmt/ImageProxy/channels/%s/iris",ipc:"%s%s:%s/ISAPI/System/Video/inputs/channels/%s/iris"},getNetworkBond:"%s%s:%s/ISAPI/System/Network/Bond",getNetworkInterface:"%s%s:%s/ISAPI/System/Network/interfaces",getUPnPPortStatus:"%s%s:%s/ISAPI/System/Network/UPnP/ports/status",getPPPoEStatus:"%s%s:%s/ISAPI/System/Network/PPPoE/1/status",getPortInfo:"%s%s:%s/ISAPI/Security/adminAccesses",recordSearch:"%s%s:%s/ISAPI/ContentMgmt/search",startPlayback:"%s%s:%s/PSIA/streaming/tracks/%s?starttime=%s&endtime=%s",startWsPlayback:"%s%s:%s/%s",startShttpPlayback:"%s%s:%s/SDK/playback/%s",startShttpReversePlayback:"%s%s:%s/SDK/playback/%s/reversePlay",startTransCodePlayback:"%s%s:%s/SDK/playback/%s/transcoding",startDownloadRecord:"%s%s:%s/ISAPI/ContentMgmt/download",deviceConfig:"%s%s:%s/ISAPI/System/configurationData",restart:"%s%s:%s/ISAPI/System/reboot",restore:"%s%s:%s/ISAPI/System/factoryReset?mode=%s",startUpgrade:{upgrade:"%s%s:%s/ISAPI/System/updateFirmware",status:"%s%s:%s/ISAPI/System/upgradeStatus"},set3DZoom:{analog:"%s%s:%s/ISAPI/PTZCtrl/channels/%s/position3D",digital:"%s%s:%s/ISAPI/ContentMgmt/PTZCtrlProxy/channels/%s/position3D"},SDKCapabilities:"%s%s:%s/SDK/capabilities",deviceCapture:{channels:"%s%s:%s/ISAPI/Streaming/channels/%s/picture"},sessionCap:"%s%s:%s/ISAPI/Security/sessionLogin/capabilities?username=%s",sessionLogin:"%s%s:%s/ISAPI/Security/sessionLogin",sessionHeartbeat:"%s%s:%s/ISAPI/Security/sessionHeartbeat",sessionLogout:"%s%s:%s/ISAPI/Security/sessionLogout",systemCapabilities:"%s%s:%s/ISAPI/System/capabilities"},j.prototype.login=function(e,t,n,o){var r=2==o.protocol?"https://":"http://",s=w(this.CGI.login,r,e,t),i=new U,a={type:"GET",url:s,auth:n,success:null,error:null};y.extend(a,o),y.extend(a,{success:function(e){o.success&&o.success(e)},error:function(e,t){o.error&&o.error(e,t)}}),i.setRequestParam(a),i.submitRequest()},j.prototype.getAudioInfo=function(e,t){var n=w(this.CGI.getAudioInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getDeviceInfo=function(e,t){var n=w(this.CGI.getDeviceInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){var n=[];n.push("<DeviceInfo>"),n.push("<deviceName>"+y.escape(s.$XML(e).find("deviceName").eq(0).text())+"</deviceName>"),n.push("<deviceID>"+s.$XML(e).find("deviceID").eq(0).text()+"</deviceID>"),n.push("<deviceType>"+s.$XML(e).find("deviceType").eq(0).text()+"</deviceType>"),n.push("<model>"+s.$XML(e).find("model").eq(0).text()+"</model>"),n.push("<serialNumber>"+s.$XML(e).find("serialNumber").eq(0).text()+"</serialNumber>"),n.push("<macAddress>"+s.$XML(e).find("macAddress").eq(0).text()+"</macAddress>"),n.push("<firmwareVersion>"+s.$XML(e).find("firmwareVersion").eq(0).text()+"</firmwareVersion>"),n.push("<firmwareReleasedDate>"+s.$XML(e).find("firmwareReleasedDate").eq(0).text()+"</firmwareReleasedDate>"),n.push("<encoderVersion>"+s.$XML(e).find("encoderVersion").eq(0).text()+"</encoderVersion>"),n.push("<encoderReleasedDate>"+s.$XML(e).find("encoderReleasedDate").eq(0).text()+"</encoderReleasedDate>"),n.push("</DeviceInfo>"),e=y.loadXML(n.join("")),t.success&&t.success(e),t.mysuccess&&t.mysuccess(n.join(""))},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getAnalogChannelInfo=function(e,t){var n=w(this.CGI.getAnalogChannelInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){var n=[];n.push("<VideoInputChannelList>");for(var o=s.$XML(e).find("VideoInputChannel",!0),r=0,i=o.length;i>r;r++){var a=o[r];n.push("<VideoInputChannel>"),n.push("<id>"+s.$XML(a).find("id").eq(0).text()+"</id>"),n.push("<inputPort>"+s.$XML(a).find("inputPort").eq(0).text()+"</inputPort>"),n.push("<name>"+y.escape(s.$XML(a).find("name").eq(0).text())+"</name>"),n.push("<videoFormat>"+s.$XML(a).find("videoFormat").eq(0).text()+"</videoFormat>"),n.push("</VideoInputChannel>")}n.push("</VideoInputChannelList>"),e=y.loadXML(n.join("")),t.success&&t.success(e),t.mysuccess&&t.mysuccess(n.join(""))},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getDigitalChannel=function(e,t){var n=w(this.CGI.getDigitalChannel,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){var n=[];n.push("<InputProxyChannelList>");for(var o=s.$XML(e).find("InputProxyChannel",!0),r=0,i=o.length;i>r;r++){var a=o[r];n.push("<InputProxyChannel>"),n.push("<id>"+s.$XML(a).find("id").eq(0).text()+"</id>"),n.push("<name>"+y.escape(s.$XML(a).find("name").eq(0).text())+"</name>"),n.push("</InputProxyChannel>")}n.push("</InputProxyChannelList>"),e=y.loadXML2(n.join("")),t.success&&t.success(e),t.mysuccess&&t.mysuccess(n.join(""))},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getDigitalChannelInfo=function(e,t){var n=null,o={};if(this.getDigitalChannel(e,{async:!1,success:function(e){n=e;for(var t=s.$XML(n).find("InputProxyChannel",!0),r=0,i=t.length;i>r;r++){var a=t[r],c=s.$XML(a).find("id").eq(0).text(),l=s.$XML(a).find("name").eq(0).text();o[c]=l}},error:function(e,n){t.error&&t.error(e,n)}}),null!==n){var r=w(this.CGI.getDigitalChannelInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),i=new U,a={type:"GET",url:r,auth:e.szAuth,success:null,error:null};y.extend(a,t),y.extend(a,{success:function(e){var n=[];n.push("<InputProxyChannelStatusList>");for(var r=s.$XML(e).find("InputProxyChannelStatus",!0),i=0,a=r.length;a>i;i++){var c=r[i],l=s.$XML(c).find("id").eq(0).text();n.push("<InputProxyChannelStatus>"),n.push("<id>"+l+"</id>"),n.push("<sourceInputPortDescriptor>"),n.push("<proxyProtocol>"+s.$XML(c).find("proxyProtocol").eq(0).text()+"</proxyProtocol>"),n.push("<addressingFormatType>"+s.$XML(c).find("addressingFormatType").eq(0).text()+"</addressingFormatType>"),n.push("<ipAddress>"+s.$XML(c).find("ipAddress").eq(0).text()+"</ipAddress>"),n.push("<managePortNo>"+s.$XML(c).find("managePortNo").eq(0).text()+"</managePortNo>"),n.push("<srcInputPort>"+s.$XML(c).find("srcInputPort").eq(0).text()+"</srcInputPort>"),n.push("<userName>"+y.escape(s.$XML(c).find("userName").eq(0).text())+"</userName>"),n.push("<streamType>"+s.$XML(c).find("streamType").eq(0).text()+"</streamType>"),n.push("<online>"+s.$XML(c).find("online").eq(0).text()+"</online>"),n.push("<name>"+y.escape(o[l])+"</name>"),n.push("</sourceInputPortDescriptor>"),n.push("</InputProxyChannelStatus>")}n.push("</InputProxyChannelStatusList>"),e=y.loadXML2(n.join("")),t.success&&t.success(e),t.mysuccess&&t.mysuccess(n.join(""))},error:function(e,n){t.error&&t.error(e,n)}}),i.setRequestParam(a),i.submitRequest()}},j.prototype.getZeroChannelInfo=function(e,t){var n=w(this.CGI.getZeroChannelInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getStreamChannels=function(e,t){if(0!=e.iAnalogChannelNum)var n=w(this.CGI.getStreamChannels.analog,e.szHttpProtocol,e.szIP,e.iCGIPort);else n=w(this.CGI.getStreamChannels.digital,e.szHttpProtocol,e.szIP,e.iCGIPort);var o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getPPPoEStatus=function(e,t){var n=w(this.CGI.getPPPoEStatus,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getUPnPPortStatus=function(e,t){var n=w(this.CGI.getUPnPPortStatus,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getNetworkBond=function(e,t){var n=w(this.CGI.getNetworkBond,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getNetworkInterface=function(e,t){var n=w(this.CGI.getNetworkInterface,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getPortInfo=function(e,t){var n=w(this.CGI.getPortInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.startRealPlay=function(e,t){var n,o=100*t.iChannelID+t.iStreamType,r="",s=e.szIP;"rtsp://"===t.urlProtocol&&(s=T(s)),t.bZeroChannel?(V()&&(o=0),r=w(t.cgi.zeroChannels,t.urlProtocol,s,t.iPort,o)):r=w(t.cgi.channels,t.urlProtocol,s,t.iPort,o);var i=function(){var n=new B;n.iIndex=t.iWndIndex,n.szIP=e.szIP,n.iCGIPort=e.iCGIPort,n.szDeviceIdentify=e.szDeviceIdentify,n.iChannelID=t.iChannelID,n.iPlayStatus=1,P.push(n)};return V()?new Promise(function(n,o){d.JS_Play(r,{session:e.szAuth},t.iWndIndex).then(function(){i(),n()},function(){o()})}):(0==(n=d.HWP_Play(r,e.szAuth,t.iWndIndex,"",""))&&i(),n)},j.prototype.startVoiceTalk=function(e,t){var n=w(this.CGI.startVoiceTalk.open,e.szHttpProtocol,e.szIP,e.iCGIPort,t),o=w(this.CGI.startVoiceTalk.close,e.szHttpProtocol,e.szIP,e.iCGIPort,t),r=w(this.CGI.startVoiceTalk.audioData,e.szHttpProtocol,e.szIP,e.iCGIPort,t);return d.HWP_StartVoiceTalkEx(n,o,r,e.szAuth,e.iAudioType,e.m_iAudioBitRate,e.m_iAudioSamplingRate)},j.prototype.ptzAutoControl=function(e,t,n,o){var r=n.iChannelID,s="",i="";if(o.iPTZSpeed=o.iPTZSpeed<7?15*o.iPTZSpeed:100,t&&(o.iPTZSpeed=0),e.szDeviceType!=x)s=r<=e.iAnalogChannelNum?w(this.CGI.ptzAutoControl.analog,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID):n.bShttpIPChannel?w(this.CGI.ptzAutoControl.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID-e.oStreamCapa.iIpChanBase+1+e.iAnalogChannelNum):w(this.CGI.ptzAutoControl.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID),i="<?xml version='1.0' encoding='UTF-8'?><autoPanData><autoPan>"+o.iPTZSpeed+"</autoPan></autoPanData>";else{var a=99;t&&(a=96),s=w(this.CGI.ptzAutoControl.ipdome,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID,a)}var c=new U,l={type:"PUT",url:s,async:!1,auth:e.szAuth,data:i,success:null,error:null},u=this;y.extend(l,o),y.extend(l,{success:function(e){n.bPTZAuto=!n.bPTZAuto,o.success&&o.success(e)},error:function(t,r){if(g==e.szDeviceType||b==e.szDeviceType){s=n.bShttpIPChannel?w(u.CGI.ptzControl.analog,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID-e.oStreamCapa.iIpChanBase+1+e.iAnalogChannelNum):w(u.CGI.ptzControl.analog,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID),i="<?xml version='1.0' encoding='UTF-8'?><PTZData><pan>"+o.iPTZSpeed+"</pan><tilt>0</tilt></PTZData>";var a=new U,c={type:"PUT",url:s,async:!1,auth:e.szAuth,data:i,success:null,error:null};y.extend(c,o),a.setRequestParam(c),a.submitRequest()}else o.error&&o.error(t,r)}}),c.setRequestParam(l),c.submitRequest()},j.prototype.ptzControl=function(e,t,n,o){var r,s=n.iChannelID;n.bPTZAuto&&this.ptzAutoControl(e,!0,n,{iPTZSpeed:0}),o.iPTZSpeed=t?0:o.iPTZSpeed<7?15*o.iPTZSpeed:100;var i=[{},{pan:0,tilt:o.iPTZSpeed},{pan:0,tilt:-o.iPTZSpeed},{pan:-o.iPTZSpeed,tilt:0},{pan:o.iPTZSpeed,tilt:0},{pan:-o.iPTZSpeed,tilt:o.iPTZSpeed},{pan:-o.iPTZSpeed,tilt:-o.iPTZSpeed},{pan:o.iPTZSpeed,tilt:o.iPTZSpeed},{pan:o.iPTZSpeed,tilt:-o.iPTZSpeed},{},{speed:o.iPTZSpeed},{speed:-o.iPTZSpeed},{speed:o.iPTZSpeed},{speed:-o.iPTZSpeed},{speed:o.iPTZSpeed},{speed:-o.iPTZSpeed}],a="",c={};switch(o.iPTZIndex){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:c=this.CGI.ptzControl,a="<?xml version='1.0' encoding='UTF-8'?><PTZData><pan>"+i[o.iPTZIndex].pan+"</pan><tilt>"+i[o.iPTZIndex].tilt+"</tilt></PTZData>";break;case 10:case 11:c=this.CGI.ptzControl,a="<?xml version='1.0' encoding='UTF-8'?><PTZData><zoom>"+i[o.iPTZIndex].speed+"</zoom></PTZData>";break;case 12:case 13:c=this.CGI.ptzFocus,a="<?xml version='1.0' encoding='UTF-8'?><FocusData><focus>"+i[o.iPTZIndex].speed+"</focus></FocusData>";break;case 14:case 15:c=this.CGI.ptzIris,a="<?xml version='1.0' encoding='UTF-8'?><IrisData><iris>"+i[o.iPTZIndex].speed+"</iris></IrisData>";break;default:return void(o.error&&o.error())}r=c!=this.CGI.ptzFocus&&c!=this.CGI.ptzIris||e.szDeviceType!=g&&e.szDeviceType!=x&&e.szDeviceType!=b?s<=e.iAnalogChannelNum?w(c.analog,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID):n.bShttpIPChannel?w(c.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID-e.oStreamCapa.iIpChanBase+1+e.iAnalogChannelNum):w(c.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID):w(c.ipc,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID);var l=new U,u={type:"PUT",url:r,async:!1,auth:e.szAuth,data:a,success:null,error:null};y.extend(u,o),y.extend(u,{success:function(e){o.success&&o.success(e)},error:function(e,t){o.error&&o.error(e,t)}}),l.setRequestParam(u),l.submitRequest()},j.prototype.setPreset=function(e,t,n){var o,r="";o=t.iChannelID<=e.iAnalogChannelNum?w(this.CGI.setPreset.analog,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID,n.iPresetID):t.bShttpIPChannel?w(this.CGI.setPreset.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID-e.oStreamCapa.iIpChanBase+1+e.iAnalogChannelNum,n.iPresetID):w(this.CGI.setPreset.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID,n.iPresetID),r="<?xml version='1.0' encoding='UTF-8'?>",r+="<PTZPreset>",r+="<id>"+n.iPresetID+"</id>",e.szDeviceType!=x&&(r+="<presetName>Preset"+n.iPresetID+"</presetName>"),r+="</PTZPreset>";var s=new U,i={type:"PUT",url:o,auth:e.szAuth,data:r,success:null,error:null};y.extend(i,n),y.extend(i,{success:function(e){n.success&&n.success(e)},error:function(e,t){n.error&&n.error(e,t)}}),s.setRequestParam(i),s.submitRequest()},j.prototype.goPreset=function(e,t,n){var o;o=t.iChannelID<=e.iAnalogChannelNum?w(this.CGI.goPreset.analog,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID,n.iPresetID):t.bShttpIPChannel?w(this.CGI.goPreset.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID-e.oStreamCapa.iIpChanBase+1+e.iAnalogChannelNum,n.iPresetID):w(this.CGI.goPreset.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID,n.iPresetID);var r=new U,s={type:"PUT",url:o,auth:e.szAuth,success:null,error:null};y.extend(s,n),y.extend(s,{success:function(e){n.success&&n.success(e)},error:function(e,t){n.error&&n.error(e,t)}}),r.setRequestParam(s),r.submitRequest()},j.prototype.recordSearch=function(e,t){var n,o,i=t.iChannelID,a=t.iStreamType,c=t.szStartTime.replace(" ","T")+"Z",l=t.szEndTime.replace(" ","T")+"Z";n=w(this.CGI.recordSearch,e.szHttpProtocol,e.szIP,e.iCGIPort),o="<?xml version='1.0' encoding='UTF-8'?><CMSearchDescription><searchID>"+new r+"</searchID><trackList><trackID>"+(100*i+a)+"</trackID></trackList><timeSpanList><timeSpan><startTime>"+c+"</startTime><endTime>"+l+"</endTime></timeSpan></timeSpanList><maxResults>40</maxResults><searchResultPostion>"+t.iSearchPos+"</searchResultPostion><metadataList><metadataDescriptor>//metadata.ISAPI.org/VideoMotion</metadataDescriptor></metadataList></CMSearchDescription>";var u=new U,d={type:"POST",url:n,auth:e.szAuth,data:o,success:null,error:null};y.extend(d,t),y.extend(d,{success:function(e){var n=[];n.push("<CMSearchResult>"),n.push("<responseStatus>"+s.$XML(e).find("responseStatus").eq(0).text()+"</responseStatus>"),n.push("<responseStatusStrg>"+s.$XML(e).find("responseStatusStrg").eq(0).text()+"</responseStatusStrg>"),n.push("<numOfMatches>"+s.$XML(e).find("numOfMatches").eq(0).text()+"</numOfMatches>"),n.push("<matchList>");for(var o=s.$XML(e).find("searchMatchItem",!0),r=0,i=o.length;i>r;r++){var a=o[r];n.push("<searchMatchItem>"),n.push("<trackID>"+s.$XML(a).find("trackID").eq(0).text()+"</trackID>"),n.push("<startTime>"+s.$XML(a).find("startTime").eq(0).text()+"</startTime>"),n.push("<endTime>"+s.$XML(a).find("endTime").eq(0).text()+"</endTime>"),n.push("<playbackURI>"+y.escape(s.$XML(a).find("playbackURI").eq(0).text())+"</playbackURI>"),n.push("<metadataDescriptor>"+s.$XML(a).find("metadataDescriptor").eq(0).text().split("/")[1]+"</metadataDescriptor>"),n.push("</searchMatchItem>")}n.push("</matchList>"),n.push("</CMSearchResult>"),e=y.loadXML(n.join("")),t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),u.setRequestParam(d),u.submitRequest()},j.prototype.startPlayback=function(e,t){var n,o=t.iWndIndex,r=t.szStartTime,s=t.szEndTime,i=e.szIP;if("rtsp://"===t.urlProtocol&&(i=T(i)),n=V()?w(t.cgi,t.urlProtocol,i,t.iPort,t.iChannelID):w(t.cgi,t.urlProtocol,i,t.iPort,t.iChannelID,r,s),!_(t.oTransCodeParam)){var a=function(e){var t={TransFrameRate:"",TransResolution:"",TransBitrate:""};if(y.extend(t,e),""==t.TransFrameRate||""==t.TransResolution||""==t.TransBitrate)return"";var n=[];return n.push("<?xml version='1.0' encoding='UTF-8'?>"),n.push("<CompressionInfo>"),n.push("<TransFrameRate>"+t.TransFrameRate+"</TransFrameRate>"),n.push("<TransResolution>"+t.TransResolution+"</TransResolution>"),n.push("<TransBitrate>"+t.TransBitrate+"</TransBitrate>"),n.push("</CompressionInfo>"),n.join("")}(t.oTransCodeParam);if(""==a)return-1;d.HWP_SetTrsPlayBackParam(o,a)}var c=function(){var n=new B;n.iIndex=o,n.szIP=e.szIP,n.iCGIPort=e.iCGIPort,n.szDeviceIdentify=e.szDeviceIdentify,n.iChannelID=t.iChannelID,n.iPlayStatus=2,P.push(n)};if(V())return new Promise(function(t,i){d.JS_Play(n,{session:e.szAuth},o,r,s).then(function(){c(),t()},function(){i()})});var l=d.HWP_Play(n,e.szAuth,o,r,s);return 0==l&&c(),l},j.prototype.reversePlayback=function(e,t){var n=t.iWndIndex,o=t.szStartTime,r=t.szEndTime,s=e.szIP;"rtsp://"===t.urlProtocol&&(s=T(s));var i=w(t.cgi,t.urlProtocol,s,t.iPort,t.iChannelID,o,r),a=d.HWP_ReversePlay(i,e.szAuth,n,o,r);if(0==a){var c=new B;c.iIndex=n,c.szIP=e.szIP,c.iCGIPort=e.iCGIPort,c.szDeviceIdentify=e.szDeviceIdentify,c.iChannelID=t.iChannelID,c.iPlayStatus=5,P.push(c)}return a},j.prototype.startDownloadRecord=function(e,t){var n=-1,o=w(this.CGI.startDownloadRecord,e.szHttpProtocol,e.szIP,e.iCGIPort),r="<?xml version='1.0' encoding='UTF-8'?><downloadRequest><playbackURI> "+y.escape(t.szPlaybackURI)+"</playbackURI></downloadRequest>";return V()?(o=E(o),n=d.JS_StartDownload(o,e.szAuth,t.szFileName,r)):n=d.HWP_StartDownload(o,e.szAuth,t.szFileName,r,t.bDateDir),n},j.prototype.exportDeviceConfig=function(e){var t=w(this.CGI.deviceConfig,e.szHttpProtocol,e.szIP,e.iCGIPort);return d.HWP_ExportDeviceConfig(t,e.szAuth,"",0)},j.prototype.importDeviceConfig=function(e,t){var n=w(this.CGI.deviceConfig,e.szHttpProtocol,e.szIP,e.iCGIPort);return d.HWP_ImportDeviceConfig(n,e.szAuth,t.szFileName,0)},j.prototype.restart=function(e,t){var n=w(this.CGI.restart,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"PUT",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.restore=function(e,t,n){var o=w(this.CGI.restore,e.szHttpProtocol,e.szIP,e.iCGIPort,t),r=new U,s={type:"PUT",url:o,auth:e.szAuth,success:null,error:null};y.extend(s,n),y.extend(s,{success:function(e){n.success&&n.success(e)},error:function(e,t){n.error&&n.error(e,t)}}),r.setRequestParam(s),r.submitRequest()},j.prototype.startUpgrade=function(e,t){var n=w(this.CGI.startUpgrade.upgrade,e.szHttpProtocol,e.szIP,e.iCGIPort),o=w(this.CGI.startUpgrade.status,e.szHttpProtocol,e.szIP,e.iCGIPort);return d.HWP_StartUpgrade(n,o,e.szAuth,t.szFileName)},j.prototype.set3DZoom=function(e,t,n,o){var r;r=t.iChannelID<=e.iAnalogChannelNum?w(this.CGI.set3DZoom.analog,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID):t.bShttpIPChannel?w(this.CGI.set3DZoom.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID-e.oStreamCapa.iIpChanBase+1+e.iAnalogChannelNum):w(this.CGI.set3DZoom.digital,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID);var i=y.loadXML(n),a="<?xml version='1.0' encoding='UTF-8'?><Position3D><StartPoint><positionX>"+parseInt(s.$XML(i).find("StartPoint").eq(0).find("positionX").eq(0).text(),10)+"</positionX><positionY>"+(255-parseInt(s.$XML(i).find("StartPoint").eq(0).find("positionY").eq(0).text(),10))+"</positionY></StartPoint><EndPoint><positionX>"+parseInt(s.$XML(i).find("EndPoint").eq(0).find("positionX").eq(0).text(),10)+"</positionX><positionY>"+(255-parseInt(s.$XML(i).find("EndPoint").eq(0).find("positionY").eq(0).text(),10))+"</positionY></EndPoint></Position3D>",c=new U,l={type:"PUT",url:r,data:a,auth:e.szAuth,success:null,error:null};y.extend(l,o),y.extend(l,{success:function(e){o.success&&o.success(e)},error:function(e,t){o.error&&o.error(e,t)}}),c.setRequestParam(l),c.submitRequest()},j.prototype.getSDKCapa=function(e,t){var n=w(this.CGI.SDKCapabilities,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.deviceCapturePic=function(e,t,n,o){t=100*t+1;var r=-1,s=w(this.CGI.deviceCapture.channels,e.szHttpProtocol,e.szIP,e.iCGIPort,t),i=[];if(y.isInt(o.iResolutionWidth)&&i.push("videoResolutionWidth="+o.iResolutionWidth),y.isInt(o.iResolutionHeight)&&i.push("videoResolutionHeight="+o.iResolutionHeight),i.length>0&&(s+="?"+i.join("&")),V()){r=function(e,t){return $("body").append('<a id="jsplugin_download_a" href="'+e+'" download='+t+'.jpg><li id="jsplugin_download_li"></li></a>'),$("#jsplugin_download_li").trigger("click"),$("#jsplugin_download_a").remove(),0}(s=E(s),n)}else r=d.HWP_DeviceCapturePic(s,e.szAuth,n,o.bDateDir);return r},j.prototype.getSessionCap=function(e,t,n,o,r){var s;s=2==t?"https://":"http://";var i=w(this.CGI.sessionCap,s,e,n,encodeURIComponent(o)),a=new U,c={type:"GET",url:i,auth:"",success:null,error:null};y.extend(c,r),y.extend(c,{success:function(e){r.success&&r.success(e)},error:function(e,t){r.error&&r.error(e,t)}}),a.setRequestParam(c),a.submitRequest()},j.prototype.sessionLogin=function(e,t,n,o,r,i,a){var c;c=2==t?"https://":"http://";var l=w(this.CGI.sessionLogin,c,e,n),u=s.$XML(i).find("sessionID").eq(0).text(),d=s.$XML(i).find("challenge").eq(0).text(),p=parseInt(s.$XML(i).find("iterations").eq(0).text(),10),f=!1,h="";s.$XML(i).find("isIrreversible",!0).length>0&&(f="true"===s.$XML(i).find("isIrreversible").eq(0).text(),h=s.$XML(i).find("salt").eq(0).text());var P="";if(f){P=y.sha256(o+h+r),P=y.sha256(P+d);for(var I=2;p>I;I++)P=y.sha256(P)}else{P=y.sha256(r)+d;for(I=1;p>I;I++)P=y.sha256(P)}var v="<SessionLogin>";v+="<userName>"+y.escape(o)+"</userName>",v+="<password>"+P+"</password>",v+="<sessionID>"+u+"</sessionID>",v+="</SessionLogin>";var m=new U,C={type:"POST",url:l,data:v,auth:"",success:null,error:null};y.extend(C,a),y.extend(C,{success:function(e){a.success&&a.success(e)},error:function(e,t){a.error&&a.error(e,t)}}),m.setRequestParam(C),m.submitRequest()},j.prototype.sessionHeartbeat=function(e,t){var n=w(this.CGI.sessionHeartbeat,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"PUT",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.sessionLogout=function(e,t){var n=w(this.CGI.sessionLogout,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"PUT",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},j.prototype.getSystemCapa=function(e,t){var n=w(this.CGI.systemCapabilities,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()};var J=function(){};J.prototype.CGI={login:"%s%s:%s/PSIA/Custom/SelfExt/userCheck",getAudioInfo:"%s%s:%s/PSIA/Custom/SelfExt/TwoWayAudio/channels",getDeviceInfo:"%s%s:%s/PSIA/System/deviceInfo",getAnalogChannelInfo:"%s%s:%s/PSIA/System/Video/inputs/channels",getDigitalChannel:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/DynVideo/inputs/channels",getDigitalChannelInfo:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/DynVideo/inputs/channels/status",getZeroChannelInfo:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/ZeroVideo/channels",getStreamChannels:{analog:"%s%s:%s/PSIA/Streaming/channels",digital:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/DynStreaming/channels"},getStreamDynChannels:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/DynStreaming/channels",startRealPlay:{channels:"%s%s:%s/PSIA/streaming/channels/%s",zeroChannels:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/ZeroStreaming/channels/%s"},startVoiceTalk:{open:"%s%s:%s/PSIA/Custom/SelfExt/TwoWayAudio/channels/%s/open",close:"%s%s:%s/PSIA/Custom/SelfExt/TwoWayAudio/channels/%s/close",audioData:"%s%s:%s/PSIA/Custom/SelfExt/TwoWayAudio/channels/%s/audioData"},ptzControl:"%s%s:%s/PSIA/PTZ/channels/%s/continuous",ptzAutoControl:"%s%s:%s/PSIA/Custom/SelfExt/PTZ/channels/%s/autoptz",setPreset:"%s%s:%s/PSIA/PTZ/channels/%s/presets/%s",goPreset:"%s%s:%s/PSIA/PTZ/channels/%s/presets/%s/goto",ptzFocus:"%s%s:%s/PSIA/System/Video/inputs/channels/%s/focus",ptzIris:"%s%s:%s/PSIA/System/Video/inputs/channels/%s/iris",getNetworkBond:"%s%s:%s/PSIA/Custom/SelfExt/Bond",getNetworkInterface:"%s%s:%s/PSIA/System/Network/interfaces",getUPnPPortStatus:"%s%s:%s/PSIA/Custom/SelfExt/UPnP/ports/status",getPPPoEStatus:"%s%s:%s/PSIA/Custom/SelfExt/PPPoE/1/status",getPortInfo:"%s%s:%s/PSIA/Security/AAA/adminAccesses",recordSearch:"%s%s:%s/PSIA/ContentMgmt/search",startPlayback:"%s%s:%s/PSIA/streaming/tracks/%s?starttime=%s&endtime=%s",startDownloadRecord:"%s%s:%s/PSIA/Custom/SelfExt/ContentMgmt/download",deviceConfig:"%s%s:%s/PSIA/System/configurationData",restart:"%s%s:%s/PSIA/System/reboot",restore:"%s%s:%s/PSIA/System/factoryReset?mode=%s",startUpgrade:{upgrade:"%s%s:%s/PSIA/System/updateFirmware",status:"%s%s:%s/PSIA/Custom/SelfExt/upgradeStatus"},set3DZoom:"%s%s:%s/PSIA/Custom/SelfExt/PTZ/channels/%s/Set3DZoom",deviceCapture:{channels:"%s%s:%s/PSIA/Streaming/channels/%s/picture"},systemCapabilities:"%s%s:%s/PSIA/System/capabilities"},J.prototype.login=function(e,t,n,o){var r=2==o.protocol?"https://":"http://",i=w(this.CGI.login,r,e,t),a=new U,c={type:"GET",url:i,auth:n,success:null,error:null};y.extend(c,o),y.extend(c,{success:function(e){"200"==s.$XML(e).find("statusValue").eq(0).text()?o.success&&o.success(e):o.error&&o.error(401,e)},error:function(e,t){o.error&&o.error(e,t)}}),a.setRequestParam(c),a.submitRequest()},J.prototype.getAudioInfo=function(e,t){var n=w(this.CGI.getAudioInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getDeviceInfo=function(e,t){var n=w(this.CGI.getDeviceInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){var n=[];n.push("<DeviceInfo>"),n.push("<deviceName>"+y.escape(s.$XML(e).find("deviceName").eq(0).text())+"</deviceName>"),n.push("<deviceID>"+s.$XML(e).find("deviceID").eq(0).text()+"</deviceID>"),n.push("<deviceType>"+s.$XML(e).find("deviceDescription").eq(0).text()+"</deviceType>"),n.push("<model>"+s.$XML(e).find("model").eq(0).text()+"</model>"),n.push("<serialNumber>"+s.$XML(e).find("serialNumber").eq(0).text()+"</serialNumber>"),n.push("<macAddress>"+s.$XML(e).find("macAddress").eq(0).text()+"</macAddress>"),n.push("<firmwareVersion>"+s.$XML(e).find("firmwareVersion").eq(0).text()+"</firmwareVersion>"),n.push("<firmwareReleasedDate>"+s.$XML(e).find("firmwareReleasedDate").eq(0).text()+"</firmwareReleasedDate>"),n.push("<encoderVersion>"+s.$XML(e).find("logicVersion").eq(0).text()+"</encoderVersion>"),n.push("<encoderReleasedDate>"+s.$XML(e).find("logicReleasedDate").eq(0).text()+"</encoderReleasedDate>"),n.push("</DeviceInfo>"),e=y.loadXML(n.join("")),t.success&&t.success(e),t.mysuccess&&t.mysuccess(n.join(""))},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getSystemCapa=function(e,t){var n=w(this.CGI.systemCapabilities,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getAnalogChannelInfo=function(e,t){var n=w(this.CGI.getAnalogChannelInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){var n=[];n.push("<VideoInputChannelList>");for(var o=s.$XML(e).find("VideoInputChannel",!0),r=0,i=o.length;i>r;r++){var a=o[r];n.push("<VideoInputChannel>"),n.push("<id>"+s.$XML(a).find("id").eq(0).text()+"</id>"),n.push("<inputPort>"+s.$XML(a).find("inputPort").eq(0).text()+"</inputPort>"),n.push("<name>"+y.escape(s.$XML(a).find("name").eq(0).text())+"</name>"),n.push("<videoFormat>"+s.$XML(a).find("videoFormat").eq(0).text()+"</videoFormat>"),n.push("</VideoInputChannel>")}n.push("</VideoInputChannelList>"),e=y.loadXML(n.join("")),t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getDigitalChannel=function(e,t){var n=w(this.CGI.getDigitalChannel,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){var n=[];n.push("<InputProxyChannelList>");for(var o=s.$XML(e).find("DynVideoInputChannel",!0),r=0,i=o.length;i>r;r++){var a=o[r];n.push("<InputProxyChannel>"),n.push("<id>"+s.$XML(a).find("id").eq(0).text()+"</id>"),n.push("<name>"+y.escape(s.$XML(a).find("name").eq(0).text())+"</name>"),n.push("</InputProxyChannel>")}n.push("</InputProxyChannelList>"),e=y.loadXML(n.join("")),t.success&&t.success(e),t.mysuccess&&t.mysuccess(n.join(""))},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getDigitalChannelInfo=function(e,t){var n=null,o={};if(this.getDigitalChannel(e,{async:!1,success:function(e){n=e;for(var t=s.$XML(n).find("InputProxyChannel",!0),r=0,i=t.length;i>r;r++){var a=t[r],c=s.$XML(a).find("id").eq(0).text(),l=s.$XML(a).find("name").eq(0).text();o[c]=l}},error:function(e,n){t.error&&t.error(e,n)}}),null!==n){var r=w(this.CGI.getDigitalChannelInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),i=new U,a={type:"GET",url:r,auth:e.szAuth,success:null,error:null};y.extend(a,t),y.extend(a,{success:function(e){var n=[];n.push("<InputProxyChannelStatusList>");for(var r=s.$XML(e).find("DynVideoInputChannelStatus",!0),i=0,a=r.length;a>i;i++){var c=r[i],l=s.$XML(c).find("id").eq(0).text();n.push("<InputProxyChannelStatus>"),n.push("<id>"+l+"</id>"),n.push("<sourceInputPortDescriptor>"),n.push("<proxyProtocol>"+s.$XML(c).find("adminProtocol").eq(0).text()+"</proxyProtocol>"),n.push("<addressingFormatType>"+s.$XML(c).find("addressingFormatType").eq(0).text()+"</addressingFormatType>"),n.push("<ipAddress>"+s.$XML(c).find("ipAddress").eq(0).text()+"</ipAddress>"),n.push("<managePortNo>"+s.$XML(c).find("adminPortNo").eq(0).text()+"</managePortNo>"),n.push("<srcInputPort>"+s.$XML(c).find("srcInputPort").eq(0).text()+"</srcInputPort>"),n.push("<userName>"+y.escape(s.$XML(c).find("userName").eq(0).text())+"</userName>"),n.push("<streamType>"+s.$XML(c).find("streamType").eq(0).text()+"</streamType>"),n.push("<online>"+s.$XML(c).find("online").eq(0).text()+"</online>"),n.push("<name>"+y.escape(o[l])+"</name>"),n.push("</sourceInputPortDescriptor>"),n.push("</InputProxyChannelStatus>")}n.push("</InputProxyChannelStatusList>"),e=y.loadXML(n.join("")),t.success&&t.success(e),t.mysuccess&&t.mysuccess(n.join(""))},error:function(e,n){t.error&&t.error(e,n)}}),i.setRequestParam(a),i.submitRequest()}},J.prototype.getZeroChannelInfo=function(e,t){var n=w(this.CGI.getZeroChannelInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getPPPoEStatus=function(e,t){var n=w(this.CGI.getPPPoEStatus,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getUPnPPortStatus=function(e,t){var n=w(this.CGI.getUPnPPortStatus,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getNetworkBond=function(e,t){var n=w(this.CGI.getNetworkBond,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getNetworkInterface=function(e,t){var n=w(this.CGI.getNetworkInterface,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getPortInfo=function(e,t){var n=w(this.CGI.getPortInfo,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(n){var o=[];o.push("<AdminAccessProtocolList>");for(var r=s.$XML(n).find("AdminAccessProtocol",!0),i=0,a=r.length;a>i;i++)r[i],o.push("<AdminAccessProtocol>"),o.push("<id>"+s.$XML(n).find("id").eq(0).text()+"</id>"),o.push("<enabled>"+s.$XML(n).find("enabled").eq(0).text()+"</enabled>"),o.push("<protocol>"+s.$XML(n).find("protocol").eq(0).text().toUpperCase()+"</protocol>"),o.push("<portNo>"+s.$XML(n).find("portNo").eq(0).text()+"</portNo>"),o.push("</AdminAccessProtocol>");m.getStreamChannels(e,{async:!1,success:function(n){if(s.$XML(n).find("rtspPortNo",!0).length>0){var r=parseInt(s.$XML(n).find("rtspPortNo").eq(0).text(),10);o.push("<AdminAccessProtocol>"),o.push("<id>4</id>"),o.push("<enabled>true</enabled>"),o.push("<protocol>RTSP</protocol>"),o.push("<portNo>"+r+"</portNo>"),o.push("</AdminAccessProtocol>"),o.push("</AdminAccessProtocolList>");var i=y.loadXML(o.join(""));t.success&&t.success(i)}else m.getStreamDynChannels(e,{async:!1,success:function(e){if(s.$XML(e).find("rtspPortNo",!0).length>0){var n=parseInt(s.$XML(e).find("rtspPortNo").eq(0).text(),10);o.push("<AdminAccessProtocol>"),o.push("<id>4</id>"),o.push("<enabled>true</enabled>"),o.push("<protocol>RTSP</protocol>"),o.push("<portNo>"+n+"</portNo>"),o.push("</AdminAccessProtocol>"),o.push("</AdminAccessProtocolList>");var r=y.loadXML(o.join(""));t.success&&t.success(r)}},error:function(){t.error&&t.error()}})},error:function(){t.error&&t.error()}})},error:function(){var n=[];n.push("<AdminAccessProtocolList>"),m.getStreamChannels(e,{async:!1,success:function(o){if(s.$XML(o).find("rtspPortNo",!0).length>0){var r=parseInt(s.$XML(o).find("rtspPortNo").eq(0).text(),10);n.push("<AdminAccessProtocol>"),n.push("<id>4</id>"),n.push("<enabled>true</enabled>"),n.push("<protocol>RTSP</protocol>"),n.push("<portNo>"+r+"</portNo>"),n.push("</AdminAccessProtocol>"),n.push("</AdminAccessProtocolList>");var i=y.loadXML(n.join(""));t.success&&t.success(i)}else m.getStreamDynChannels(e,{async:!1,success:function(e){if(s.$XML(e).find("rtspPortNo",!0).length>0){var o=parseInt(s.$XML(e).find("rtspPortNo").eq(0).text(),10);n.push("<AdminAccessProtocol>"),n.push("<id>4</id>"),n.push("<enabled>true</enabled>"),n.push("<protocol>RTSP</protocol>"),n.push("<portNo>"+o+"</portNo>"),n.push("</AdminAccessProtocol>"),n.push("</AdminAccessProtocolList>");var r=y.loadXML(n.join(""));t.success&&t.success(r)}},error:function(){t.error&&t.error()}})},error:function(){t.error&&t.error()}})}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getStreamChannels=function(e,t){if(0!=e.iAnalogChannelNum)var n=w(this.CGI.getStreamChannels.analog,e.szHttpProtocol,e.szIP,e.iCGIPort);else n=w(this.CGI.getStreamChannels.digital,e.szHttpProtocol,e.szIP,e.iCGIPort);var o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.getStreamDynChannels=function(e,t){var n=w(this.CGI.getStreamDynChannels,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"GET",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.startRealPlay=function(e,t){var n,o=100*t.iChannelID+t.iStreamType,r=e.szIP;"rtsp://"===t.urlProtocol&&(r=T(r)),n=t.bZeroChannel?w(t.cgi.zeroChannels,t.urlProtocol,r,t.iPort,o):w(t.cgi.channels,t.urlProtocol,r,t.iPort,o);var s=d.HWP_Play(n,e.szAuth,t.iWndIndex,"","");if(0==s){var i=new B;i.iIndex=t.iWndIndex,i.szIP=e.szIP,i.iCGIPort=e.iCGIPort,i.szDeviceIdentify=e.szDeviceIdentify,i.iChannelID=t.iChannelID,i.iPlayStatus=1,P.push(i)}return s},J.prototype.startVoiceTalk=function(e,t){var n=w(this.CGI.startVoiceTalk.open,e.szHttpProtocol,e.szIP,e.iCGIPort,t),o=w(this.CGI.startVoiceTalk.close,e.szHttpProtocol,e.szIP,e.iCGIPort,t),r=w(this.CGI.startVoiceTalk.audioData,e.szHttpProtocol,e.szIP,e.iCGIPort,t);return d.HWP_StartVoiceTalkEx(n,o,r,e.szAuth,e.iAudioTypeoDeviceInfo.m_iAudioBitRate,e.m_iAudioSamplingRate)},J.prototype.ptzAutoControl=function(e,t,n,o){var r=n.iChannelID,s="",i="";if(o.iPTZSpeed=o.iPTZSpeed<7?15*o.iPTZSpeed:100,t&&(o.iPTZSpeed=0),e.szDeviceType!=x)s=w(this.CGI.ptzAutoControl,e.szHttpProtocol,e.szIP,e.iCGIPort,r),i="<?xml version='1.0' encoding='UTF-8'?><PTZData><pan>"+o.iPTZSpeed+"</pan><tilt>0</tilt></PTZData>";else{var a=99;t&&(a=96),s=w(this.CGI.goPreset,e.szHttpProtocol,e.szIP,e.iCGIPort,r,a)}var c=new U,l={type:"PUT",url:s,async:!1,auth:e.szAuth,data:i,success:null,error:null},u=this;y.extend(l,o),y.extend(l,{success:function(e){n.bPTZAuto=!n.bPTZAuto,o.success&&o.success(e)},error:function(t,r){if(e.szDeviceType!=x){s=w(u.CGI.ptzControl,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID);var a=new U,c={type:"PUT",url:s,async:!1,auth:e.szAuth,data:i,success:null,error:null};y.extend(c,o),a.setRequestParam(c),a.submitRequest()}else o.error&&o.error(t,r)}}),c.setRequestParam(l),c.submitRequest()},J.prototype.ptzControl=function(e,t,n,o){var r=n.iChannelID;n.bPTZAuto&&this.ptzAutoControl(e,!0,n,{iPTZSpeed:0}),o.iPTZSpeed=t?0:o.iPTZSpeed<7?15*o.iPTZSpeed:100;var s=[{},{pan:0,tilt:o.iPTZSpeed},{pan:0,tilt:-o.iPTZSpeed},{pan:-o.iPTZSpeed,tilt:0},{pan:o.iPTZSpeed,tilt:0},{pan:-o.iPTZSpeed,tilt:o.iPTZSpeed},{pan:-o.iPTZSpeed,tilt:-o.iPTZSpeed},{pan:o.iPTZSpeed,tilt:o.iPTZSpeed},{pan:o.iPTZSpeed,tilt:-o.iPTZSpeed},{},{speed:o.iPTZSpeed},{speed:-o.iPTZSpeed},{speed:o.iPTZSpeed},{speed:-o.iPTZSpeed},{speed:o.iPTZSpeed},{speed:-o.iPTZSpeed}],i="",a={};switch(o.iPTZIndex){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:a=this.CGI.ptzControl,i="<?xml version='1.0' encoding='UTF-8'?><PTZData><pan>"+s[o.iPTZIndex].pan+"</pan><tilt>"+s[o.iPTZIndex].tilt+"</tilt></PTZData>";break;case 10:case 11:a=this.CGI.ptzControl,i="<?xml version='1.0' encoding='UTF-8'?><PTZData><zoom>"+s[o.iPTZIndex].speed+"</zoom></PTZData>";break;case 12:case 13:a=this.CGI.ptzFocus,i="<?xml version='1.0' encoding='UTF-8'?><FocusData><focus>"+s[o.iPTZIndex].speed+"</focus></FocusData>";break;case 14:case 15:a=this.CGI.ptzIris,i="<?xml version='1.0' encoding='UTF-8'?><IrisData><iris>"+s[o.iPTZIndex].speed+"</iris></IrisData>";break;default:return void(o.error&&o.error())}r=w(a,e.szHttpProtocol,e.szIP,e.iCGIPort,n.iChannelID);var c=new U,l={type:"PUT",url:r,async:!1,auth:e.szAuth,data:i,success:null,error:null};y.extend(l,o),y.extend(l,{success:function(e){o.success&&o.success(e)},error:function(e,t){o.error&&o.error(e,t)}}),c.setRequestParam(l),c.submitRequest()},J.prototype.setPreset=function(e,t,n){var o=t.iChannelID,r="";o=w(this.CGI.setPreset,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID,n.iPresetID),r="<?xml version='1.0' encoding='UTF-8'?>",r+="<PTZPreset>",r+="<id>"+n.iPresetID+"</id>",e.szDeviceType!=x&&(r+="<presetName>Preset"+n.iPresetID+"</presetName>"),r+="</PTZPreset>";var s=new U,i={type:"PUT",url:o,auth:e.szAuth,data:r,success:null,error:null};y.extend(i,n),y.extend(i,{success:function(e){n.success&&n.success(e)},error:function(e,t){n.error&&n.error(e,t)}}),s.setRequestParam(i),s.submitRequest()},J.prototype.goPreset=function(e,t,n){var o=t.iChannelID;o=w(this.CGI.goPreset,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID,n.iPresetID);var r=new U,s={type:"PUT",url:o,auth:e.szAuth,success:null,error:null};y.extend(s,n),y.extend(s,{success:function(e){n.success&&n.success(e)},error:function(e,t){n.error&&n.error(e,t)}}),r.setRequestParam(s),r.submitRequest()},J.prototype.recordSearch=function(e,t){var n,o,i=t.iChannelID,a=t.iStreamType,c=t.szStartTime.replace(" ","T")+"Z",l=t.szEndTime.replace(" ","T")+"Z";n=w(this.CGI.recordSearch,e.szHttpProtocol,e.szIP,e.iCGIPort),o="<?xml version='1.0' encoding='UTF-8'?><CMSearchDescription><searchID>"+new r+"</searchID><trackList><trackID>"+(100*i+a)+"</trackID></trackList><timeSpanList><timeSpan><startTime>"+c+"</startTime><endTime>"+l+"</endTime></timeSpan></timeSpanList><maxResults>40</maxResults><searchResultPostion>"+t.iSearchPos+"</searchResultPostion><metadataList><metadataDescriptor>//metadata.psia.org/VideoMotion</metadataDescriptor></metadataList></CMSearchDescription>";var u=new U,d={type:"POST",url:n,auth:e.szAuth,data:o,success:null,error:null};y.extend(d,t),y.extend(d,{success:function(e){var n=[];n.push("<CMSearchResult>"),n.push("<responseStatus>"+s.$XML(e).find("responseStatus").eq(0).text()+"</responseStatus>"),n.push("<responseStatusStrg>"+s.$XML(e).find("responseStatusStrg").eq(0).text()+"</responseStatusStrg>"),n.push("<numOfMatches>"+s.$XML(e).find("numOfMatches").eq(0).text()+"</numOfMatches>"),n.push("<matchList>");for(var o=s.$XML(e).find("searchMatchItem",!0),r=0,i=o.length;i>r;r++){var a=o[r];n.push("<searchMatchItem>"),n.push("<trackID>"+s.$XML(a).find("trackID").eq(0).text()+"</trackID>"),n.push("<startTime>"+s.$XML(a).find("startTime").eq(0).text()+"</startTime>"),n.push("<endTime>"+s.$XML(a).find("endTime").eq(0).text()+"</endTime>"),n.push("<playbackURI>"+y.escape(s.$XML(a).find("playbackURI").eq(0).text())+"</playbackURI>"),n.push("<metadataDescriptor>"+s.$XML(a).find("metadataDescriptor").eq(0).text().split("/")[1]+"</metadataDescriptor>"),n.push("</searchMatchItem>")}n.push("</matchList>"),n.push("</CMSearchResult>"),e=y.loadXML(n.join("")),t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),u.setRequestParam(d),u.submitRequest()},J.prototype.startPlayback=function(e,t){var n=t.iWndIndex,o=t.szStartTime,r=t.szEndTime,s=e.szIP;"rtsp://"===t.urlProtocol&&(s=T(s));var i=w(t.cgi,t.urlProtocol,s,t.iPort,t.iChannelID,o,r),a=d.HWP_Play(i,e.szAuth,n,o,r);if(0==a){var c=new B;c.iIndex=n,c.szIP=e.szIP,c.iCGIPort=e.iCGIPort,c.szDeviceIdentify=e.szDeviceIdentify,c.iChannelID=t.iChannelID,c.iPlayStatus=2,P.push(c)}return a},J.prototype.reversePlayback=function(e,t){var n=t.iWndIndex,o=t.szStartTime,r=t.szEndTime,s=e.szIP;"rtsp://"===t.urlProtocol&&(s=T(s));var i=w(t.cgi,t.urlProtocol,s,t.iPort,t.iChannelID,o,r),a=d.HWP_ReversePlay(i,e.szAuth,n,o,r);if(0==a){var c=new B;c.iIndex=n,c.szIP=e.szIP,c.iCGIPort=e.iCGIPort,c.szDeviceIdentify=e.szDeviceIdentify,c.iChannelID=t.iChannelID,c.iPlayStatus=5,P.push(c)}return a},J.prototype.startDownloadRecord=function(e,t){var n=w(this.CGI.startDownloadRecord,e.szHttpProtocol,e.szIP,e.iCGIPort),o="<?xml version='1.0' encoding='UTF-8'?><downloadRequest><playbackURI> "+y.escape(t.szPlaybackURI)+"</playbackURI></downloadRequest>";return d.HWP_StartDownload(n,e.szAuth,t.szFileName,o,t.bDateDir)},J.prototype.exportDeviceConfig=function(e){var t=w(this.CGI.deviceConfig,e.szHttpProtocol,e.szIP,e.iCGIPort);return d.HWP_ExportDeviceConfig(t,e.szAuth,"",0)},J.prototype.importDeviceConfig=function(e,t){var n=w(this.CGI.deviceConfig,e.szHttpProtocol,e.szIP,e.iCGIPort);return d.HWP_ImportDeviceConfig(n,e.szAuth,t.szFileName,0)},J.prototype.restart=function(e,t){var n=w(this.CGI.restart,e.szHttpProtocol,e.szIP,e.iCGIPort),o=new U,r={type:"PUT",url:n,auth:e.szAuth,success:null,error:null};y.extend(r,t),y.extend(r,{success:function(e){t.success&&t.success(e)},error:function(e,n){t.error&&t.error(e,n)}}),o.setRequestParam(r),o.submitRequest()},J.prototype.restore=function(e,t,n){var o=w(this.CGI.restore,e.szHttpProtocol,e.szIP,e.iCGIPort,t),r=new U,s={type:"PUT",url:o,auth:e.szAuth,success:null,error:null};y.extend(s,n),y.extend(s,{success:function(e){n.success&&n.success(e)},error:function(e,t){n.error&&n.error(e,t)}}),r.setRequestParam(s),r.submitRequest()},J.prototype.startUpgrade=function(e,t){var n=w(this.CGI.startUpgrade.upgrade,e.szHttpProtocol,e.szIP,e.iCGIPort),o=w(this.CGI.startUpgrade.status,e.szHttpProtocol,e.szIP,e.iCGIPort);return d.HWP_StartUpgrade(n,o,e.szAuth,t.szFileName)},J.prototype.set3DZoom=function(e,t,n,o){var r=w(this.CGI.set3DZoom,e.szHttpProtocol,e.szIP,e.iCGIPort,t.iChannelID),s=new U,i={type:"PUT",url:r,data:n,auth:e.szAuth,success:null,error:null};y.extend(i,o),y.extend(i,{success:function(e){o.success&&o.success(e)},error:function(e,t){o.error&&o.error(e,t)}}),s.setRequestParam(i),s.submitRequest()},J.prototype.deviceCapturePic=function(e,t,n,o){t=100*t+1;var r=w(this.CGI.deviceCapture.channels,e.szHttpProtocol,e.szIP,e.iCGIPort,t),s=[];return y.isInt(o.iResolutionWidth)&&s.push("videoResolutionWidth="+o.iResolutionWidth),y.isInt(o.iResolutionHeight)&&s.push("videoResolutionHeight="+o.iResolutionHeight),s.length>0&&(r+="?"+s.join("&")),d.HWP_DeviceCapturePic(r,e.szAuth,n,o.bDateDir)};var K=function(){};K.prototype._alert=function(e){u.bDebugMode&&console.log(e)},function(e){var t=function(e){this.elems=[],this.length=0,this.length=this.elems.push(e)};t.prototype.find=function(e,t){var n=this.elems[this.length-1]?this.elems[this.length-1].getElementsByTagName(e):[];return this.length=this.elems.push(n),t?n:this},t.prototype.eq=function(e,t){var n=this.elems[this.length-1].length,o=null;return n>0&&n>e&&(o=this.elems[this.length-1][e]),this.length=this.elems.push(o),t?o:this},t.prototype.text=function(e){return this.elems[this.length-1]?e?void(o.DOMParser?this.elems[this.length-1].textContent=e:this.elems[this.length-1].text=e):o.DOMParser?this.elems[this.length-1].textContent:this.elems[this.length-1].text:""},t.prototype.attr=function(e){if(this.elems[this.length-1]){var t=this.elems[this.length-1].attributes.getNamedItem(e);return t?t.value:""}},e.$XML=function(e){return new t(e)}}(this);var Y=function(){};Y.prototype.extend=function(){for(var e,t=arguments[0]||{},n=1,o=arguments.length;o>n;n++)if(null!=(e=arguments[n]))for(var r in e){var s=(t[r],e[r]);t!==s&&("object"==typeof s?t[r]=this.extend({},s):void 0!==s&&(t[r]=s))}return t},Y.prototype.browser=function(){var e=navigator.userAgent.toLowerCase(),t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(safari)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||/(trident.*rv:)([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(e)||["unknow","0"];t.length>0&&t[1].indexOf("trident")>-1&&(t[1]="msie");var n={};return n[t[1]]=!0,n.version=t[2],n},Y.prototype.loadXML=function(e){if(null==e||""==e)return null;var t=null;o.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):window.ActiveXObject&&((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e));return t},Y.prototype.loadXML2=function(e){if(null==e||""==e)return null;var t=null;try{(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)}catch(n){try{t=(new DOMParser).parseFromString(e,"text/xml")}catch(e){return void alert(e.message)}}return t},Y.prototype.toXMLStr=function(e){var t="";try{t=(new XMLSerializer).serializeToString(e)}catch(n){try{t=e.xml}catch(e){return""}}return-1==t.indexOf("<?xml")&&(t="<?xml version='1.0' encoding='utf-8'?>"+t),t},Y.prototype.escape=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},Y.prototype.dateFormat=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t},Y.prototype.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,o,r,s,i,a,c="",l=0;for(e=Y.prototype.Base64._utf8_encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,s=(3&t)<<4|(n=e.charCodeAt(l++))>>4,i=(15&n)<<2|(o=e.charCodeAt(l++))>>6,a=63&o,isNaN(n)?i=a=64:isNaN(o)&&(a=64),c=c+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(i)+this._keyStr.charAt(a);return c},decode:function(e){var t,n,o,r,s,i,a="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(r=this._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&r)<<4|(s=this._keyStr.indexOf(e.charAt(c++)))>>2,o=(3&s)<<6|(i=this._keyStr.indexOf(e.charAt(c++))),a+=String.fromCharCode(t),64!=s&&(a+=String.fromCharCode(n)),64!=i&&(a+=String.fromCharCode(o));return Y.prototype.Base64._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);128>o?t+=String.fromCharCode(o):o>127&&2048>o?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},_utf8_decode:function(e){for(var t="",n=0,o=c1=c2=0;n<e.length;)128>(o=e.charCodeAt(n))?(t+=String.fromCharCode(o),n++):o>191&&224>o?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&o)<<12|(63&c2)<<6|63&c3),n+=3);return t}},Y.prototype.createEventScript=function(e,t,n){var o=document.createElement("script");o.htmlFor=e,o.event=t,o.innerHTML=n,document.body.parentNode.appendChild(o)},Y.prototype.isInt=function(e){return/^\d+$/.test(e)},Y.prototype.getDirName=function(){var e="";if(""!==u.szBasePath)e=u.szBasePath;else{var t=/[^?#]*\//,n=document.getElementById("videonode");if(n)e=n.src.match(t)[0];else{for(var o=document.scripts,r=0,s=o.length;s>r;r++)if(o[r].src.indexOf("webVideoCtrl.js")>-1){n=o[r];break}n&&(e=n.src.match(t)[0])}}return e},Y.prototype.loadScript=function(e,t){var n=document.createElement("script");n.type="text/javascript",n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)},Y.prototype.sha256=function(e){function t(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,t){return e>>>t|e<<32-t}return function(e){for(var t="",n=0;n<4*e.length;n++)t+="0123456789abcdef".charAt(e[n>>2]>>8*(3-n%4)+4&15)+"0123456789abcdef".charAt(e[n>>2]>>8*(3-n%4)&15);return t}(function(e,o){var r,s,i,a,c,l,u,d,p,f,h,P,I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],v=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],m=Array(64);for(e[o>>5]|=128<<24-o%32,e[15+(o+64>>9<<4)]=o,p=0;p<e.length;p+=16){for(r=v[0],s=v[1],i=v[2],a=v[3],c=v[4],l=v[5],u=v[6],d=v[7],f=0;64>f;f++)m[f]=16>f?e[f+p]:t(t(t(n(m[f-2],17)^n(m[f-2],19)^m[f-2]>>>10,m[f-7]),n(m[f-15],7)^n(m[f-15],18)^m[f-15]>>>3),m[f-16]),h=t(t(t(t(d,n(c,6)^n(c,11)^n(c,25)),c&l^~c&u),I[f]),m[f]),P=t(n(r,2)^n(r,13)^n(r,22),r&s^r&i^s&i),d=u,u=l,l=c,c=t(a,h),a=i,i=s,s=r,r=t(h,P);v[0]=t(r,v[0]),v[1]=t(s,v[1]),v[2]=t(i,v[2]),v[3]=t(a,v[3]),v[4]=t(c,v[4]),v[5]=t(l,v[5]),v[6]=t(u,v[6]),v[7]=t(d,v[7])}return v}(function(e){for(var t=[],n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<24-n%32;return t}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);128>o?t+=String.fromCharCode(o):(o>127&&2048>o?t+=String.fromCharCode(o>>6|192):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128)),t+=String.fromCharCode(63&o|128))}return t}(e)),8*e.length))},Y.prototype.cookie=function(e,t,n){if(arguments.length>1&&(null===t||"object"!=typeof t)){if(n=this.extend({},n),null===t&&(n.expires=-1),"number"==typeof n.expires){var o=n.expires,r=n.expires=new Date;r.setDate(r.getDate()+o)}return document.cookie=[encodeURIComponent(e),"=",n.raw?String(t):encodeURIComponent(String(t)),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"; path=/",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}var s,i=(n=t||{}).raw?function(e){return e}:decodeURIComponent;return(s=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie))?i(s[1]):null},r.prototype.valueOf=function(){return this.id},r.prototype.toString=function(){return this.id},r.prototype.createUUID=function(){var e=new Date(1582,10,15,0,0,0,0),t=(new Date).getTime()-e.getTime(),n="-";return r.getIntegerBits(t,0,31)+n+r.getIntegerBits(t,32,47)+n+(r.getIntegerBits(t,48,59)+"1")+n+r.getIntegerBits(r.rand(4095),0,7)+r.getIntegerBits(r.rand(4095),0,7)+n+(r.getIntegerBits(r.rand(8191),0,7)+r.getIntegerBits(r.rand(8191),8,15)+r.getIntegerBits(r.rand(8191),0,7)+r.getIntegerBits(r.rand(8191),8,15)+r.getIntegerBits(r.rand(8191),0,15))},r.getIntegerBits=function(e,t,n){var o=r.returnBase(e,16),s=new Array,i="",a=0;for(a=0;a<o.length;a++)s.push(o.substring(a,a+1));for(a=Math.floor(t/4);a<=Math.floor(n/4);a++)i+=s[a]&&""!=s[a]?s[a]:"0";return i},r.returnBase=function(e,t){var n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];if(t>e)var o=n[e];else{var r=""+Math.floor(e/t),s=e-r*t;if(r>=t)o=this.returnBase(r,t)+n[s];else o=n[r]+n[s]}return o},r.rand=function(e){return Math.floor(Math.random()*e)},v=new j,m=new J,I=new K;var Q=(y=new Y).dateFormat(new Date,"yyyyMMddhhmmss");return c="webVideoCtrl"+Q,l="webVideoCtrl"+Q,"object"!=typeof o.attachEvent&&y.browser().msie&&(y.createEventScript(c,"GetSelectWndInfo(SelectWndInfo)","GetSelectWndInfo(SelectWndInfo);"),y.createEventScript(c,"ZoomInfoCallback(szZoomInfo)","ZoomInfoCallback(szZoomInfo);"),y.createEventScript(c,"GetHttpInfo(lID, lpInfo, lReverse)","GetHttpInfo(lID, lpInfo, lReverse);"),y.createEventScript(c,"PluginEventHandler(iEventType, iParam1, iParam2)","PluginEventHandler(iEventType, iParam1, iParam2);"),y.createEventScript(c,"RemoteConfigInfo(lID)","RemoteConfigInfo(lID);"),y.createEventScript(c,"KeyBoardEventInfo(iKeyCode)","KeyBoardEventInfo(iKeyCode);")),this}(),s=o.WebVideoCtrl=r;s.version="1.1.0"}}(this),"object"==typeof t&&void 0!==e||(void 0===(o=function(){return WebVideoCtrl}.call(t,n,t,e))||(e.exports=o))},"o+bZ":function(e,t){},"uc/D":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("IN4q"),r=!1,s=0,i=-1,a=0,c=0,l=!1,u={name:"video-live",data:function(){return{visible:!1,maskClosable:!1,loading:!1,drawervisible:!1}},beforeCreate:function(){this.login=this.$form.createForm(this,{name:"login"}),this.localconfig=this.$form.createForm(this,{name:"localconfig"}),this.ipparse=this.$form.createForm(this,{name:"ipparse"})},mounted:function(){},methods:{showDrawer:function(){this.drawervisible=!0},hideDrawer:function(){this.drawervisible=!1},videoInitPlugin:function(){-1!==o.WebVideoCtrl.I_CheckPluginInstall()?this.initPlugin():alert("未安装 WebComponentsKits.exe 插件。")},initPlugin:function(){var e=this;o.WebVideoCtrl.I_InitPlugin(500,300,{bWndFull:!0,iWndowType:2,myCbSelWnd:function(t){var n=e.$x2js.xml2js(t),o="当前选择的窗口编号："+n.RealPlayInfo.SelectWnd;this.mySelectWnd=n.RealPlayInfo.SelectWnd,console.log(o)},cbInitPluginComplete:function(){o.WebVideoCtrl.I_InsertOBJECTPlugin("divPlugin"),-1!==o.WebVideoCtrl.I_CheckPluginVersion()||alert("检测到新的插件版本，双击开发包目录里的WebComponentsKit.exe升级！")}})},showOPInfo:function(e,t,n){var o="<div>"+dateFormat(new Date,"yyyy-MM-dd hh:mm:ss")+" "+e;if(void 0!==t&&200!=t){var r=$(n).find("statusString").eq(0).text(),s=$(n).find("subStatusCode").eq(0).text();o+=""===s?"("+t+", "+r+")":"("+t+", "+s+")"}o+="</div>",$("#opinfo").html(o+$("#opinfo").html())},showCBInfo:function(e){e="<div>"+dateFormat(new Date,"yyyy-MM-dd hh:mm:ss")+" "+e+"</div>",$("#cbinfo").html(e+$("#cbinfo").html())},dateFormat:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t},getWindowSize:function(){return{width:$(this).width()+$(this).scrollLeft(),height:$(this).height()+$(this).scrollTop()}},clickOpenFileDlg:function(e,t){var n=o.WebVideoCtrl.I_OpenFileDlg(t);-1!=n&&""!=n&&null!=n&&$("#"+e).val(n)},clickGetLocalCfg:function(){var e=o.WebVideoCtrl.I_GetLocalCfg();null!=e?($("#netsPreach").val($(e).find("BuffNumberType").eq(0).text()),$("#wndSize").val($(e).find("PlayWndType").eq(0).text()),$("#rulesInfo").val($(e).find("IVSMode").eq(0).text()),$("#captureFileFormat").val($(e).find("CaptureFileFormat").eq(0).text()),$("#packSize").val($(e).find("PackgeSize").eq(0).text()),$("#recordPath").val($(e).find("RecordPath").eq(0).text()),$("#downloadPath").val($(e).find("DownloadPath").eq(0).text()),$("#previewPicPath").val($(e).find("CapturePath").eq(0).text()),$("#playbackPicPath").val($(e).find("PlaybackPicPath").eq(0).text()),$("#devicePicPath").val($(e).find("DeviceCapturePath").eq(0).text()),$("#playbackFilePath").val($(e).find("PlaybackFilePath").eq(0).text()),$("#protocolType").val($(e).find("ProtocolType").eq(0).text()),showOPInfo("本地配置获取成功！")):showOPInfo("本地配置获取失败！")},clickSetLocalCfg:function(){var e=[],t="";e.push("<LocalConfigInfo>"),e.push("<PackgeSize>"+$("#packSize").val()+"</PackgeSize>"),e.push("<PlayWndType>"+$("#wndSize").val()+"</PlayWndType>"),e.push("<BuffNumberType>"+$("#netsPreach").val()+"</BuffNumberType>"),e.push("<RecordPath>"+$("#recordPath").val()+"</RecordPath>"),e.push("<CapturePath>"+$("#previewPicPath").val()+"</CapturePath>"),e.push("<PlaybackFilePath>"+$("#playbackFilePath").val()+"</PlaybackFilePath>"),e.push("<PlaybackPicPath>"+$("#playbackPicPath").val()+"</PlaybackPicPath>"),e.push("<DeviceCapturePath>"+$("#devicePicPath").val()+"</DeviceCapturePath>"),e.push("<DownloadPath>"+$("#downloadPath").val()+"</DownloadPath>"),e.push("<IVSMode>"+$("#rulesInfo").val()+"</IVSMode>"),e.push("<CaptureFileFormat>"+$("#captureFileFormat").val()+"</CaptureFileFormat>"),e.push("<ProtocolType>"+$("#protocolType").val()+"</ProtocolType>"),e.push("</LocalConfigInfo>"),t=0==o.WebVideoCtrl.I_SetLocalCfg(e.join(""))?"本地配置设置成功！":"本地配置设置失败！",showOPInfo(t)},changeWndNum:function(e){e=parseInt(e,10),o.WebVideoCtrl.I_ChangeWndNum(e)},showModal:function(){this.visible=!0},clickLogin:function(){var e=$("#loginip").val(),t=$("#port").val(),n=$("#username").val(),r=$("#password").val();if(""!=e&&""!=t){var s=e+"_"+t;-1==o.WebVideoCtrl.I_Login(e,1,t,n,r,{success:function(e){showOPInfo(s+" 登录成功！"),$("#ip").prepend("<option value='"+s+"'>"+s+"</option>"),setTimeout(function(){$("#ip").val(s),getChannelInfo(),getDevicePort()},10)},error:function(e,t){showOPInfo(s+" 登录失败！",e,t)}})&&showOPInfo(s+" 已登录过！")}},clickLogout:function(){var e=$("#ip").val(),t="";null!=e&&(0==o.WebVideoCtrl.I_Logout(e)?(t="退出成功！",$("#ip option[value='"+e+"']").remove(),getChannelInfo(),getDevicePort()):t="退出失败！",showOPInfo(e+" "+t))},clickGetDeviceInfo:function(){var e=$("#ip").val();null!=e&&o.WebVideoCtrl.I_GetDeviceInfo(e,{success:function(t){var n=[];n.push("设备名称："+$(t).find("deviceName").eq(0).text()+"\r\n"),n.push("设备ID："+$(t).find("deviceID").eq(0).text()+"\r\n"),n.push("型号："+$(t).find("model").eq(0).text()+"\r\n"),n.push("设备序列号："+$(t).find("serialNumber").eq(0).text()+"\r\n"),n.push("MAC地址："+$(t).find("macAddress").eq(0).text()+"\r\n"),n.push("主控版本："+$(t).find("firmwareVersion").eq(0).text()+" "+$(t).find("firmwareReleasedDate").eq(0).text()+"\r\n"),n.push("编码版本："+$(t).find("encoderVersion").eq(0).text()+" "+$(t).find("encoderReleasedDate").eq(0).text()+"\r\n"),showOPInfo(e+" 获取设备信息成功！"),alert(n.join(""))},error:function(t,n){showOPInfo(e+" 获取设备信息失败！",t,n)}})},getChannelInfo:function(){var e=$("#ip").val(),t=$("#channels").empty();null!=e&&(o.WebVideoCtrl.I_GetAnalogChannelInfo(e,{async:!1,success:function(n){var o=$(n).find("VideoInputChannel");$.each(o,function(e){var n=$(this).find("id").eq(0).text(),o=$(this).find("name").eq(0).text();""==o&&(o="Camera "+(e<9?"0"+(e+1):e+1)),t.append("<option value='"+n+"' bZero='false'>"+o+"</option>")}),showOPInfo(e+" 获取模拟通道成功！")},error:function(t,n){showOPInfo(e+" 获取模拟通道失败！",t,n)}}),o.WebVideoCtrl.I_GetDigitalChannelInfo(e,{async:!1,success:function(n){var o=$(n).find("InputProxyChannelStatus");$.each(o,function(e){var n=$(this).find("id").eq(0).text(),o=$(this).find("name").eq(0).text();if("false"==$(this).find("online").eq(0).text())return!0;""==o&&(o="IPCamera "+(e<9?"0"+(e+1):e+1)),t.append("<option value='"+n+"' bZero='false'>"+o+"</option>")}),showOPInfo(e+" 获取数字通道成功！")},error:function(t,n){showOPInfo(e+" 获取数字通道失败！",t,n)}}),o.WebVideoCtrl.I_GetZeroChannelInfo(e,{async:!1,success:function(n){var o=$(n).find("ZeroVideoChannel");$.each(o,function(e){var n=$(this).find("id").eq(0).text(),o=$(this).find("name").eq(0).text();""==o&&(o="Zero Channel "+(e<9?"0"+(e+1):e+1)),"true"==$(this).find("enabled").eq(0).text()&&t.append("<option value='"+n+"' bZero='true'>"+o+"</option>")}),showOPInfo(e+" 获取零通道成功！")},error:function(t,n){showOPInfo(e+" 获取零通道失败！",t,n)}}))},getDevicePort:function(){var e=$("#ip").val();if(null!=e){var t=o.WebVideoCtrl.I_GetDevicePort(e);null!=t?($("#deviceport").val(t.iDevicePort),$("#rtspport").val(t.iRtspPort),showOPInfo(e+" 获取端口成功！")):showOPInfo(e+" 获取端口失败！")}},clickGetDigitalChannelInfo:function(){var e=$("#ip").val(),t=0;$("#digitalchannellist").empty(),null!=e&&(o.WebVideoCtrl.I_GetAnalogChannelInfo(e,{async:!1,success:function(e){t=$(e).find("VideoInputChannel").length},error:function(){}}),o.WebVideoCtrl.I_GetDigitalChannelInfo(e,{async:!1,success:function(n){var o=$(n).find("InputProxyChannelStatus");$.each(o,function(){var e=parseInt($(this).find("id").eq(0).text(),10),n=$(this).find("ipAddress").eq(0).text(),o=$(this).find("srcInputPort").eq(0).text(),r=$(this).find("managePortNo").eq(0).text(),s=$(this).find("online").eq(0).text(),i=$(this).find("proxyProtocol").eq(0).text(),a=$("#digitalchannellist").get(0).insertRow(-1),c=a.insertCell(0);c.innerHTML=e-t<10?"D0"+(e-t):"D"+(e-t),(c=a.insertCell(1)).width="25%",c.innerHTML=n,(c=a.insertCell(2)).width="15%",c.innerHTML=o,(c=a.insertCell(3)).width="20%",c.innerHTML=r,(c=a.insertCell(4)).width="15%",c.innerHTML="true"==s?"在线":"离线",(c=a.insertCell(5)).width="25%",c.innerHTML=i}),showOPInfo(e+" 获取数字通道成功！")},error:function(t,n){showOPInfo(e+" 没有数字通道！",t,n)}}))},clickStartRealPlay:function(e){var t=o.WebVideoCtrl.I_GetWindowStatus(0),n=$("#ip").val(),r=parseInt($("#rtspport").val(),10),s=parseInt($("#channels").val(),10),i="true"==$("#channels option").eq($("#channels").get(0).selectedIndex).attr("bZero"),a="";if(void 0===e&&(e=parseInt($("#streamtype").val(),10)),null!=n){var c=function(){o.WebVideoCtrl.I_StartRealPlay(n,{iRtspPort:r,iStreamType:e,iChannelID:s,bZeroChannel:i,success:function(){a="开始预览成功！",showOPInfo(n+" "+a)},error:function(e,t){a=403===e?"设备不支持Websocket取流！":"开始预览失败！",showOPInfo(n+" "+a)}})};null!=t?o.WebVideoCtrl.I_Stop({success:function(){c()}}):c()}},clickStopRealPlay:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&o.WebVideoCtrl.I_Stop({success:function(){t="停止预览成功！",showOPInfo(e.szDeviceIdentify+" "+t)},error:function(){t="停止预览失败！",showOPInfo(e.szDeviceIdentify+" "+t)}})},clickOpenSound:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";if(null!=e){for(var n=o.WebVideoCtrl.I_GetWindowStatus(),r=0,s=n.length;r<s;r++)if((e=n[r]).bSound){o.WebVideoCtrl.I_CloseSound(e.iIndex);break}t=0==o.WebVideoCtrl.I_OpenSound()?"打开声音成功！":"打开声音失败！",showOPInfo(e.szDeviceIdentify+" "+t)}},clickCloseSound:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&(t=0==o.WebVideoCtrl.I_CloseSound()?"关闭声音成功！":"关闭声音失败！",showOPInfo(e.szDeviceIdentify+" "+t))},clickSetVolume:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t=parseInt($("#volume").val(),10),n="";null!=e&&(n=0==o.WebVideoCtrl.I_SetVolume(t)?"音量设置成功！":"音量设置失败！",showOPInfo(e.szDeviceIdentify+" "+n))},clickCapturePic:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";if(null!=e){var n=o.WebVideoCtrl.I_GetLocalCfg(),r="0";null!=n&&(r=$(n).find("CaptureFileFormat").eq(0).text());var s=$("#channels").val(),i=e.szDeviceIdentify+"_"+s+"_"+(new Date).getTime();i+="0"===r?".jpg":".bmp",t=0==o.WebVideoCtrl.I_CapturePic(i,{bDateDir:!0})?"抓图成功！":"抓图失败！",showOPInfo(e.szDeviceIdentify+" "+t)}},clickStartRecord:function(e){var t=o.WebVideoCtrl.I_GetWindowStatus(0),n="";if(e,null!=t){var r=$("#channels").val(),s=t.szDeviceIdentify+"_"+r+"_"+(new Date).getTime();o.WebVideoCtrl.I_StartRecord(s,{bDateDir:!0,success:function(){"realplay"===e?n="开始录像成功！":"playback"===e&&(n="开始剪辑成功！"),showOPInfo(t.szDeviceIdentify+" "+n)},error:function(){"realplay"===e?n="开始录像失败！":"playback"===e&&(n="开始剪辑失败！"),showOPInfo(t.szDeviceIdentify+" "+n)}})}},clickStopRecord:function(e,t){void 0===t&&(t=0);var n=o.WebVideoCtrl.I_GetWindowStatus(t),r="";null!=n&&o.WebVideoCtrl.I_StopRecord({success:function(){"realplay"===e?r="停止录像成功！":"playback"===e&&(r="停止剪辑成功！"),showOPInfo(n.szDeviceIdentify+" "+r)},error:function(){"realplay"===e?r="停止录像失败！":"playback"===e&&(r="停止剪辑失败！"),showOPInfo(n.szDeviceIdentify+" "+r)}})},clickGetAudioInfo:function(){var e=$("#ip").val();null!=e&&o.WebVideoCtrl.I_GetAudioInfo(e,{success:function(t){var n=$(t).find("TwoWayAudioChannel"),o=$("#audiochannels").empty();$.each(n,function(){var e=$(this).find("id").eq(0).text();o.append("<option value='"+e+"'>"+e+"</option>")}),showOPInfo(e+" 获取对讲通道成功！")},error:function(t,n){showOPInfo(e+" 获取对讲通道失败！",t,n)}})},clickStartVoiceTalk:function(){var e=$("#ip").val(),t=parseInt($("#audiochannels").val(),10),n="";null!=e&&(isNaN(t)?alert("请选择对讲通道！"):(n=0==o.WebVideoCtrl.I_StartVoiceTalk(e,t)?"开始对讲成功！":"开始对讲失败！",showOPInfo(e+" "+n)))},clickStopVoiceTalk:function(){var e=$("#ip").val(),t=o.WebVideoCtrl.I_StopVoiceTalk(),n="";null!=e&&(n=0==t?"停止对讲成功！":"停止对讲失败！",showOPInfo(e+" "+n))},clickEnableEZoom:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&(t=0==o.WebVideoCtrl.I_EnableEZoom()?"启用电子放大成功！":"启用电子放大失败！",showOPInfo(e.szDeviceIdentify+" "+t))},clickDisableEZoom:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&(t=0==o.WebVideoCtrl.I_DisableEZoom()?"禁用电子放大成功！":"禁用电子放大失败！",showOPInfo(e.szDeviceIdentify+" "+t))},clickEnable3DZoom:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&(t=0==o.WebVideoCtrl.I_Enable3DZoom()?"启用3D放大成功！":"启用3D放大失败！",showOPInfo(e.szDeviceIdentify+" "+t))},clickDisable3DZoom:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&(t=0==o.WebVideoCtrl.I_Disable3DZoom()?"禁用3D放大成功！":"禁用3D放大失败！",showOPInfo(e.szDeviceIdentify+" "+t))},clickFullScreen:function(){o.WebVideoCtrl.I_FullScreen(!0)},mouseDownPTZControl:function(e){var t=o.WebVideoCtrl.I_GetWindowStatus(0),n="true"==$("#channels option").eq($("#channels").get(0).selectedIndex).attr("bZero"),s=$("#ptzspeed").val();n||null!=t&&(9==e&&r?s=0:r=!1,o.WebVideoCtrl.I_PTZControl(e,!1,{iPTZSpeed:s,success:function(n){9==e&&r?showOPInfo(t.szDeviceIdentify+" 停止云台成功！"):showOPInfo(t.szDeviceIdentify+" 开启云台成功！"),9==e&&(r=!r)},error:function(e,n){showOPInfo(t.szDeviceIdentify+" 开启云台失败！",e,n)}}))},mouseUpPTZControl:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(1,!0,{success:function(t){showOPInfo(e.szDeviceIdentify+" 停止云台成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+" 停止云台失败！",t,n)}})},clickSetPreset:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t=parseInt($("#preset").val(),10);null!=e&&o.WebVideoCtrl.I_SetPreset(t,{success:function(t){showOPInfo(e.szDeviceIdentify+" 设置预置点成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+" 设置预置点失败！",t,n)}})},clickGoPreset:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t=parseInt($("#preset").val(),10);null!=e&&o.WebVideoCtrl.I_GoPreset(t,{success:function(t){showOPInfo(e.szDeviceIdentify+" 调用预置点成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+" 调用预置点失败！",t,n)}})},clickRecordSearch:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=$("#ip").val(),n=parseInt($("#channels").val(),10),r="true"==$("#channels option").eq($("#channels").get(0).selectedIndex).attr("bZero"),i=parseInt($("#record_streamtype").val(),10),a=$("#starttime").val(),c=$("#endtime").val();null!=t&&(r||(0==e&&($("#searchlist").empty(),s=0),o.WebVideoCtrl.I_RecordSearch(t,n,a,c,{iStreamType:i,iSearchPos:40*s,success:function(e){if("MORE"===$(e).find("responseStatusStrg").eq(0).text()){for(var n=0,o=$(e).find("searchMatchItem").length;n<o;n++){if((l=$(e).find("playbackURI").eq(n).text()).indexOf("name=")<0)break;var r=$(e).find("startTime").eq(n).text(),i=$(e).find("endTime").eq(n).text(),a=l.substring(l.indexOf("name=")+5,l.indexOf("&size="));(d=(u=$("#searchlist").get(0).insertRow(-1)).insertCell(0)).id="downloadTd"+n,d.innerHTML=40*s+(n+1),(d=u.insertCell(1)).width="30%",d.innerHTML=a,(d=u.insertCell(2)).width="30%",d.innerHTML=r.replace("T"," ").replace("Z",""),(d=u.insertCell(3)).width="30%",d.innerHTML=i.replace("T"," ").replace("Z",""),(d=u.insertCell(4)).width="10%",d.innerHTML="<a href='javascript:;' onclick='clickStartDownloadRecord("+(n+40*s)+");'>下载</a>",$("#downloadTd"+(n+40*s)).data("fileName",a),$("#downloadTd"+(n+40*s)).data("playbackURI",l)}s++,clickRecordSearch(1)}else if("OK"===$(e).find("responseStatusStrg").eq(0).text()){var c=$(e).find("searchMatchItem").length;for(n=0;n<c;n++){var l;if((l=$(e).find("playbackURI").eq(n).text()).indexOf("name=")<0)break;var u,d;r=$(e).find("startTime").eq(n).text(),i=$(e).find("endTime").eq(n).text(),a=l.substring(l.indexOf("name=")+5,l.indexOf("&size="));(d=(u=$("#searchlist").get(0).insertRow(-1)).insertCell(0)).id="downloadTd"+n,d.innerHTML=40*s+(n+1),(d=u.insertCell(1)).width="30%",d.innerHTML=a,(d=u.insertCell(2)).width="30%",d.innerHTML=r.replace("T"," ").replace("Z",""),(d=u.insertCell(3)).width="30%",d.innerHTML=i.replace("T"," ").replace("Z",""),(d=u.insertCell(4)).width="10%",d.innerHTML="<a href='javascript:;' onclick='clickStartDownloadRecord("+(n+40*s)+");'>下载</a>",$("#downloadTd"+(n+40*s)).data("fileName",a),$("#downloadTd"+(n+40*s)).data("playbackURI",l)}showOPInfo(t+" 搜索录像文件成功！")}else"NO MATCHES"===$(e).find("responseStatusStrg").eq(0).text()&&setTimeout(function(){showOPInfo(t+" 没有录像文件！")},50)},error:function(e,n){showOPInfo(t+" 搜索录像文件失败！",e,n)}})))}),clickStartPlayback:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t=$("#ip").val(),n=parseInt($("#rtspport").val(),10),r=parseInt($("#record_streamtype").val(),10),s="true"==$("#channels option").eq($("#channels").get(0).selectedIndex).attr("bZero"),i=parseInt($("#channels").val(),10),a=$("#starttime").val(),c=$("#endtime").val(),l="",u=$("#transstream").prop("checked");if(null!=t&&!s){var d=function(){if(u){o.WebVideoCtrl.I_StartPlayback(t,{iRtspPort:n,iStreamType:r,iChannelID:i,szStartTime:a,szEndTime:c,oTransCodeParam:{TransFrameRate:"14",TransResolution:"1",TransBitrate:"19"},success:function(){l="开始回放成功！",showOPInfo(t+" "+l)},error:function(e,n){l=403===e?"设备不支持Websocket取流！":"开始回放失败！",showOPInfo(t+" "+l)}})}else o.WebVideoCtrl.I_StartPlayback(t,{iRtspPort:n,iStreamType:r,iChannelID:i,szStartTime:a,szEndTime:c,success:function(){l="开始回放成功！",showOPInfo(t+" "+l)},error:function(e,n){l=403===e?"设备不支持Websocket取流！":"开始回放失败！",showOPInfo(t+" "+l)}})};null!=e?o.WebVideoCtrl.I_Stop({success:function(){d()}}):d()}},clickStopPlayback:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&o.WebVideoCtrl.I_Stop({success:function(){t="停止回放成功！",showOPInfo(e.szDeviceIdentify+" "+t)},error:function(){t="停止回放失败！",showOPInfo(e.szDeviceIdentify+" "+t)}})},clickReversePlayback:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t=$("#ip").val(),n=parseInt($("#rtspport").val(),10),r=parseInt($("#record_streamtype").val(),10),s="true"==$("#channels option").eq($("#channels").get(0).selectedIndex).attr("bZero"),i=parseInt($("#channels").val(),10),a=$("#starttime").val(),c=$("#endtime").val(),l="";if(null!=t&&!s){var u=function(){var e=o.WebVideoCtrl.I_ReversePlayback(t,{iRtspPort:n,iStreamType:r,iChannelID:i,szStartTime:a,szEndTime:c});l=0==e?"开始倒放成功！":"开始倒放失败！",showOPInfo(t+" "+l)};null!=e?o.WebVideoCtrl.I_Stop({success:function(){u()}}):u()}},clickFrame:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&o.WebVideoCtrl.I_Frame({success:function(){t="单帧播放成功！",showOPInfo(e.szDeviceIdentify+" "+t)},error:function(){t="单帧播放失败！",showOPInfo(e.szDeviceIdentify+" "+t)}})},clickPause:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&o.WebVideoCtrl.I_Pause({success:function(){t="暂停成功！",showOPInfo(e.szDeviceIdentify+" "+t)},error:function(){t="暂停失败！",showOPInfo(e.szDeviceIdentify+" "+t)}})},clickResume:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&o.WebVideoCtrl.I_Resume({success:function(){t="恢复成功！",showOPInfo(e.szDeviceIdentify+" "+t)},error:function(){t="恢复失败！",showOPInfo(e.szDeviceIdentify+" "+t)}})},clickPlaySlow:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&o.WebVideoCtrl.I_PlaySlow({success:function(){t="慢放成功！",showOPInfo(e.szDeviceIdentify+" "+t)},error:function(){t="慢放失败！",showOPInfo(e.szDeviceIdentify+" "+t)}})},clickPlayFast:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0),t="";null!=e&&o.WebVideoCtrl.I_PlayFast({success:function(){t="快放成功！",showOPInfo(e.szDeviceIdentify+" "+t)},error:function(){t="快放失败！",showOPInfo(e.szDeviceIdentify+" "+t)}})},clickGetOSDTime:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);if(null!=e)o.WebVideoCtrl.I_GetOSDTime({success:function(t){$("#osdtime").val(t),showOPInfo(e.szDeviceIdentify+" 获取OSD时间成功！")},error:function(){showOPInfo(e.szDeviceIdentify+" 获取OSD时间失败！")}})},clickStartDownloadRecord:function(e){var t=$("#ip").val(),n=($("#channels").val(),$("#downloadTd"+e).data("fileName")),r=$("#downloadTd"+e).data("playbackURI");if(null!=t)if((i=o.WebVideoCtrl.I_StartDownloadRecord(t,r,n,{bDateDir:!0}))<0){var s=o.WebVideoCtrl.I_GetLastError();34==s?showOPInfo(t+" 已下载！"):33==s?showOPInfo(t+" 空间不足！"):showOPInfo(t+" 下载失败！")}else $("<div id='downProcess' class='freeze'></div>").appendTo("body"),a=setInterval("downProcess("+e+")",1e3)},downProcess:function(){if(0==o.WebVideoCtrl.I_GetDownloadStatus(i)){$("#downProcess").css({width:$("#searchlist").width()+"px",height:"100px",lineHeight:"100px",left:$("#searchdiv").offset().left+"px",top:$("#searchdiv").offset().top+"px"});var e=o.WebVideoCtrl.I_GetDownloadProgress(i);e<0?(clearInterval(a),a=0,i=-1):e<100?$("#downProcess").text(e+"%"):($("#downProcess").text("100%"),setTimeout(function(){$("#downProcess").remove()},1e3),o.WebVideoCtrl.I_StopDownloadRecord(i),showOPInfo("录像下载完成！"),clearInterval(a),a=0,i=-1)}else o.WebVideoCtrl.I_StopDownloadRecord(i),clearInterval(a),a=0,i=-1},clickExportDeviceConfig:function(){var e=$("#ip").val(),t="";null!=e&&(t=0==o.WebVideoCtrl.I_ExportDeviceConfig(e)?"导出配置文件成功！":"导出配置文件失败！",showOPInfo(e+" "+t))},clickImportDeviceConfig:function(){var e=$("#ip").val(),t=$("#configFile").val();null!=e&&(""!=t?0==o.WebVideoCtrl.I_ImportDeviceConfig(e,t)?o.WebVideoCtrl.I_Restart(e,{success:function(t){$("<div id='restartDiv' class='freeze'>重启中...</div>").appendTo("body");var n=getWindowSize();$("#restartDiv").css({width:n.width+"px",height:n.height+"px",lineHeight:n.height+"px",left:0,top:0}),setTimeout("reconnect('"+e+"')",2e4)},error:function(t,n){showOPInfo(e+" 重启失败！",t,n)}}):showOPInfo(e+" 导入失败！"):alert("请选择配置文件！"))},reconnect:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){o.WebVideoCtrl.I_Reconnect(e,{success:function(e){$("#restartDiv").remove()},error:function(t,n){401==t?($("#restartDiv").remove(),clickLogout()):setTimeout(function(){reconnect(e)},5e3)}})}),clickStartUpgrade:function(e){e=$("#ip").val();var t=$("#upgradeFile").val();null!=e&&(""!=t?0==o.WebVideoCtrl.I_StartUpgrade(e,t)?c=setInterval("getUpgradeStatus('"+e+"')",1e3):showOPInfo(e+" 升级失败！"):alert("请选择升级文件！"))},getUpgradeStatus:function(e){var t=o.WebVideoCtrl.I_UpgradeStatus();if(0==t){var n=o.WebVideoCtrl.I_UpgradeProgress();if(n<0)return clearInterval(c),c=0,void showOPInfo(e+" 获取进度失败！");if(n<100){if(0==$("#restartDiv").length){$("<div id='restartDiv' class='freeze'></div>").appendTo("body");var r=getWindowSize();$("#restartDiv").css({width:r.width+"px",height:r.height+"px",lineHeight:r.height+"px",left:0,top:0})}$("#restartDiv").text(n+"%")}else o.WebVideoCtrl.I_StopUpgrade(),clearInterval(c),c=0,$("#restartDiv").remove(),o.WebVideoCtrl.I_Restart(e,{success:function(t){$("<div id='restartDiv' class='freeze'>重启中...</div>").appendTo("body");var n=getWindowSize();$("#restartDiv").css({width:n.width+"px",height:n.height+"px",lineHeight:n.height+"px",left:0,top:0}),setTimeout("reconnect('"+e+"')",2e4)},error:function(t,n){showOPInfo(e+" 重启失败！",t,n)}})}else 1==t?(o.WebVideoCtrl.I_StopUpgrade(),showOPInfo(e+" 升级失败！"),clearInterval(c),c=0):2==t?(mWebVideoCtrl.I_StopUpgrade(),showOPInfo(e+" 语言不匹配！"),clearInterval(c),c=0):(mWebVideoCtrl.I_StopUpgrade(),showOPInfo(e+" 获取状态失败！"),clearInterval(c),c=0)},clickCheckPluginVersion:function(){0==o.WebVideoCtrl.I_CheckPluginVersion()?alert("您的插件版本已经是最新的！"):alert("检测到新的插件版本！")},clickRemoteConfig:function(){var e=$("#ip").val(),t=parseInt($("#deviceport").val(),10)||"",n="";null!=e&&(n=-1==o.WebVideoCtrl.I_RemoteConfig(e,{iDevicePort:t,iLan:1})?"调用远程配置库失败！":"调用远程配置库成功！",showOPInfo(e+" "+n))},clickRestoreDefault:function(){var e=$("#ip").val();o.WebVideoCtrl.I_RestoreDefault(e,"basic",{timeout:3e4,success:function(t){$("#restartDiv").remove(),showOPInfo(e+" 恢复默认参数成功！"),o.WebVideoCtrl.I_Restart(e,{success:function(t){$("<div id='restartDiv' class='freeze'>重启中...</div>").appendTo("body");var n=getWindowSize();$("#restartDiv").css({width:n.width+"px",height:n.height+"px",lineHeight:n.height+"px",left:0,top:0}),setTimeout("reconnect('"+e+"')",2e4)},error:function(t,n){showOPInfo(e+" 重启失败！",t,n)}})},error:function(t,n){showOPInfo(e+" 恢复默认参数失败！",t,n)}})},PTZZoomIn:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(10,!1,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 调焦+成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  调焦+失败！",t,n)}})},PTZZoomout:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(11,!1,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 调焦-成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  调焦-失败！",t,n)}})},PTZZoomStop:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(11,!0,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 调焦停止成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  调焦停止失败！",t,n)}})},PTZFocusIn:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(12,!1,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 聚焦+成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  聚焦+失败！",t,n)}})},PTZFoucusOut:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(13,!1,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 聚焦-成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  聚焦-失败！",t,n)}})},PTZFoucusStop:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(12,!0,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 聚焦停止成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  聚焦停止失败！",t,n)}})},PTZIrisIn:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(14,!1,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 光圈+成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  光圈+失败！",t,n)}})},PTZIrisOut:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(15,!1,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 光圈-成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  光圈-失败！",t,n)}})},PTZIrisStop:function(){var e=o.WebVideoCtrl.I_GetWindowStatus(0);null!=e&&o.WebVideoCtrl.I_PTZControl(14,!0,{iWndIndex:0,success:function(t){showOPInfo(e.szDeviceIdentify+" 光圈停止成功！")},error:function(t,n){showOPInfo(e.szDeviceIdentify+"  光圈停止失败！",t,n)}})},changeIPMode:function(e){$("#serverport").val([0,7071,80][e])},clickGetDeviceIP:function(){var e=parseInt($("#devicemode").val(),10),t=$("#serveraddress").val(),n=parseInt($("#serverport").val(),10)||0,r=$("#deviceid").val(),s="";if(""==(s=o.WebVideoCtrl.I_GetIPInfoByMode(e,t,n,r)))showOPInfo("设备IP和端口解析失败！");else{showOPInfo("设备IP和端口解析成功！");var i=s.split("-");$("#loginip").val(i[0]),$("#deviceport").val(i[1])}},clickEnableDraw:function(){0===o.WebVideoCtrl.I_SetPlayModeType(6)?(l=!0,showOPInfo("启用绘制成功！")):showOPInfo("启用绘制失败！")},clickDisableDraw:function(){0===o.WebVideoCtrl.I_SetPlayModeType(0)?(l=!1,showOPInfo("禁用绘制成功！")):showOPInfo("禁用绘制失败！")},clickAddSnapPolygon:function(){if(l){var e=$("#snapId").val(),t="<?xml version='1.0' encoding='utf-8'?>";t+="<SnapPolygonList>",t+="<SnapPolygon>",t+="<id>"+e+"</id>",t+="<polygonType>1</polygonType>",t+="<PointNumMax>17</PointNumMax>",t+="<MinClosed>4</MinClosed>",t+="<tips>#"+e+"#"+encodeString($("#snapName").val())+"</tips>",t+="<isClosed>false</isClosed>",t+="<color><r>0</r><g>255</g><b>0</b></color>",t+="<pointList/>",t+="</SnapPolygon>",t+="</SnapPolygonList>";var n=o.WebVideoCtrl.I_SetSnapPolygonInfo(0,t);0===n?showOPInfo("窗口0添加图形成功！"):-1===n?showOPInfo("窗口0添加图形失败！"):-2===n?alert("参数错误！"):-3===n?alert("图形个数达到上限！"):-4===n&&alert("图形ID已存在！"),o.WebVideoCtrl.I_SetSnapDrawMode(0,2)}},clickDelSnapPolygon:function(){if(l){var e=$("#snapId").val(),t=getSnapPolygon(e);if(-1!=t){var n=getSnapPolygon();$(n).find("SnapPolygon").eq(t).remove();var r=toXMLStr(n);o.WebVideoCtrl.I_ClearSnapInfo(0),o.WebVideoCtrl.I_SetSnapPolygonInfo(0,r),o.WebVideoCtrl.I_SetSnapDrawMode(0,3)}else alert("图形ID不存在！")}},clickEditSnapPolygon:function(){l&&(0===o.WebVideoCtrl.I_SetSnapDrawMode(0,3)?showOPInfo("窗口0编辑图形成功！"):showOPInfo("窗口0编辑图形失败！"))},clickStopSnapPolygon:function(){l&&(0===o.WebVideoCtrl.I_SetSnapDrawMode(0,-1)?showOPInfo("窗口0停止编辑成功！"):showOPInfo("窗口0停止编辑失败！"))},getSnapPolygon:function(e){var t=o.WebVideoCtrl.I_GetSnapPolygonInfo(0),n=loadXML(t);if(void 0===e)return n;var r=-1,s=$(n).find("SnapPolygon");return s.length>0&&$.each(s,function(t){if($(this).find("id").text()===e)return r=t,!1}),r},clickGetSnapPolygon:function(){if(l){var e=o.WebVideoCtrl.I_GetSnapPolygonInfo(0);alert(e)}},clickSetSnapPolygon:function(){if(l){o.WebVideoCtrl.I_ClearSnapInfo(0);var e="<?xml version='1.0' encoding='utf-8'?>";e+="<SnapPolygonList>",e+="<SnapPolygon>",e+="<id>1</id>",e+="<polygonType>1</polygonType>",e+="<tips>#1#设置1</tips>",e+="<isClosed>true</isClosed>",e+="<color><r>0</r><g>255</g><b>0</b></color>",e+="<pointList>",e+="<point><x>0.737903</x><y>0.229730</y></point>",e+="<point><x>0.947581</x><y>0.804054</y></point>",e+="<point><x>0.362903</x><y>0.777027</y></point>",e+="</pointList>",e+="</SnapPolygon>",e+="<SnapPolygon>",e+="<id>2</id>",e+="<polygonType>1</polygonType>",e+="<tips>#2#设置2</tips>",e+="<isClosed>true</isClosed>",e+="<color><r>0</r><g>255</g><b>0</b></color>",e+="<pointList>",e+="<point><x>0.451613</x><y>0.216216</y></point>",e+="<point><x>0.447581</x><y>0.729730</y></point>",e+="<point><x>0.116935</x><y>0.554054</y></point>",e+="</pointList>",e+="</SnapPolygon>",e+="</SnapPolygonList>";var t=o.WebVideoCtrl.I_SetSnapPolygonInfo(0,e);0===t?showOPInfo("窗口0设置图形成功！"):-1===t?showOPInfo("窗口0设置图形失败！"):-2===t?alert("参数错误！"):-3===t?alert("图形个数达到上限！"):-4===t&&alert("图形ID已存在！")}},clickDelAllSnapPolygon:function(){l&&(0===o.WebVideoCtrl.I_ClearSnapInfo(0)?showOPInfo("窗口0清空图形成功！"):showOPInfo("窗口0清空图形失败！"))},clickDeviceCapturePic:function(){var e="",t=$("#ip").val(),n="true"==$("#channels option").eq($("#channels").get(0).selectedIndex).attr("bZero"),r=parseInt($("#channels").val(),10),s=parseInt($("#resolutionWidth").val(),10),i=parseInt($("#resolutionHeight").val(),10);if(null!=t&&!n){var a=t+"_"+r+"_"+(new Date).getTime();e=0==o.WebVideoCtrl.I_DeviceCapturePic(t,r,a,{bDateDir:!0,iResolutionWidth:s,iResolutionHeight:i})?"设备抓图成功！":"设备抓图失败！",showOPInfo(t+" "+e)}},loadXML:function(e){if(null==e||""==e)return null;var t=null;window.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e));return t},toXMLStr:function(e){var t="";try{t=(new XMLSerializer).serializeToString(e)}catch(n){try{t=e.xml}catch(e){return""}}return-1==t.indexOf("<?xml")&&(t="<?xml version='1.0' encoding='utf-8'?>"+t),t},encodeString:function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-live"},[n("a-modal",{staticStyle:{top:"160px"},attrs:{title:"登录",visible:e.visible,maskClosable:e.maskClosable}},[n("template",{slot:"footer"},[n("a-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.clickLogin}},[e._v("\n        确认\n      ")]),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:e.clickLogout}},[e._v("\n        取消\n      ")]),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:e.clickGetDeviceInfo}},[e._v("\n        获取基本信息\n      ")])],1),e._v(" "),n("div",[n("a-form",{staticClass:"login",attrs:{id:"login",form:e.login},on:{submit:e.clickLogin}},[n("a-form-item",{attrs:{label:"用户名","label-col":{span:8},"wrapper-col":{span:12}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入用户名"}]}],expression:"[\n        'username',\n        { rules: [{ required: true, message: '请输入用户名' }] },\n      ]"}],attrs:{placeholder:"username"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"密码","label-col":{span:8},"wrapper-col":{span:12}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"}]}],expression:"[\n        'password',\n        { rules: [{ required: true, message: '请输入密码' }] },\n      ]"}],attrs:{type:"password",placeholder:"password"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"IP地址","label-col":{span:8},"wrapper-col":{span:12}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginip",{rules:[{required:!0,message:"请输入IP地址"}]}],expression:"[\n        'loginip',\n        { rules: [{ required: true, message: '请输入IP地址' }] },\n      ]"}],attrs:{placeholder:"loginip"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"端口号","label-col":{span:8},"wrapper-col":{span:12}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["port",{rules:[{required:!0,message:"请输入端口号"}]}],expression:"[\n        'port',\n        { rules: [{ required: true, message: '请输入端口号' }] },\n      ]"}],attrs:{placeholder:"port"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"设备端口","label-col":{span:8},"wrapper-col":{span:12}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deviceport",{rules:[{required:!0,message:"请输入设备端口"}]}],expression:"[\n        'deviceport',\n        { rules: [{ required: true, message: '请输入设备端口' }] },\n      ]"}],attrs:{placeholder:"deviceport"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),e._v(" "),n("a-form-item",{attrs:{label:"RTSP端口","label-col":{span:8},"wrapper-col":{span:12}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["rtspport",{rules:[{required:!0,message:"请输入设备RTSP端口"}]}],expression:"[\n        'rtspport',\n        { rules: [{ required: true, message: '请输入设备RTSP端口' }] },\n      ]"}],attrs:{placeholder:"rtspport"}},[n("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1)],1)],1)],2),e._v(" "),n("a-drawer",{attrs:{title:"本地配置",placement:"right",closable:!0,visible:e.drawervisible,width:"40%"},on:{close:e.hideDrawer}},[n("div",{staticClass:"localconfig"},[n("a-card",{staticStyle:{height:"100%"},attrs:{size:"small",title:"本地配置"}},[n("a-form",{attrs:{id:"localconfig",form:e.localconfig,layout:"inline"},on:{submit:e.clickSetLocalCfg}},[n("table",{staticStyle:{width:"100%"}},[n("tr",[n("td",[n("a-form-item",{attrs:{label:"播放性能"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["netsPreach",{initialValue:"最短延时"}],expression:"['netsPreach',{initialValue:'最短延时'}]"}],staticStyle:{width:"100px"}},[n("a-select-option",{attrs:{value:"最短延时"}},[e._v("最短延时")]),e._v(" "),n("a-select-option",{attrs:{value:"实时性好"}},[e._v("实时性好")]),e._v(" "),n("a-select-option",{attrs:{value:"均衡"}},[e._v("均衡")]),e._v(" "),n("a-select-option",{attrs:{value:"流畅性好"}},[e._v("流畅性好")])],1)],1)],1),e._v(" "),n("td",[n("a-form-item",{attrs:{label:"图像尺寸"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["wndSize",{initialValue:"充满"}],expression:"['wndSize',{initialValue:'充满'}]"}],staticStyle:{width:"100px"}},[n("a-select-option",{attrs:{value:"充满"}},[e._v("充满")]),e._v(" "),n("a-select-option",{attrs:{value:"4:3"}},[e._v("4:3")]),e._v(" "),n("a-select-option",{attrs:{value:"16:9"}},[e._v("16:9")])],1)],1)],1),e._v(" "),n("td",[n("a-form-item",{attrs:{label:"规则信息"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["rulesInfo",{initialValue:"禁用"}],expression:"['rulesInfo',{initialValue:'禁用'}]"}],staticStyle:{width:"100px"}},[n("a-select-option",{attrs:{value:"禁用"}},[e._v("禁用")]),e._v(" "),n("a-select-option",{attrs:{value:"启用"}},[e._v("启用")])],1)],1)],1)]),e._v(" "),n("tr",[n("td",[n("a-form-item",{attrs:{label:"文件格式"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["captureFileFormat",{initialValue:"JPEG"}],expression:"['captureFileFormat',{initialValue:'JPEG'}]"}],staticStyle:{width:"100px"}},[n("a-select-option",{attrs:{value:"JPEG"}},[e._v("JPEG")]),e._v(" "),n("a-select-option",{attrs:{value:"BMP"}},[e._v("BMP")])],1)],1)],1),e._v(" "),n("td",[n("a-form-item",{attrs:{label:"打包大小"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["packSize",{initialValue:"256M"}],expression:"['packSize',{initialValue:'256M'}]"}],staticStyle:{width:"100px"}},[n("a-select-option",{attrs:{value:"256M"}},[e._v("256M")]),e._v(" "),n("a-select-option",{attrs:{value:"512M"}},[e._v("512M")]),e._v(" "),n("a-select-option",{attrs:{value:"1G"}},[e._v("1G")])],1)],1)],1),e._v(" "),n("td",[n("a-form-item",{attrs:{label:"协议类型"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["protocolType",{initialValue:"TCP"}],expression:"['protocolType',{initialValue:'TCP'}]"}],staticStyle:{width:"100px"}},[n("a-select-option",{attrs:{value:"TCP"}},[e._v("TCP")]),e._v(" "),n("a-select-option",{attrs:{value:"UDP"}},[e._v("UDP")])],1)],1)],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("a-form-item",{attrs:{label:"录像文件保存路径"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["recordPath"],expression:"['recordPath']"}],attrs:{disabled:""},on:{click:function(t){return e.clickOpenFileDlg("recordPath",0)}}},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"folder-open"},slot:"addonAfter"})],1)],1)],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("a-form-item",{attrs:{label:"回放下载保存路径"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["downloadPath"],expression:"['downloadPath']"}],attrs:{disabled:""},on:{click:function(t){return e.clickOpenFileDlg("downloadPath",0)}}},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"folder-open"},slot:"addonAfter"})],1)],1)],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("a-form-item",{attrs:{label:"预览抓图保存路径"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewPicPath"],expression:"['previewPicPath']"}],attrs:{disabled:""},on:{click:function(t){return e.clickOpenFileDlg("previewPicPath",0)}}},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"folder-open"},slot:"addonAfter"})],1)],1)],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("a-form-item",{attrs:{label:"回放抓图保存路径"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["playbackPicPath"],expression:"['playbackPicPath']"}],attrs:{disabled:""},on:{click:function(t){return e.clickOpenFileDlg("playbackPicPath",0)}}},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"folder-open"},slot:"addonAfter"})],1)],1)],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("a-form-item",{attrs:{label:"回放剪辑保存路径"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["playbackFilePath"],expression:"['playbackFilePath']"}],attrs:{disabled:""},on:{click:function(t){return e.clickOpenFileDlg("playbackFilePath",0)}}},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"folder-open"},slot:"addonAfter"})],1)],1)],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("a-form-item",{attrs:{label:"设备抓图保存路径"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["devicePicPath"],expression:"['devicePicPath']"}],attrs:{disabled:""},on:{click:function(t){return e.clickOpenFileDlg("devicePicPath",0)}}},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"folder-open"},slot:"addonAfter"})],1)],1)],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("a-button",{attrs:{type:"primary"},on:{click:e.clickGetLocalCfg}},[e._v("\n                  获取\n                ")]),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:e.clickSetLocalCfg}},[e._v("\n                  设置\n                ")])],1)])])])],1)],1)]),e._v(" "),n("div",{staticClass:"video-live-module"},[n("a-row",{attrs:{gutter:16}},[n("a-col",{staticClass:"gutter-row",attrs:{span:8}},[n("div",{staticClass:"gutter-box"},[n("div",{staticClass:"plugin",attrs:{id:"divPlugin"}}),e._v(" "),n("div",{staticClass:"ptz"},[n("a-card",{attrs:{size:"small",title:"云台控制"}},[n("a",{attrs:{slot:"extra",href:"#"},on:{click:e.showDrawer},slot:"extra"},[e._v("本地配置")]),e._v(" "),n("a-row",{attrs:{gutter:20}},[n("a-col",{staticClass:"gutter-row",attrs:{span:9}},[n("table",{attrs:{cellpadding:"1",cellspacing:"3",border:"0"}},[n("tr",[n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onmousedown:"mouseDownPTZControl(5);",onmouseup:"mouseUpPTZControl();"}},[e._v("左上\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onmousedown:"mouseDownPTZControl(1);",onmouseup:"mouseUpPTZControl();"}},[e._v("上\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onmousedown:"mouseDownPTZControl(7);",onmouseup:"mouseUpPTZControl();"}},[e._v("右上\n                        ")])],1)]),n("tr",[n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onmousedown:"mouseDownPTZControl(3);",onmouseup:"mouseUpPTZControl();"}},[e._v("左\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onclick:"mouseDownPTZControl(9);"}},[e._v("自动")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onmousedown:"mouseDownPTZControl(4);",onmouseup:"mouseUpPTZControl();"}},[e._v("右\n                        ")])],1)]),e._v(" "),n("tr",[n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onmousedown:"mouseDownPTZControl(6);",onmouseup:"mouseUpPTZControl();"}},[e._v("左下\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onmousedown:"mouseDownPTZControl(2);",onmouseup:"mouseUpPTZControl();"}},[e._v("下\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onmousedown:"mouseDownPTZControl(8);",onmouseup:"mouseUpPTZControl();"}},[e._v("右下\n                        ")])],1)])])]),e._v(" "),n("a-col",{staticClass:"gutter-row",attrs:{span:8}},[n("table",{attrs:{cellpadding:"1",cellspacing:"3",border:"0"}},[n("tr",[n("td",{staticStyle:{color:"#ffffff"}},[e._v("\n                        云台速度\n                      ")]),e._v(" "),n("td",[n("a-select",{staticStyle:{width:"100px"},attrs:{id:"ptzspeed",defaultValue:"1"}},[n("a-select-option",{attrs:{value:"1"}},[e._v("1")]),e._v(" "),n("a-select-option",{attrs:{value:"2"}},[e._v("2")]),e._v(" "),n("a-select-option",{attrs:{value:"3"}},[e._v("3")]),e._v(" "),n("a-select-option",{attrs:{value:"4",selected:""}},[e._v("4")]),e._v(" "),n("a-select-option",{attrs:{value:"5"}},[e._v("5")]),e._v(" "),n("a-select-option",{attrs:{value:"6"}},[e._v("6")]),e._v(" "),n("a-select-option",{attrs:{value:"7"}},[e._v("7")])],1)],1)]),e._v(" "),n("tr",[n("td",{staticStyle:{color:"#ffffff"}},[e._v("\n                        预置点号\n                      ")]),e._v(" "),n("td",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["serverport"],expression:"['serverport']"}],staticStyle:{width:"100px"}})],1)]),e._v(" "),n("tr",[n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onclick:"clickSetPreset();"}},[e._v("设置\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"65px"},attrs:{type:"primary",onclick:"clickGoPreset();"}},[e._v("调用\n                        ")])],1)])])]),e._v(" "),n("a-col",{staticClass:"gutter-row",attrs:{span:7}},[n("table",{attrs:{cellpadding:"1",cellspacing:"3",border:"0"}},[n("tr",[n("td",[n("a-button",{staticStyle:{width:"70px"},attrs:{type:"primary",onmousedown:"PTZZoomIn()",onmouseup:"PTZZoomStop()"}},[e._v("\n                          变倍+\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"70px"},attrs:{type:"primary",onmousedown:"PTZZoomout()",onmouseup:"PTZZoomStop()"}},[e._v("\n                          变倍-\n                        ")])],1)]),n("tr",[n("td",[n("a-button",{staticStyle:{width:"70px"},attrs:{type:"primary",onmousedown:"PTZFocusIn()",onmouseup:"PTZFoucusStop()"}},[e._v("\n                          变焦+\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"70px"},attrs:{type:"primary",onmousedown:"PTZFoucusOut()",onmouseup:"PTZFoucusStop()"}},[e._v("\n                          变焦-\n                        ")])],1)]),e._v(" "),n("tr",[n("td",[n("a-button",{staticStyle:{width:"70px"},attrs:{type:"primary",onmousedown:"PTZIrisIn()",onmouseup:"PTZIrisStop()"}},[e._v("\n                          光圈+\n                        ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"70px"},attrs:{type:"primary",onmousedown:"PTZIrisOut()",onmouseup:"PTZIrisStop()"}},[e._v("\n                          光圈-\n                        ")])],1)])])])],1)],1)],1)])]),e._v(" "),n("a-col",{staticClass:"gutter-row",attrs:{span:8}},[n("div",{staticClass:"gutter-box"},[n("div",{staticClass:"preview"},[n("a-card",{attrs:{size:"small",title:"预览"}},[n("table",{attrs:{cellpadding:"3",cellspacing:"3",border:"0"}},[n("tr",[n("td",{staticStyle:{color:"#ffffff"}},[e._v("码流类型")])]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"3"}},[n("a-select",{staticStyle:{width:"110px"},attrs:{id:"streamtype",defaultValue:"1"}},[n("a-select-option",{attrs:{value:"1"}},[e._v("主码流")]),e._v(" "),n("a-select-option",{attrs:{value:"2"}},[e._v("子码流")]),e._v(" "),n("a-select-option",{attrs:{value:"3"}},[e._v("第三码流")]),e._v(" "),n("a-select-option",{attrs:{value:"4"}},[e._v("转码码流")])],1)],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickStartRealPlay();"}},[e._v("\n                      开始预览\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickStopRealPlay();"}},[e._v("\n                      停止预览\n                    ")])],1)]),e._v(" "),n("tr",[n("td",{staticStyle:{color:"#ffffff"},attrs:{colspan:"2"}},[e._v("音量（范围：0~100）")])]),e._v(" "),n("tr",[n("td",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["volume"],expression:"['volume']"}],staticStyle:{width:"110px"},attrs:{id:"volume",value:"50",maxlength:"3"}})],1),e._v(" "),n("td",{attrs:{colspan:"2"}},[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickSetVolume();"}},[e._v("\n                      设置\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickOpenSound();"}},[e._v("\n                      打开声音\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickCloseSound();"}},[e._v("\n                      关闭声音\n                    ")])],1)]),e._v(" "),n("tr",[n("td",{staticStyle:{color:"#ffffff"}},[e._v("对讲通道")])]),e._v(" "),n("tr",[n("td",[n("a-select",{staticStyle:{width:"110px"},attrs:{id:"audiochannels",defaultValue:"1"}},[n("a-select-option",{attrs:{value:"1"}},[e._v("主码流")]),e._v(" "),n("a-select-option",{attrs:{value:"2"}},[e._v("子码流")]),e._v(" "),n("a-select-option",{attrs:{value:"3"}},[e._v("第三码流")]),e._v(" "),n("a-select-option",{attrs:{value:"4"}},[e._v("转码码流")])],1)],1),e._v(" "),n("td",{attrs:{colspan:"2"}},[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickGetAudioInfo();"}},[e._v("\n                      获取通道\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickStartVoiceTalk();"}},[e._v("\n                      开始对讲\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickStopVoiceTalk();"}},[e._v("\n                      停止对讲\n                    ")])],1)]),e._v(" "),n("tr",[n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickCapturePic();"}},[e._v("\n                      抓图\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickStartRecord('realplay');"}},[e._v("\n                      开始录像\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickStopRecord('realplay');"}},[e._v("\n                      停止录像\n                    ")])],1)]),e._v(" "),n("tr",[n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickEnableEZoom();"}},[e._v("\n                      启用电子放大\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickDisableEZoom();"}},[e._v("\n                      禁用电子放大\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickEnable3DZoom();"}},[e._v("\n                      启用3D放大\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickDisable3DZoom();"}},[e._v("\n                      禁用3D放大\n                    ")])],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickFullScreen();"}},[e._v("\n                      全屏\n                    ")])],1)]),e._v(" "),n("tr",[n("td",{staticStyle:{color:"#ffffff"}},[e._v("分辨率")])]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"2"}},[n("a-input-group",[n("a-input",{staticStyle:{width:"100px","text-align":"center"}}),e._v(" "),n("a-input",{staticStyle:{width:"100px","text-align":"center"}})],1)],1),e._v(" "),n("td",[n("a-button",{staticStyle:{width:"110px"},attrs:{type:"primary",onclick:"clickDeviceCapturePic();"}},[e._v("\n                      设备抓图\n                    ")])],1)])])])],1),e._v(" "),n("div",{staticClass:"playback"},[n("a-card",{attrs:{size:"small",title:"回放"}},[n("table")])],1)])]),e._v(" "),n("a-col",{staticClass:"gutter-row",attrs:{span:8}},[n("div",{staticClass:"gutter-box"},[n("div",{staticClass:"ipchannel"},[n("a-card",{attrs:{size:"small",title:"数字通道"}},[n("a-button",{attrs:{type:"primary"},on:{click:e.clickGetDigitalChannelInfo}},[e._v("\n                获取数字通道列表\n              ")]),e._v(" "),n("div",{staticStyle:{height:"200px","margin-top":"10px"}})],1)],1),e._v(" "),n("div",{staticClass:"maintain"},[n("a-card",{attrs:{size:"small",title:"系统维护"}},[n("table",{staticStyle:{width:"100%","border-collapse":"separate","border-spacing":"0px 10px"}},[n("tr",[n("td",[n("a-button",{attrs:{type:"primary"},on:{click:e.clickExportDeviceConfig}},[e._v("\n                      导出配置文件\n                    ")]),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:e.clickCheckPluginVersion}},[e._v("\n                      检查插件版本\n                    ")]),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:e.clickRemoteConfig}},[e._v("\n                      远程配置库\n                    ")]),e._v(" "),n("a-button",{attrs:{type:"primary"},on:{click:e.clickRestoreDefault}},[e._v("\n                      恢复默认参数\n                    ")])],1)]),e._v(" "),n("tr",{staticStyle:{"margin-top":"10px"}},[n("td",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["playbackFilePath"],expression:"['playbackFilePath']"}],attrs:{disabled:""},on:{click:function(t){return e.clickOpenFileDlg("configFile",1)}}},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"folder-open"},slot:"addonAfter"})],1)],1),e._v(" "),n("td",[n("a-button",{attrs:{type:"primary"},on:{click:e.clickImportDeviceConfig}},[e._v("\n                      导入配置文件\n                    ")])],1)]),e._v(" "),n("tr",[n("td",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["playbackFilePath"],expression:"['playbackFilePath']"}],attrs:{disabled:""},on:{click:function(t){return e.clickOpenFileDlg("upgradeFile",1)}}},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{slot:"addonAfter",type:"folder-open"},slot:"addonAfter"})],1)],1),e._v(" "),n("td",[n("a-button",{attrs:{type:"primary"},on:{click:e.clickStartUpgrade}},[e._v("\n                      升级\n                    ")])],1)])])])],1),e._v(" "),n("div",{staticClass:"ipparse"},[n("a-card",{attrs:{size:"small",title:"设备IP解析"}},[n("a-form",{staticClass:"ipparse",attrs:{id:"ipparse",form:e.ipparse,layout:"inline"},on:{submit:function(e){}}},[n("table",{staticStyle:{width:"100%"}},[n("tr",[n("td",[n("a-form-item",{attrs:{label:"模式"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["devicemode",{initialValue:"IPServer"}],expression:"['devicemode',{initialValue:'IPServer'}]"}],staticStyle:{width:"120px"}},[n("a-select-option",{attrs:{value:"IPServer"}},[e._v("IPServer")]),e._v(" "),n("a-select-option",{attrs:{value:"HiDDNS"}},[e._v("HiDDNS")])],1)],1)],1),e._v(" "),n("td",[n("a-form-item",{attrs:{label:"服务器地址"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["serveraddress"],expression:"['serveraddress']"}]})],1)],1),e._v(" "),n("td",[n("a-form-item",{attrs:{label:"端口号"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["serverport"],expression:"['serverport']"}]})],1)],1),e._v(" "),n("td",[n("a-form-item",{attrs:{label:"设备标识"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["deviceid"],expression:"['deviceid']"}]})],1)],1)]),e._v(" "),n("tr",[n("td",{attrs:{colspan:"4"}},[n("a-button",{attrs:{type:"primary"},on:{click:e.clickGetDeviceIP}},[e._v("\n                        获取设备IP\n                      ")])],1)])])])],1)],1)])])],1)],1)],1)},staticRenderFns:[]};var p=n("VU/8")(u,d,!1,function(e){n("o+bZ")},"data-v-68969bf9",null);t.default=p.exports}});
//# sourceMappingURL=2.acd058feec83e3470056.js.map