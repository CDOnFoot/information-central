webpackJsonp([3],{bhVn:function(t,n){},raP7:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"forthwith-monitor"},[e("div",{staticClass:"control-module"},[e("div",{staticClass:"select-menu"},[e("a-menu",{attrs:{defaultSelectedKeys:[t.menu[0].SubArr[0].EntityId],defaultOpenKeys:[t.menu[0].Code],mode:"inline",theme:"dark",inlineCollapsed:t.collapsed,openKeys:t.openKeys},on:{openChange:t.onOpenChange}},[t._l(t.menu,function(n){return[e("a-sub-menu",{key:n.Code},[e("span",{attrs:{slot:"title"},slot:"title"},[e("a-icon",{attrs:{type:"profile"}}),t._v(" "),e("span",[t._v(t._s(n.DisplayName))])],1),t._v(" "),t._l(n.SubArr,function(n){return e("a-menu-item",{key:n.EntityId,on:{click:function(e){return t.changeMenu(n)}}},[t._v("\n              "+t._s(n.DisplayName)+"\n            ")])})],2)]})],2)],1),t._v(" "),e("div",{staticClass:"show-area"},[e("div",{staticClass:"select-taps"},[e("a-tabs",{attrs:{type:"card"},on:{change:t.changeTab}},[e("a-tab-pane",{key:"1",attrs:{tab:"基本信息"}}),t._v(" "),e("a-tab-pane",{key:"2",attrs:{tab:"关键指标"}}),t._v(" "),e("a-button",{attrs:{slot:"tabBarExtraContent"},slot:"tabBarExtraContent"},[e("a-badge",{attrs:{dot:"",count:10}},[e("a-icon",{attrs:{type:"notification"}})],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"router-link"},[e("div",{staticClass:"router-link-bg"}),t._v(" "),e("router-view",{attrs:{Equipment:t.equipment,PointInfo:t.pointInfo,PointVal:t.pointVal}})],1)])])])},staticRenderFns:[]};var o=e("VU/8")({name:"forthwith-monitor",data:function(){return{data:"",menu:"",equipment:"",pointInfo:"",pointVal:"",notification:"",collapsed:!1,rootSubmenuKeys:[],openKeys:[]}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.getEquipments().then(function(n){t.menu=t.unique(n),t.equipment=t.menu[0].SubArr[0],t.getPointInformations(t.equipment.Name).then(function(n){var e=[];t.pointInfo=n,t.pointInfo.forEach(function(t){e.push({Id:t.EntityId})}),t.getPointValues(e).then(function(n){t.pointVal=n,t.changeTab(1)})})})},unique:function(t){for(var n=this,e=[],i={},o=function(o){if(i[t[o].Code])e.forEach(function(n){n.Code==t[o].Code&&n.SubArr.push(t[o])});else{var a={Code:t[o].Code,DisplayName:t[o].Code,SubArr:[]};a.SubArr.push(t[o]),e.push(a),n.rootSubmenuKeys.push(t[o].Code),i[t[o].Code]=!0}},a=0;a<t.length;a++)o(a);return this.openKeys.push(this.rootSubmenuKeys[0]),e},changeMenu:function(t){var n=this;this.equipment=t,this.getPointInformations(this.equipment.Name).then(function(t){var e=[];n.pointInfo=t,n.pointInfo.forEach(function(t){e.push({Id:t.EntityId})}),n.getPointValues(e).then(function(t){n.pointVal=t})})},changeTab:function(t){1==t?this.$router.replace("/home/forthwithMonitor/info"):2==t?this.$router.replace("/home/forthwithMonitor/kpi"):3==t&&this.$router.replace("/home/forthwithMonitor/view")},toggleCollapsed:function(){this.collapsed=!this.collapsed},onOpenChange:function(t){var n=this,e=t.find(function(t){return-1===n.openKeys.indexOf(t)});-1===this.rootSubmenuKeys.indexOf(e)?this.openKeys=t:this.openKeys=e?[e]:[]},getEquipments:function(){return this.$http.get(this.$api.monitorEquipments).then(function(t){if(t.data.value)return t.data.value})},getPointInformations:function(t){var n="/config/pointinformations?&$filter=indexof(Name,'"+t+"') ge 0";return this.$http.get(n).then(function(t){if(t.data.value)return t.data.value})},getPointValues:function(t){return this.$http.post("/point/api/getpoint/getpointvalues",t).then(function(t){if(t.data)return t.data})},getPointValue:function(t){return this.$http.post("/point/api/getpoint/getpointvalue",t).then(function(t){if(t.data)return t.data})}}},i,!1,function(t){e("bhVn")},"data-v-9e285ff2",null);n.default=o.exports}});
//# sourceMappingURL=3.a804c8dc82275b2b4e1f.js.map