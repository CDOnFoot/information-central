webpackJsonp([3],{"Q+g9":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=e("woOf"),l=e.n(i),n={name:"defineAlarm",components:{AFormItem:e("SWcn").a},data:function(){var a=this;return{modal:"",searchAlarm:{},isShowModal:!1,okButton:"保存",modalTitle:"",defineName:"",condition:{alarmName:""},loading:!1,confirmLoading:!1,pagination:{current:1,defaultCurrent:1,defaultPageSize:18,total:0,size:"large",onChange:function(t){return a.changePage(t)}},form:this.$form.createForm(this,{name:"advanced_search"}),modalForm:{},column:[{title:"报警名称",dataIndex:"AlarmName",align:"center",width:"10%"},{title:"报警类型",dataIndex:"AlarmType",align:"center",width:"8%"},{title:"报警描述",dataIndex:"AlarmDescription",align:"center",width:"18%"},{title:"上限点",dataIndex:"HighLimit",align:"center",width:"5%"},{title:"下限点",dataIndex:"LowLimit",align:"center",width:"5%"},{title:"设备ID",dataIndex:"EquipmentId",align:"center",width:"6%"},{title:"设备点",dataIndex:"PointId",align:"center",width:"6%"},{title:"站ID",dataIndex:"StationId",align:"center",width:"5%"},{title:"系统ID",dataIndex:"SubsystemId",align:"center",width:"5%"},{title:"状态",dataIndex:"SyncStatus",align:"center",width:"9%"},{title:"创建时间",dataIndex:"CreateDateTime",align:"center",width:"13%"},{title:"操 作",align:"center",scopedSlots:{customRender:"operation"}}],tableList:[],tableListContainer:[]}},mounted:function(){this.initTable()},methods:{formatStatus:function(a){switch(a){case"AlarmRuleAddAcking":return"增加规则中";case"AlarmRuleEditAcking":return"修改规则中";case"AlarmRuleDeleteAcking":return"删除规则中";case"AlarmRuleAckSuccess":return"报警成功";case"AlarmRuleAddAckFail":return"增加规则失败";case"AlarmRuleEditAckFail":return"修改规则失败";case"AlarmRuleDeleteAckFail":return"删除规则失败";default:return""}},initTable:function(){var a=this,t=this;this.pagination.current=1,this.loading=!0,this.form.validateFields(function(e,i){e||t.$http.get(t.$api.alarmRules).then(function(e){if(200===e.status){var i=e.data.value;t.pagination.total=i.length,i.forEach(function(a,e){a.CreateDateTime=t.$common.timestampToTime(a.CreateDateTime),a.SyncStatus=t.formatStatus(a.SyncStatus)}),t.tableList=i}a.loading=!1})})},searchForAlarmDefine:function(){var a=this,t=this;this.tableList=[],this.tableListContainer=[],this.pagination.current=1,this.loading=!0,this.$http.get(t.$api.alarmRules).then(function(e){if(200===e.status){var i=[];e.data.value.forEach(function(a,e){a.CreateDateTime=t.$common.timestampToTime(a.CreateDateTime),a.SyncStatus=t.formatStatus(a.SyncStatus),""!==t.defineName?a.AlarmName.includes(t.defineName)&&(t.tableList.push(a),i.push(a),t.tableListContainer=i):t.tableList.push(a)}),t.pagination.total=t.tableList.length}a.loading=!1})},changePage:function(a){this.pagination.current=a,this.loading=!0,""!==this.condition.alarmName?this.handlePageForCondition(a):this.callbackPageChange(a)},handlePageForCondition:function(a){this.loading=!0;var t=this;this.tableList.splice(0);t.pagination.defaultPageSize;this.$http.get(t.$api.alarmRules).then(function(a){if(200===a.status){var e=[];a.data.value.forEach(function(a,i){a.CreateDateTime=t.$common.timestampToTime(a.CreateDateTime),a.SyncStatus=t.formatStatus(a.SyncStatus),a.AlarmName.includes(t.defineName)&&e.push(a)}),t.tableList=e}}),this.loading=!1},callbackPageChange:function(a){var t=this,e=this;this.tableList=[],this.pagination.current=a;this.pagination.defaultPageSize,this.tableList.length;this.$http.get(e.$api.alarmRules+"?$top="+e.pagination.defaultPageSize+"&$skip="+(a-1)*e.pagination.defaultPageSize).then(function(a){if(200===a.status){var i=[],l=a.data.value;e.tableList=a.data.value,l.forEach(function(a,t){a.CreateDateTime=e.$common.timestampToTime(a.CreateDateTime),a.SyncStatus=e.formatStatus(a.SyncStatus),i.push(a)}),e.tableList=i}t.loading=!1})},searchInAlarmDefine:function(){},exportAlarmDefine:function(){this.isShowModal=!0,this.modalTitle="添加报警",this.modalForm=l()({},{})},editAlarm:function(a){this.modalTitle="编辑报警",this.modalForm=l()({},a),this.isShowModal=!0},deleteAlarm:function(a){var t=this;this.modal=this.Modal.confirm({title:"删除报警",cancelText:"取消",centered:!0,closable:!1,content:"此操作将在列表删除此条数据，是否继续？",okType:"warning",onOk:function(a){t.modal.destroy()},onCancel:function(a){t.modal.destroy()}})},handleOk:function(){this.isShowModal=!1,"添加报警"===this.modalTitle||this.modalTitle},closeModal:function(){this.isShowModal=!1}}},o={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"define-alarm"},[e("div",{staticClass:"search-condition"},[e("a-form",{attrs:{layout:"inline",form:a.form},on:{submit:a.searchForAlarmDefine}},[e("a-form-item",{attrs:{label:"报警名称："}},[e("a-input",{attrs:{placeholder:"报警名称"},model:{value:a.defineName,callback:function(t){a.defineName=t},expression:"defineName"}})],1),a._v(" "),e("a-form-item",[e("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[a._v("搜索")])],1),a._v(" "),e("a-form-item",[e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:a.exportAlarmDefine}},[a._v("添加")])],1)],1)],1),a._v(" "),e("div",{staticClass:"define-alarm-dialog"},[e("a-modal",{attrs:{visible:a.isShowModal,okText:a.okButton,maskClosable:!1,centered:"",destroyOnClose:"",title:a.modalTitle,"confirm-loading":a.confirmLoading},on:{ok:a.handleOk,cancel:a.closeModal}},[e("div",{staticClass:"form-in-modal"},[e("a-form",{attrs:{form:a.modalForm}},[e("div",{staticClass:"modal-form"},[e("div",{staticClass:"modal-form-one"},[e("a-form-item",{attrs:{label:"报警名称","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.AlarmName,callback:function(t){a.$set(a.modalForm,"AlarmName",t)},expression:"modalForm.AlarmName"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"报警类型","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-select",{model:{value:a.modalForm.AlarmType,callback:function(t){a.$set(a.modalForm,"AlarmType",t)},expression:"modalForm.AlarmType"}},[e("a-select-option",{attrs:{value:"OutOfRange"}},[a._v("超限报警")]),a._v(" "),e("a-select-option",{attrs:{value:"StatusAlarm"}},[a._v("故障报警")]),a._v(" "),e("a-select-option",{attrs:{value:"Control"}},[a._v("反馈报警")]),a._v(" "),e("a-select-option",{attrs:{value:"StatusAnomaly"}},[a._v("运行报警")])],1)],1),a._v(" "),e("a-form-item",{attrs:{label:"报警描述","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.AlarmDescription,callback:function(t){a.$set(a.modalForm,"AlarmDescription",t)},expression:"modalForm.AlarmDescription"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"站ID","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.StationId,callback:function(t){a.$set(a.modalForm,"StationId",t)},expression:"modalForm.StationId"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"系统ID","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.SubsystemId,callback:function(t){a.$set(a.modalForm,"SubsystemId",t)},expression:"modalForm.SubsystemId"}})],1)],1),a._v(" "),e("div",{staticClass:"modal-form-two"},[e("a-form-item",{attrs:{label:"设备ID","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.EquipmentId,callback:function(t){a.$set(a.modalForm,"EquipmentId",t)},expression:"modalForm.EquipmentId"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"设备点","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.PointId,callback:function(t){a.$set(a.modalForm,"PointId",t)},expression:"modalForm.PointId"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"上限点","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.HighLimit,callback:function(t){a.$set(a.modalForm,"HighLimit",t)},expression:"modalForm.HighLimit"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"下限点","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.LowLimit,callback:function(t){a.$set(a.modalForm,"LowLimit",t)},expression:"modalForm.LowLimit"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"状态","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{attrs:{disabled:"true"},model:{value:a.modalForm.SyncStatus,callback:function(t){a.$set(a.modalForm,"SyncStatus",t)},expression:"modalForm.SyncStatus"}})],1)],1)])])],1)])],1),a._v(" "),e("div",{staticClass:"table"},[e("a-table",{attrs:{columns:a.column,loading:a.loading,pagination:a.pagination,dataSource:a.tableList,size:"small"},scopedSlots:a._u([{key:"operation",fn:function(t,i){return[e("a-button",{attrs:{type:"primary"},on:{click:function(t){return a.editAlarm(i)}}},[a._v("编辑")]),a._v(" "),e("a-button",{attrs:{type:"primary"},on:{click:function(t){return a.deleteAlarm(i)}}},[a._v("删除")])]}}])})],1)])},staticRenderFns:[]};var r=e("VU/8")(n,o,!1,function(a){e("WacF")},"data-v-ef44f8fc",null);t.default=r.exports},WacF:function(a,t){}});
//# sourceMappingURL=3.f5f16bcd590ecb0089fd.js.map