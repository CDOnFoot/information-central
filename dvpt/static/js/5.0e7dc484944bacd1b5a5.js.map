{"version":3,"sources":["webpack:///src/components/page/menu-module/current-alarm.vue","webpack:///./src/components/page/menu-module/current-alarm.vue?d716","webpack:///./src/components/page/menu-module/current-alarm.vue"],"names":["current_alarm","name","components","AFormItem","data","_this","this","alarmTime","noticeContent","searchAlarm","loading","isShowDrawer","pagination","current","defaultCurrent","defaultPageSize","total","size","onChange","changePage","drawerForm","remarks","column","title","dataIndex","align","width","scopedSlots","customRender","tableList","tableListContainer","condition","alarmName","alarmLevel","beforeCreate","form","$form","createForm","mounted","initTable","methods","_this2","that","validateFields","err","values","$http","get","$api","getAlarmForPagination","then","res","status","tableContainer","value","length","i","AlarmDateTime","$common","timestampToTime","AlarmStatus","AlarmLevel","Name","push","searchForAlarm","e","_this3","console","log","table","forEach","index","AlarmName","includes","page","handlePageForCondition","callbackPageChange","_this4","exportAlarm","onClose","sureAlarm","row","assign_default","submitRemarks","callback","_this5","paramId","Id","post","confirmAlarm","$info","content","onOk","menu_module_current_alarm","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","layout","on","submit","label","placeholder","model","$$v","$set","expression","_v","type","icon","html-type","click","visible","wrapStyle","height","overflow","paddingBottom","close","_s","AlarmType","AlarmDescription","EquipmentId","PointId","style","position","left","bottom","borderTop","padding","background","textAlign","marginRight","columns","dataSource","_u","key","fn","text","record","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.0e7dc484944bacd1b5a5.js","sourcesContent":["<template>\r\n  <div class=\"current-alarm\">\r\n    <div class=\"search-condition\">\r\n      <a-form layout=\"inline\" :form=\"form\" @submit=\"searchForAlarm\">\r\n        <a-form-item label=\"报警名称：\">\r\n          <a-input placeholder=\"报警名称\" v-model=\"condition.alarmName\"></a-input>\r\n        </a-form-item>\r\n        <a-form-item label=\"报警\">\r\n          <a-input placeholder=\"报警级别\" v-model=\"condition.alarmLevel\"></a-input>\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-button type=\"primary\" icon=\"search\" html-type=\"submit\">搜索</a-button>\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-button type=\"primary\" icon=\"form\" @click=\"exportAlarm\">导出</a-button>\r\n        </a-form-item>\r\n      </a-form>\r\n    </div>\r\n\r\n    <!-- 确认报警的抽屉 -->\r\n    <div class=\"the-drawer-of-alarm\">\r\n      <a-drawer\r\n        title=\"确认报警\"\r\n        :width=\"720\"\r\n        @close=\"onClose\"\r\n        :visible=\"isShowDrawer\"\r\n        :wrapStyle=\"{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}\"\r\n      >\r\n        <div class=\"chosen-alarm\">\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警名称</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmName }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警级别</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmLevel }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警类型</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmType }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警详情</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmDescription }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警时间</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmDateTime }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">设备标识</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.EquipmentId }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警点标识</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.PointId }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警状态</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmStatus }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">备注</th>\r\n            <th width=\"190\" height=\"35\"><a-input v-model=\"remarks\"></a-input></th>\r\n          </tr>\r\n        </div>\r\n\r\n        <!-- 时间轴需要根据服务实际条数来渲染，还需额外处理 -->\r\n        <div class=\"time-line\">\r\n          <a-timeline>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n          </a-timeline>\r\n        </div>\r\n\r\n        <div\r\n          :style=\"{\r\n          position: 'absolute',\r\n          left: 0,\r\n          bottom: 0,\r\n          width: '100%',\r\n          borderTop: '1px solid #e9e9e9',\r\n          padding: '10px 16px',\r\n          background: '#fff',\r\n          textAlign: 'right',\r\n        }\"\r\n        >\r\n          <a-button :style=\"{marginRight: '8px'}\" @click=\"onClose\">\r\n            关闭\r\n          </a-button>\r\n          <a-button @click=\"submitRemarks\" type=\"primary\">确认</a-button>\r\n        </div>\r\n      </a-drawer>\r\n    </div>\r\n\r\n    <div class=\"table\">\r\n      <a-table :columns=\"column\"\r\n               :loading=\"loading\"\r\n               :pagination=\"pagination\"\r\n               :dataSource=\"tableList\"\r\n               size=\"small\">\r\n        <template slot=\"operation\" slot-scope=\"text, record\">\r\n          <a-button type=\"primary\" @click=\"sureAlarm(record)\">确认报警</a-button>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import AFormItem from \"ant-design-vue/es/form/FormItem\";\r\n    export default {\r\n        name: \"current-alarm\",\r\n      components: {AFormItem},\r\n\r\n      data() {\r\n          return {\r\n            alarmTime: '9019-10-09 09:09',\r\n            noticeContent: '注意防范',\r\n            searchAlarm: {}, // 不使用了\r\n            loading: false,\r\n            isShowDrawer: false,\r\n            pagination: {\r\n              current: 1,\r\n              defaultCurrent: 1,\r\n              defaultPageSize: 18,\r\n              total: 0,\r\n              size: 'large',\r\n              // 页码改变时的回调\r\n              onChange: (current) => this.changePage(current)\r\n            },\r\n            // 抽屉详情\r\n            drawerForm: {},\r\n            remarks: '',\r\n            // column's setting\r\n            column: [\r\n              {\r\n                title: '报警名称',\r\n                dataIndex: 'AlarmName',\r\n                align: 'center',\r\n                // sorter: true,\r\n                width: '8%',\r\n                // scopedSlots: { customRender: 'name' }\r\n              },\r\n              {\r\n                title: '报警级别',\r\n                dataIndex: 'AlarmLevel',\r\n                align: 'center',\r\n                width: 40\r\n              },\r\n              {\r\n                title: '报警类型',\r\n                dataIndex: 'AlarmType',\r\n                align: 'center',\r\n                width: 40\r\n              },\r\n              {\r\n                title: '报警详情',\r\n                dataIndex: 'AlarmDescription',\r\n                align: 'center',\r\n                width: '15%'\r\n              },\r\n              {\r\n                title: '报警时间',\r\n                dataIndex: 'AlarmDateTime',\r\n                align: 'center',\r\n                width: '15%'\r\n              },\r\n              {\r\n                title: '设备标识',\r\n                dataIndex: 'EquipmentId',\r\n                align: 'center',\r\n                width: 40\r\n              },\r\n              {\r\n                title: '报警点标识',\r\n                dataIndex: 'PointId',\r\n                align: 'center',\r\n                width: 40\r\n              },\r\n              {\r\n                title: '报警状态',\r\n                dataIndex: 'AlarmStatus',\r\n                align: 'center',\r\n                width: '10%'\r\n              },\r\n              {\r\n                title: '操 作',\r\n                // dataIndex: 'tel',\r\n                align: 'center',\r\n                width: '15%',\r\n                scopedSlots: { customRender: 'operation' }\r\n              }\r\n            ],\r\n            tableList: [],\r\n            // 存在数据量比较大的情况，所以使用一个容器来缓存请求获取的列表，每次改变页码等其他操作均使用此容器\r\n            // 存在有很多条相同报警名称的数据，使用该状态来缓存获取到条件查询的 list ，在翻页时调用不同的方法\r\n            tableListContainer: [],\r\n            condition: {\r\n              alarmName: '',\r\n              alarmLevel: ''\r\n            }\r\n          }\r\n      },\r\n\r\n      beforeCreate () {\r\n        // 可不使用\r\n        this.form = this.$form.createForm(this, { name: 'advanced_search' });\r\n      },\r\n\r\n      mounted () {\r\n          this.initTable();\r\n      },\r\n\r\n      methods: {\r\n        initTable () {\r\n          const that = this;\r\n          this.pagination.current = 1;\r\n          this.loading = true;\r\n          // 使用当前绑定状态进行校验\r\n          this.form.validateFields((err, values) => {\r\n            if (!err) {\r\n              // 初始列表时查询所有数据，以显示全部的页码\r\n              that.$http.get(that.$api.getAlarmForPagination).then(res => {\r\n                if (res.status === 200) {\r\n                  // let table = [];\r\n                  let tableContainer = res.data.value;\r\n                  const length = that.pagination.defaultPageSize;\r\n                  that.pagination.total = tableContainer.length;\r\n                  /*tableContainer.forEach((value, index) => {\r\n                    value.AlarmDateTime = that.$common.timestampToTime(value.AlarmDateTime);\r\n                    value.AlarmStatus = value.AlarmStatus === '\"Unprocessed\"' ? '处理中' : '未处理';\r\n                    // 只获取一个 Name 字段属性\r\n                    value.AlarmLevel = value.AlarmLevel.Name;\r\n                    that.tableList.push(value);\r\n                  })*/\r\n                  for (let i=0;i<length;i++) {\r\n                    tableContainer[i].AlarmDateTime = that.$common.timestampToTime(tableContainer[i].AlarmDateTime);\r\n                    tableContainer[i].AlarmStatus = tableContainer[i].AlarmStatus === '\"Unprocessed\"' ? '处理中' : '未处理';\r\n                    tableContainer[i].AlarmLevel = tableContainer[i].AlarmLevel.Name;\r\n                    that.tableList.push(tableContainer[i]);\r\n                  }\r\n                }\r\n                this.loading = false;\r\n              })\r\n            }\r\n          })\r\n        },\r\n\r\n        searchForAlarm (e) {\r\n          const that = this;\r\n          // e.preventDefault();\r\n          this.tableList = [];\r\n          this.tableListContainer = [];\r\n          // 每次查询回到第一页\r\n          this.pagination.current = 1;\r\n          this.loading = true;\r\n          // 使用当前绑定状态进行校验\r\n          this.$http.get(that.$api.getAlarmForPagination).then(res => {\r\n            if (res.status === 200) {\r\n              console.log(res)\r\n              // let index = {};\r\n              let table = [];\r\n              let tableContainer = res.data.value;\r\n              // const length = that.pagination.defaultPageSize;\r\n              // that.pagination.total = tableContainer.length;\r\n              tableContainer.forEach((value, index) => {\r\n                value.AlarmDateTime = that.$common.timestampToTime(value.AlarmDateTime);\r\n                value.AlarmStatus = value.AlarmStatus === 'Unprocessed' ? '未处理' : '处理中';\r\n                // 只获取一个 Name 字段\r\n                value.AlarmLevel = value.AlarmLevel.Name;\r\n                if (that.condition.alarmName !== '' || that.condition.alarmLevel !== '') {\r\n                  if (/*value.AlarmName === that.condition.alarmName || value.AlarmLevel.Name === that.condition.alarmLevel*/\r\n                    value.AlarmName.includes(that.condition.alarmName) || value.AlarmLevel.Name.includes(that.condition.alarmLevel)\r\n                  ) {\r\n                    that.tableList.push(value);\r\n                    // table.splice(0, 1, value);\r\n                    table.push(value);\r\n                    // 额外的缓存\r\n                    that.tableListContainer = table;\r\n                  }\r\n                } else {\r\n                  that.tableList.push(value);\r\n                }\r\n              });\r\n              that.pagination.total = that.tableList.length;\r\n            }\r\n            this.loading = false;\r\n          })\r\n        },\r\n\r\n        // 页码改变时的回调\r\n        changePage (page) {\r\n          const that = this;\r\n          this.loading = true;\r\n          if (that.condition.alarmName !== '' || that.condition.alarmLevel !== '') {\r\n            this.handlePageForCondition(page);\r\n          }\r\n          this.callbackPageChange(page);\r\n        },\r\n        callbackPageChange (page) {\r\n          const that = this;\r\n          this.tableList = [];\r\n          this.pagination.current = page;\r\n          const pageSize = this.pagination.defaultPageSize;\r\n          const length = this.tableList.length;\r\n          /*if (length > 0) {\r\n            for (let i=0;i<=length;i++) {\r\n              this.tableList.pop();\r\n            }\r\n          }*/\r\n          this.$http.get(that.$api.getAlarmForPagination + '&$top=' + that.pagination.defaultPageSize + '&$skip=' + (page - 1) * that.pagination.defaultPageSize)\r\n            .then(res => {\r\n              if (res.status === 200) {\r\n                // let index;\r\n                let table = [];\r\n                const tableContainer = res.data.value;\r\n                // const length = that.pagination.defaultPageSize;\r\n                // that.pagination.total = tableContainer.length;\r\n                that.tableList = res.data.value;\r\n                /*for (let i=0;i<=length;i++) {\r\n                  let index = i + ((page - 1) * pageSize);\r\n                  tableContainer[index].AlarmDateTime = that.$common.timestampToTime(tableContainer[index].AlarmDateTime);\r\n                  tableContainer[index].AlarmStatus = tableContainer[index].AlarmStatus === \"Unprocessed\" ? '未处理' : '处理中'\r\n                  that.tableList.push(tableContainer[index]);\r\n                }*/\r\n                tableContainer.forEach((value, index) => {\r\n                  value.AlarmDateTime = that.$common.timestampToTime(value.AlarmDateTime);\r\n                  value.AlarmStatus = value.AlarmStatus === \"Unprocessed\" ? '未处理' : '处理中';\r\n                  value.AlarmLevel = value.AlarmLevel.Name;\r\n                  table.push(value);\r\n                });\r\n                that.tableList = table;\r\n              }\r\n              this.loading = false;\r\n            })\r\n        },\r\n\r\n        /**\r\n         * @description 存在条件查询有超出一页数据的情况\r\n         */\r\n        handlePageForCondition (page) {\r\n          // 指向当前 Vue component\r\n          this.loading = true;\r\n          const that = this;\r\n          // this.tableList = [];\r\n          let index_page = (page - 1) * that.pagination.defaultPageSize;\r\n          this.$http.get(that.$api.getAlarmForPagination).then(res => {\r\n            if (res.status === 200) {\r\n              let table = [], table_0 = [];\r\n              let tableContainer = res.data.value;\r\n              // const length = that.pagination.defaultPageSize;\r\n              // that.pagination.total = tableContainer.length;\r\n              tableContainer.forEach((value, index) => {\r\n                value.AlarmDateTime = that.$common.timestampToTime(value.AlarmDateTime);\r\n                value.AlarmStatus = value.AlarmStatus === 'Unprocessed' ? '未处理' : '处理中';\r\n                // 只获取一个 Name 字段\r\n                value.AlarmLevel = value.AlarmLevel.Name;\r\n                if (/*value.AlarmName === that.condition.alarmName || value.AlarmLevel.Name === that.condition.alarmLevel*/\r\n                  value.AlarmName.includes(that.condition.alarmName) || value.AlarmLevel.Name.includes(that.condition.alarmLevel)\r\n                ) {\r\n                  // that.tableList.push(value);\r\n                  table.push(value);\r\n                }\r\n              });\r\n\r\n              that.tableList = table;\r\n            }\r\n          });\r\n          this.loading = false;\r\n        },\r\n\r\n        exportAlarm () {},\r\n\r\n        onClose () {\r\n          this.isShowDrawer = false;\r\n        },\r\n\r\n        sureAlarm (row) {\r\n          this.drawerForm = Object.assign({}, row);\r\n          this.isShowDrawer = true;\r\n          // console.log('current choose alarm detail:')\r\n          // console.log(this.drawerForm)\r\n        },\r\n\r\n        /**\r\n         * @function 确认当前报警信息\r\n         */\r\n        submitRemarks (callback) {\r\n          const remarks = this.remarks;\r\n          const that = this;\r\n          // console.log('current input remarks:' + remarks);\r\n          // console.log('current id:' + this.drawerForm.Id)\r\n          const paramId = this.drawerForm.Id;\r\n          this.$http.post(that.$api.confirmAlarm + '?key=' + paramId)\r\n            .then((res) => {\r\n            console.log(res);\r\n            if (res.status === 200) {\r\n              if (res.data === paramId) {\r\n                that.$info({\r\n                  title: '提示',\r\n                  content: '确认成功！',\r\n                  onOk() {\r\n                    // that.isShowModal = false;\r\n                  },\r\n                });\r\n              }\r\n            }\r\n            this.isShowDrawer = false;\r\n          })\r\n        }\r\n      }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.chosen-alarm {\r\n  font-size: 20px;\r\n  border-bottom: 1px solid #e9e9e9;\r\n  padding-bottom: 20px;\r\n}\r\n\r\n  .time-line {\r\n    margin-top: 30px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/page/menu-module/current-alarm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"current-alarm\"},[_c('div',{staticClass:\"search-condition\"},[_c('a-form',{attrs:{\"layout\":\"inline\",\"form\":_vm.form},on:{\"submit\":_vm.searchForAlarm}},[_c('a-form-item',{attrs:{\"label\":\"报警名称：\"}},[_c('a-input',{attrs:{\"placeholder\":\"报警名称\"},model:{value:(_vm.condition.alarmName),callback:function ($$v) {_vm.$set(_vm.condition, \"alarmName\", $$v)},expression:\"condition.alarmName\"}})],1),_vm._v(\" \"),_c('a-form-item',{attrs:{\"label\":\"报警\"}},[_c('a-input',{attrs:{\"placeholder\":\"报警级别\"},model:{value:(_vm.condition.alarmLevel),callback:function ($$v) {_vm.$set(_vm.condition, \"alarmLevel\", $$v)},expression:\"condition.alarmLevel\"}})],1),_vm._v(\" \"),_c('a-form-item',[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\",\"html-type\":\"submit\"}},[_vm._v(\"搜索\")])],1),_vm._v(\" \"),_c('a-form-item',[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"form\"},on:{\"click\":_vm.exportAlarm}},[_vm._v(\"导出\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"the-drawer-of-alarm\"},[_c('a-drawer',{attrs:{\"title\":\"确认报警\",\"width\":720,\"visible\":_vm.isShowDrawer,\"wrapStyle\":{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}},on:{\"close\":_vm.onClose}},[_c('div',{staticClass:\"chosen-alarm\"},[_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警名称\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmName))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警级别\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmLevel))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警类型\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmType))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警详情\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmDescription))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警时间\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmDateTime))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"设备标识\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.EquipmentId))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警点标识\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.PointId))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警状态\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmStatus))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"备注\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_c('a-input',{model:{value:(_vm.remarks),callback:function ($$v) {_vm.remarks=$$v},expression:\"remarks\"}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"time-line\"},[_c('a-timeline',[_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))])],1)],1),_vm._v(\" \"),_c('div',{style:({\n        position: 'absolute',\n        left: 0,\n        bottom: 0,\n        width: '100%',\n        borderTop: '1px solid #e9e9e9',\n        padding: '10px 16px',\n        background: '#fff',\n        textAlign: 'right',\n      })},[_c('a-button',{style:({marginRight: '8px'}),on:{\"click\":_vm.onClose}},[_vm._v(\"\\n          关闭\\n        \")]),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitRemarks}},[_vm._v(\"确认\")])],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"table\"},[_c('a-table',{attrs:{\"columns\":_vm.column,\"loading\":_vm.loading,\"pagination\":_vm.pagination,\"dataSource\":_vm.tableList,\"size\":\"small\"},scopedSlots:_vm._u([{key:\"operation\",fn:function(text, record){return [_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.sureAlarm(record)}}},[_vm._v(\"确认报警\")])]}}])})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7a9c1de1\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/page/menu-module/current-alarm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7a9c1de1\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./current-alarm.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./current-alarm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./current-alarm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7a9c1de1\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./current-alarm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7a9c1de1\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/page/menu-module/current-alarm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}