webpackJsonp([5],{"2Nds":function(e,t){},TOaz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=a("woOf"),o=a.n(d),i=a("bOdI"),n=a.n(i),l=[{title:"部门代码",dataIndex:"Code"},{title:"部门名称",dataIndex:"LastName"},{title:"操 作",align:"center",scopedSlots:{customRender:"operation"},width:300}],s=[{title:"岗位ID",dataIndex:"EntityId"},{title:"岗位代码",dataIndex:"Modified"},{title:"从属部门",dataIndex:"Actived"},{title:"岗位名称",dataIndex:"Expired"},{title:"操 作",align:"center",scopedSlots:{customRender:"operation"},width:300}],r=[{title:"部门名称",dataIndex:"EntityId"},{title:"岗位名称",dataIndex:"Modified"},{title:"可通行门",dataIndex:"Actived"},{title:"状态",dataIndex:"Expired"},{title:"操 作",align:"center",scopedSlots:{customRender:"operation"},width:300}],m=[{EntityId:4,Modified:"2019-11-18T10:42:37.233+08:00",IsDeleted:!1,Actived:"2019-11-18T10:42:43.417+08:00",Expired:"2019-11-18T10:42:43.417+08:00",LastName:"胡六七",FirstName:"",Code:"12131233",Type:"Job",Description:"",IsBlocked:!0,Role:{EntityId:85,Name:"角色85",DisplayName:"测试角色85",Created:"2019-10-14T13:53:30.483+08:00",Updated:"2019-10-14T13:53:30.483+08:00"},Department:{EntityId:1,Name:"WMC",DisplayName:"弱电维护中心",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-09-24T00:00:00+08:00"},Badges:[{EntityId:5315,IsDeleted:!1,Enable:!0,StampedId:0,Encoded:"125412541254",KeypadID:11167,BadgeTechnologyID:0,Created:"2019-11-27T17:25:36.487+08:00",Modified:"2019-11-27T17:25:17.03+08:00",Expire:"2019-11-27T17:25:36.487+08:00",BadgeLayoutID:4,TimeSheetType:"staff"}]},{EntityId:8,Modified:"2019-10-09T10:53:55.193+08:00",IsDeleted:!1,Actived:"2019-10-09T10:57:15.11+08:00",Expired:"2020-10-09T10:57:13.893+08:00",LastName:"张四",FirstName:"",Code:"123",Type:"Job",Description:"123",IsBlocked:!1,Role:{EntityId:1,Name:"角色1",DisplayName:"测试角色1",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-10-13T17:40:59.533+08:00"},Department:{EntityId:1,Name:"WMC",DisplayName:"弱电维护中心",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-09-24T00:00:00+08:00"},Badges:[{EntityId:1406,IsDeleted:!1,Enable:!0,StampedId:0,Encoded:"00123",KeypadID:111111,BadgeTechnologyID:0,Created:"2019-10-16T11:14:17.513+08:00",Modified:"2019-10-16T11:14:34.9+08:00",Expire:"2019-10-16T11:14:17.513+08:00",BadgeLayoutID:4,TimeSheetType:"staff"}]},{EntityId:34,Modified:"2019-09-27T18:37:25.6+08:00",IsDeleted:!1,Actived:"2019-09-27T18:37:25.6+08:00",Expired:"2020-09-27T18:37:24.797+08:00",LastName:"张王",FirstName:"",Code:"10990",Type:"Job",Description:"1455",IsBlocked:!1,Role:{EntityId:4,Name:"角色4",DisplayName:"测试角色4",Created:"2018-10-25T10:12:58+08:00",Updated:"2018-10-25T10:12:58+08:00"},Department:{EntityId:2,Name:"BASC",DisplayName:"机电中心",Created:"2018-10-25T10:12:58+08:00",Updated:"2018-10-25T10:12:58+08:00"},Badges:[{EntityId:42,IsDeleted:!1,Enable:!0,StampedId:0,Encoded:"1111",KeypadID:222222,BadgeTechnologyID:0,Created:"2019-09-29T10:22:22.467+08:00",Modified:"2019-09-29T10:19:26.053+08:00",Expire:"2019-09-30T08:00:00+08:00",BadgeLayoutID:4,TimeSheetType:"staff"}]},{EntityId:42,Modified:"2019-10-09T10:56:37.277+08:00",IsDeleted:!1,Actived:"2019-10-09T10:56:37.277+08:00",Expired:"2020-10-09T10:56:35.94+08:00",LastName:"张三",FirstName:"",Code:"001",Type:"Job",Description:"",IsBlocked:!1,Role:{EntityId:4,Name:"角色4",DisplayName:"测试角色4",Created:"2018-10-25T10:12:58+08:00",Updated:"2018-10-25T10:12:58+08:00"},Department:{EntityId:2,Name:"BASC",DisplayName:"机电中心",Created:"2018-10-25T10:12:58+08:00",Updated:"2018-10-25T10:12:58+08:00"},Badges:[{EntityId:91,IsDeleted:!1,Enable:!0,StampedId:0,Encoded:"1111111111",KeypadID:111111,BadgeTechnologyID:0,Created:"2019-10-09T10:59:13.133+08:00",Modified:"2019-10-09T10:59:13.133+08:00",Expire:"2020-10-31T08:00:00+08:00",BadgeLayoutID:4,TimeSheetType:"staff"}]},{EntityId:46,Modified:"2019-11-21T14:59:41.093+08:00",IsDeleted:!1,Actived:"2019-11-21T14:59:51.11+08:00",Expired:"2019-11-21T14:59:51.11+08:00",LastName:"胡四",FirstName:"",Code:"101025",Type:"Job",Description:"",IsBlocked:!0,Role:{EntityId:1,Name:"角色1",DisplayName:"测试角色1",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-10-13T17:40:59.533+08:00"},Department:{EntityId:1,Name:"WMC",DisplayName:"弱电维护中心",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-09-24T00:00:00+08:00"},Badges:[{EntityId:4311,IsDeleted:!1,Enable:!0,StampedId:0,Encoded:"138549",KeypadID:111111,BadgeTechnologyID:0,Created:"2019-11-28T09:47:41.06+08:00",Modified:"2019-11-28T09:47:24.727+08:00",Expire:"2019-11-28T09:47:41.06+08:00",BadgeLayoutID:4,TimeSheetType:"staff"}]},{EntityId:647,Modified:"2019-11-26T14:36:01.787+08:00",IsDeleted:!1,Actived:"2019-11-26T14:36:20.277+08:00",Expired:"2019-11-26T14:36:20.277+08:00",LastName:"李想",FirstName:"",Code:"12131248",Type:"Job",Description:"",IsBlocked:!1,Role:{EntityId:85,Name:"角色85",DisplayName:"测试角色85",Created:"2019-10-14T13:53:30.483+08:00",Updated:"2019-10-14T13:53:30.483+08:00"},Department:{EntityId:1,Name:"WMC",DisplayName:"弱电维护中心",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-09-24T00:00:00+08:00"},Badges:[{EntityId:5316,IsDeleted:!1,Enable:!0,StampedId:0,Encoded:"222222222222",KeypadID:121212,BadgeTechnologyID:0,Created:"2019-11-26T14:36:30.987+08:00",Modified:"2019-11-26T14:36:30.987+08:00",Expire:"2019-11-26T14:36:30.987+08:00",BadgeLayoutID:4,TimeSheetType:"staff"}]},{EntityId:648,Modified:"2019-11-27T10:20:21.403+08:00",IsDeleted:!1,Actived:"2019-11-27T10:20:41.103+08:00",Expired:"2019-11-27T10:20:41.103+08:00",LastName:"张三",FirstName:"",Code:"12131249",Type:"Job",Description:"",IsBlocked:!1,Role:{EntityId:1,Name:"角色1",DisplayName:"测试角色1",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-10-13T17:40:59.533+08:00"},Department:{EntityId:1,Name:"WMC",DisplayName:"弱电维护中心",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-09-24T00:00:00+08:00"},Badges:[{EntityId:5317,IsDeleted:!1,Enable:!0,StampedId:0,Encoded:"203233010111",KeypadID:0,BadgeTechnologyID:0,Created:"2019-12-02T17:00:13.837+08:00",Modified:"2019-12-02T16:59:54.56+08:00",Expire:"2019-12-02T17:00:13.837+08:00",BadgeLayoutID:4,TimeSheetType:"staff"}]},{EntityId:649,Modified:"2019-11-28T09:46:25.933+08:00",IsDeleted:!1,Actived:"2019-11-28T09:46:40.85+08:00",Expired:"2019-11-28T09:46:40.85+08:00",LastName:"胡二",FirstName:"",Code:"12131259",Type:"Job",Description:"",IsBlocked:!1,Role:{EntityId:85,Name:"角色85",DisplayName:"测试角色85",Created:"2019-10-14T13:53:30.483+08:00",Updated:"2019-10-14T13:53:30.483+08:00"},Department:{EntityId:1,Name:"WMC",DisplayName:"弱电维护中心",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-09-24T00:00:00+08:00"},Badges:[{EntityId:5318,IsDeleted:!1,Enable:!0,StampedId:0,Encoded:"111111111111",KeypadID:111111,BadgeTechnologyID:0,Created:"2019-11-28T10:01:10.003+08:00",Modified:"2019-11-28T10:01:10.003+08:00",Expire:"2019-11-28T10:01:10.003+08:00",BadgeLayoutID:4,TimeSheetType:"staff"}]},{EntityId:650,Modified:"2019-11-12T09:42:48.49+08:00",IsDeleted:!1,Actived:"2019-10-13T19:24:54.173+08:00",Expired:"2019-10-13T19:24:54.173+08:00",LastName:"胡三",FirstName:"",Code:"12131251",Type:"Job",Description:null,IsBlocked:!1,Role:{EntityId:85,Name:"角色85",DisplayName:"测试角色85",Created:"2019-10-14T13:53:30.483+08:00",Updated:"2019-10-14T13:53:30.483+08:00"},Department:{EntityId:1,Name:"WMC",DisplayName:"弱电维护中心",Created:"2019-09-24T00:00:00+08:00",Updated:"2019-09-24T00:00:00+08:00"},Badges:[]}],c={name:"card-user-manage",components:{AFormItem:a("SWcn").a},data:function(){var e,t=this;return e={columns1:l,columns2:s,columns3:r,expandAllRows:!0,pagination:{current:1,defaultCurrent:1,defaultPageSize:20,total:0,size:"large",onChange:function(e){return t.changePage(e)}},loading:!1,data:[]},n()(e,"loading",!1),n()(e,"enableEdit",!1),n()(e,"isShowModal1",!1),n()(e,"isShowModal2",!1),n()(e,"isShowModal3",!1),n()(e,"modalTitle",""),n()(e,"modalForm",{}),e},mounted:function(){this.init(1)},methods:{init:function(e){this.data=m},changePage:function(e){this.pagination.current=e},addCard:function(e){this.modalForm=o()({},{}),this.enableEdit=!1,1==e?(this.modalTitle="新增部门信息",this.isShowModal1=!0):2==e?(this.modalTitle="新增岗位信息",this.isShowModal2=!0):(this.modalTitle="新增权限信息",this.isShowModal3=!0)},checkCard:function(e){this.modalForm=o()({},e),this.modalTitle="查看门禁卡",this.modalForm.Enable=!0===this.modalForm.Enable?"Enable":"Disable",this.okButton="确定",this.enableEdit=!0,this.isShowModal=!0},editCard:function(e){this.modalForm=o()({},e),this.modalTitle="编辑门禁卡",this.modalForm.Enable=!0===this.modalForm.Enable?"Enable":"Disable",this.okButton="保存",this.enableEdit=!1,this.isShowModal=!0},deleteCard:function(e){var t=this;t.modal=t.Modal.confirm({title:"删除门禁卡",cancelText:"取消",centered:!0,closable:!1,content:"此操作将在列表删除此条数据，是否继续？",okType:"warning",onOk:function(e){var a={EntityId:t.modalForm.EntityId};t.$http.post(t.$api.deleteUser,a).then(function(e){if(200!==e.status)return!1;"success"===e.data&&t.$info({title:"完成",content:"已删除此条数据！",onOk:function(){t.modal.destroy()}}),t.modal.destroy()})},onCancel:function(e){t.modal.destroy()}})},handleOk:function(e){var t=this,a=null;if(t.confirmLoading=!0,"添加门禁卡"===t.modalTitle){var d=t.modalForm.Encoded,o=t.modalForm.DisplayName,i=(t.modalForm.Expire,t.modalForm.TimeSheetType),n=t.modalForm.Description;t.modalForm.Enable;a={Modified:new Date,IsDeleted:!1,Actived:new Date,Expired:new Date,Type:i,FirstName:"",LastName:o,Description:n,IsBlocked:!1,Code:d,Role:"",Department:""},console.log(a),t.$http.post(t.$api.getCards,a).then(function(e){console.log(e),"success"===e.data?t.$info({title:"提示",content:"添加成功！",onOk:function(){t.isShowModal=!1}}):t.$info({title:"错误",content:"发生了一些错误："+e.data.Message,onOk:function(){t.isShowModal=!1}}),t.confirmLoading=!1})}else"查看门禁卡"===t.modalTitle?(t.isShowModal=!1,t.confirmLoading=!1):"编辑门禁卡"===t.modalTitle&&(console.log(t.modalForm),t.$http.post(t.$api.updateUsers,a).then(function(e){"success"===e.data?t.$info({title:"提示",content:"修改成功！",onOk:function(){t.isShowModal=!1}}):t.$info({title:"错误",content:"发生了一些错误："+e.data.Message,onOk:function(){t.isShowModal=!1}}),t.confirmLoading=!1}))},closeModal:function(e){1==e?this.isShowModal1=!1:2==e?this.isShowModal2=!1:this.isShowModal3=!1},changeTime:function(e,t){console.log(e,t)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"card-user-manage"},[a("a-tabs",{attrs:{type:"card",defaultActiveKey:"1",tabPosition:"left"},on:{change:e.init}},[a("a-tab-pane",{key:"1",attrs:{tab:"部门"}},[a("a-form",{attrs:{layout:"inline"}},[a("a-form-item",[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.addCard(1)}}},[e._v("新增")])],1)],1),e._v(" "),a("a-table",{attrs:{columns:e.columns1,dataSource:e.data,pagination:e.pagination,loading:e.loading,defaultExpandAllRows:e.expandAllRows,size:"small"},scopedSlots:e._u([{key:"operation",fn:function(t,d){return[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCard(d)}}},[e._v("编辑")]),e._v(" "),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteCard(d)}}},[e._v("删除")])]}}])}),e._v(" "),a("a-modal",{attrs:{visible:e.isShowModal1,title:e.modalTitle,centered:"",destroyOnClose:""},on:{ok:function(t){return e.handleOk(1)},cancel:function(t){return e.closeModal(1)}}},[a("div",{staticClass:"form-in-modal"},[a("a-form",{attrs:{layout:"inline",form:e.modalForm}},[a("div",{staticClass:"modal-form",staticStyle:{"text-align":"center"}},[a("a-form-item",{attrs:{label:"部门代码"}},[a("a-input",{attrs:{disabled:e.enableEdit},model:{value:e.modalForm.Code,callback:function(t){e.$set(e.modalForm,"Code",t)},expression:"modalForm.Code"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"部门名称"}},[a("a-input",{attrs:{disabled:e.enableEdit},model:{value:e.modalForm.Name,callback:function(t){e.$set(e.modalForm,"Name",t)},expression:"modalForm.Name"}})],1)],1)])],1)])],1),e._v(" "),a("a-tab-pane",{key:"2",attrs:{tab:"岗位"}},[a("a-form",{attrs:{layout:"inline"}},[a("a-form-item",[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.addCard(2)}}},[e._v("新增")])],1)],1),e._v(" "),a("a-table",{attrs:{columns:e.columns2,dataSource:e.data,pagination:e.pagination,loading:e.loading,defaultExpandAllRows:e.expandAllRows,size:"small"},scopedSlots:e._u([{key:"operation",fn:function(t,d){return[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCard(d)}}},[e._v("编辑")]),e._v(" "),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteCard(d)}}},[e._v("删除")])]}}])}),e._v(" "),a("a-modal",{attrs:{visible:e.isShowModal2,title:e.modalTitle,centered:"",destroyOnClose:""},on:{ok:function(t){return e.handleOk(2)},cancel:function(t){return e.closeModal(2)}}},[a("div",{staticClass:"form-in-modal"},[a("a-form",{attrs:{layout:"inline",form:e.modalForm}},[a("div",{staticClass:"modal-form",staticStyle:{"text-align":"center"}},[a("a-form-item",{attrs:{label:"从属部门"}},[a("a-select",{attrs:{disabled:e.enableEdit},model:{value:e.modalForm.Department,callback:function(t){e.$set(e.modalForm,"Department",t)},expression:"modalForm.Department"}},[a("a-select-option",{attrs:{value:"Enable"}},[e._v("启用")]),e._v(" "),a("a-select-option",{attrs:{value:"Disable"}},[e._v("未启用")])],1)],1),e._v(" "),a("a-form-item",{attrs:{label:"岗位代码"}},[a("a-input",{attrs:{disabled:e.enableEdit},model:{value:e.modalForm.Code,callback:function(t){e.$set(e.modalForm,"Code",t)},expression:"modalForm.Code"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"岗位名称"}},[a("a-input",{attrs:{disabled:e.enableEdit},model:{value:e.modalForm.Name,callback:function(t){e.$set(e.modalForm,"Name",t)},expression:"modalForm.Name"}})],1)],1)])],1)])],1),e._v(" "),a("a-tab-pane",{key:"3",attrs:{tab:"岗位权限配置"}},[a("a-table",{attrs:{columns:e.columns3,dataSource:e.data,pagination:e.pagination,loading:e.loading,defaultExpandAllRows:e.expandAllRows,size:"small"},scopedSlots:e._u([{key:"operation",fn:function(t,d){return[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCard(d)}}},[e._v("编辑")])]}}])}),e._v(" "),a("a-modal",{attrs:{visible:e.isShowModal3,title:e.modalTitle,centered:"",destroyOnClose:""},on:{ok:function(t){return e.handleOk(3)},cancel:function(t){return e.closeModal(3)}}},[a("div",{staticClass:"form-in-modal"},[a("a-form",{attrs:{layout:"inline",form:e.modalForm}},[a("div",{staticClass:"modal-form",staticStyle:{"text-align":"center"}},[a("a-form-item",{attrs:{label:"从属部门"}},[a("a-select",{attrs:{disabled:e.enableEdit},model:{value:e.modalForm.Department,callback:function(t){e.$set(e.modalForm,"Department",t)},expression:"modalForm.Department"}},[a("a-select-option",{attrs:{value:"Enable"}},[e._v("启用")]),e._v(" "),a("a-select-option",{attrs:{value:"Disable"}},[e._v("未启用")])],1)],1),e._v(" "),a("a-form-item",{attrs:{label:"岗位代码"}},[a("a-input",{attrs:{disabled:e.enableEdit},model:{value:e.modalForm.Code,callback:function(t){e.$set(e.modalForm,"Code",t)},expression:"modalForm.Code"}})],1),e._v(" "),a("a-form-item",{attrs:{label:"岗位名称"}},[a("a-input",{attrs:{disabled:e.enableEdit},model:{value:e.modalForm.Name,callback:function(t){e.$set(e.modalForm,"Name",t)},expression:"modalForm.Name"}})],1)],1)])],1)])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,p,!1,function(e){a("2Nds")},"data-v-7cf9a284",null);t.default=u.exports}});
//# sourceMappingURL=5.ae5f2c0757547160aa63.js.map