webpackJsonp([6],{"1cW6":function(t,a){},CLzN:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={name:"alarm-history",components:{AFormItem:e("SWcn").a},data:function(){var t=this;return{searchAlarmName:"",searchAlarmLevel:"",loading:!1,tableListContainer:[],pagination:{current:1,defaultCurrent:1,defaultPageSize:25,total:0,size:"large",onChange:function(a){t.handlePageChange(a)}},column:[{title:"报警名称",dataIndex:"AlarmName",align:"center",width:"16%"},{title:"报警类型",dataIndex:"AlarmType",align:"center",width:"10%"},{title:"报警详情",dataIndex:"AlarmDescription",align:"center",width:"18%"},{title:"报警时间",dataIndex:"AlarmDateTime",align:"center",width:"18%"},{title:"设备标识",dataIndex:"EquipmentId",align:"center",width:"10%"},{title:"报警点标识",dataIndex:"PointId",align:"center",width:"10%"},{title:"报警状态",dataIndex:"AlarmStatus",align:"center"}],tableList:[]}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"advanced_search"})},mounted:function(){this.initTableList()},methods:{initTableList:function(){var t=this;this.loading=!0,this.pagination.current=1;try{this.$http.get(t.$api.getAlarmHistory).then(function(a){var e=[],i=a.data.value;t.pagination.total=i.length,i.forEach(function(a,i){a.AlarmDateTime=t.$common.timestampToTime(a.AlarmDateTime),a.AlarmStatus='"Unprocessed"'===a.AlarmStatus?"处理中":"未处理",e.push(a)}),t.tableList=e,t.loading=!1})}catch(a){console.log(a),t.loading=!1}},searchForAlarmHistory:function(){var t=this,a=this;this.tableList=[],this.tableListContainer=[],this.pagination.current=1,this.loading=!0,this.$http.get(a.$api.getAlarmHistory).then(function(e){if(200===e.status){var i=[];e.data.value.forEach(function(t,e){t.AlarmDateTime=a.$common.timestampToTime(t.AlarmDateTime),t.AlarmStatus="Unprocessed"===t.AlarmStatus?"未处理":"处理中",""!==a.searchAlarmName||""!==a.searchAlarmLevel?t.AlarmName.includes(a.searchAlarmName)&&(a.tableList.push(t),i.push(t),a.tableListContainer=i):a.tableList.push(t)}),a.pagination.total=a.tableList.length}t.loading=!1})},exportAlarmHistory:function(){},handlePageChange:function(t){this.loading=!0,""===this.searchAlarmLevel&&""===this.searchAlarmName||this.handlePageForCondition(t),this.callbackPageChange(t)},handlePageForCondition:function(t){var a=this;a.pagination.defaultPageSize;this.$http.get(a.$api.getAlarmHistory).then(function(t){if(200===t.status){var e=[];t.data.value.forEach(function(t,i){t.AlarmDateTime=a.$common.timestampToTime(t.AlarmDateTime),t.AlarmStatus="Unprocessed"===t.AlarmStatus?"未处理":"处理中",t.AlarmName.includes(a.searchAlarmName)&&e.push(t)}),a.tableList=e}}),this.loading=!1},callbackPageChange:function(t){var a=this,e=this;this.loading=!0,this.tableList=[],this.pagination.current=t;this.pagination.defaultPageSize,this.tableList.length;this.$http.get(e.$api.getAlarmHistory+"&$top="+e.pagination.defaultPageSize+"&$skip="+(t-1)*e.pagination.defaultPageSize).then(function(t){if(200===t.status){var i=[],n=t.data.value;e.tableList=t.data.value,n.forEach(function(t,a){t.AlarmDateTime=e.$common.timestampToTime(t.AlarmDateTime),t.AlarmStatus="Unprocessed"===t.AlarmStatus?"未处理":"处理中",i.push(t)}),e.tableList=i}a.loading=!1})}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"alarm-history"},[e("div",{staticClass:"search-condition"},[e("a-form",{attrs:{layout:"inline",form:t.form},on:{submit:t.searchForAlarmHistory}},[e("a-form-item",{attrs:{label:"报警名称："}},[e("a-input",{attrs:{placeholder:"报警名称"},model:{value:t.searchAlarmName,callback:function(a){t.searchAlarmName=a},expression:"searchAlarmName"}})],1),t._v(" "),e("a-form-item",{attrs:{label:"报警"}},[e("a-input",{attrs:{placeholder:"报警级别"},model:{value:t.searchAlarmLevel,callback:function(a){t.searchAlarmLevel=a},expression:"searchAlarmLevel"}})],1),t._v(" "),e("a-form-item",[e("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[t._v("搜索")])],1),t._v(" "),e("a-form-item",[e("a-button",{attrs:{type:"primary",icon:"form"},on:{click:t.exportAlarmHistory}},[t._v("导出")])],1)],1)],1),t._v(" "),e("div",{staticClass:"table"},[e("a-table",{attrs:{columns:t.column,loading:t.loading,pagination:t.pagination,dataSource:t.tableList,size:"small"},scopedSlots:t._u([{key:"operation",fn:function(t,a){}}])})],1)])},staticRenderFns:[]};var r=e("VU/8")(i,n,!1,function(t){e("1cW6")},"data-v-6ff4374d",null);a.default=r.exports}});
//# sourceMappingURL=6.2c1d9ed43d8028857e6e.js.map