webpackJsonp([8],{CLzN:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e={name:"alarm-history",components:{AFormItem:i("SWcn").a},data:function(){var t=this;return{historyName:"",searchAlarmLevel:"",loading:!1,tableListContainer:[],pagination:{current:1,defaultCurrent:1,defaultPageSize:25,total:0,size:"large",onChange:function(a){return t.handlePageHistory(a)}},column:[{title:"报警名称",dataIndex:"AlarmName",align:"center",width:"16%"},{title:"报警类型",dataIndex:"AlarmType",align:"center",width:"10%"},{title:"报警详情",dataIndex:"AlarmDescription",align:"center",width:"18%"},{title:"报警时间",dataIndex:"AlarmDateTime",align:"center",width:"18%"},{title:"设备标识",dataIndex:"EquipmentId",align:"center",width:"10%"},{title:"报警点标识",dataIndex:"PointId",align:"center",width:"10%"},{title:"报警状态",dataIndex:"AlarmStatus",align:"center"}],tableList:[]}},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"advanced_search"})},mounted:function(){this.initTableList()},methods:{initTableList:function(){var t=this;this.loading=!0,this.pagination.current=1;try{this.$http.get(t.$api.getAlarmHistory).then(function(a){var i=[];a.data.value.forEach(function(a,e){a.AlarmDateTime=t.$common.timestampToTime(a.AlarmDateTime),a.AlarmStatus='"Unprocessed"'===a.AlarmStatus?"处理中":"未处理",i.push(a)}),t.tableList=i,t.pagination.total=t.tableList.length,t.loading=!1})}catch(a){console.log(a),t.loading=!1}},searchForAlarmHistory:function(){var t=this,a=this;this.tableList=[],this.tableListContainer=[],this.pagination.current=1,this.loading=!0,this.$http.get(a.$api.getAlarmHistory).then(function(i){if(200===i.status){var e=[];i.data.value.forEach(function(t,i){t.AlarmDateTime=a.$common.timestampToTime(t.AlarmDateTime),t.AlarmStatus="Unprocessed"===t.AlarmStatus?"未处理":"处理中",""!==a.historyName?t.AlarmName.includes(a.historyName)&&(a.tableList.push(t),e.push(t)):a.tableList.push(t)}),a.pagination.total=a.tableList.length}t.loading=!1})},exportAlarmHistory:function(){},handlePageHistory:function(t){this.pagination.current=t},handlePageForHistory:function(t){var a=this;this.loading=!0,this.$http.get(a.$api.getAlarmHistory).then(function(t){if(200===t.status){var i=[];t.data.value.forEach(function(t,e){t.AlarmDateTime=a.$common.timestampToTime(t.AlarmDateTime),t.AlarmStatus="Unprocessed"===t.AlarmStatus?"未处理":"处理中",t.AlarmName.includes(a.historyName)&&i.push(t)}),a.tableList=i}}),this.loading=!1},callbackPageHistory:function(t){var a=this,i=this;this.loading=!0,this.tableList=[],this.pagination.current=t;this.pagination.defaultPageSize,this.tableList.length;this.$http.get(i.$api.getAlarmHistory+"&$top="+i.pagination.defaultPageSize+"&$skip="+(t-1)*i.pagination.defaultPageSize).then(function(t){if(200===t.status){var e=[],n=t.data.value;i.tableList=t.data.value,n.forEach(function(t,a){t.AlarmDateTime=i.$common.timestampToTime(t.AlarmDateTime),t.AlarmStatus="Unprocessed"===t.AlarmStatus?"未处理":"处理中",e.push(t)}),i.tableList=e}a.loading=!1})}}},n={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"alarm-history"},[i("div",{staticClass:"search-condition"},[i("a-form",{attrs:{layout:"inline",form:t.form},on:{submit:t.searchForAlarmHistory}},[i("a-form-item",{attrs:{label:"报警名称："}},[i("a-input",{attrs:{placeholder:"报警名称"},model:{value:t.historyName,callback:function(a){t.historyName=a},expression:"historyName"}})],1),t._v(" "),i("a-form-item",[i("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[t._v("搜索")])],1),t._v(" "),i("a-form-item",[i("a-button",{attrs:{type:"primary",icon:"form"},on:{click:t.exportAlarmHistory}},[t._v("导出")])],1)],1)],1),t._v(" "),i("div",{staticClass:"table"},[i("a-table",{attrs:{columns:t.column,loading:t.loading,pagination:t.pagination,dataSource:t.tableList,size:"small"},scopedSlots:t._u([{key:"operation",fn:function(t,a){}}])})],1)])},staticRenderFns:[]};var r=i("VU/8")(e,n,!1,function(t){i("JF5I")},"data-v-2bfa1a84",null);a.default=r.exports},JF5I:function(t,a){}});
//# sourceMappingURL=8.cdcda9473022f8450916.js.map