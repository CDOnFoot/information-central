{"version":3,"sources":["webpack:///src/components/page/menu-module/current-alarm.vue","webpack:///./src/components/page/menu-module/current-alarm.vue?4c20","webpack:///./src/components/page/menu-module/current-alarm.vue"],"names":["current_alarm","name","components","AFormItem","data","_this","this","alarmTime","noticeContent","searchAlarm","loading","isShowDrawer","pagination","current","defaultCurrent","defaultPageSize","total","size","onChange","changePage","drawerForm","remarks","column","title","dataIndex","align","width","scopedSlots","customRender","tableList","tableListContainer","alarmNameCurrent","condition","alarmName","beforeCreate","form","$form","createForm","mounted","initTable","methods","_this2","that","validateFields","err","values","$http","get","$api","getAlarmForPagination","then","res","status","tableContainer","value","length","i","AlarmDateTime","$common","timestampToTime","AlarmStatus","AlarmLevel","Name","push","searchForAlarm","e","_this3","table","forEach","index","AlarmName","includes","page","handlePageForCondition","callbackPageChange","_this4","pageSize","exportAlarm","onClose","sureAlarm","row","assign_default","submitRemarks","callback","_this5","paramId","Id","post","confirmAlarm","console","log","$info","content","onOk","menu_module_current_alarm","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","layout","on","submit","label","placeholder","model","$$v","expression","_v","type","icon","html-type","click","visible","wrapStyle","height","overflow","paddingBottom","close","_s","AlarmType","AlarmDescription","EquipmentId","PointId","style","position","left","bottom","borderTop","padding","background","textAlign","marginRight","columns","dataSource","_u","key","fn","text","record","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.d6f2a76280bb2a7fd4a2.js","sourcesContent":["<template>\r\n  <div class=\"current-alarm\">\r\n    <div class=\"search-condition\">\r\n      <a-form layout=\"inline\" :form=\"form\" @submit=\"searchForAlarm\">\r\n        <a-form-item label=\"报警名称：\">\r\n          <a-input placeholder=\"报警名称\" v-model=\"alarmNameCurrent\"></a-input>\r\n        </a-form-item>\r\n        <!--<a-form-item label=\"报警\">\r\n          <a-input placeholder=\"报警级别\" v-model=\"condition.alarmLevel\"></a-input>\r\n        </a-form-item>-->\r\n        <a-form-item>\r\n          <a-button type=\"primary\" icon=\"search\" html-type=\"submit\">搜索</a-button>\r\n        </a-form-item>\r\n        <a-form-item>\r\n          <a-button type=\"primary\" icon=\"form\" @click=\"exportAlarm\">导出</a-button>\r\n        </a-form-item>\r\n      </a-form>\r\n    </div>\r\n\r\n    <!-- 确认报警的抽屉 -->\r\n    <div class=\"the-drawer-of-alarm\">\r\n      <a-drawer\r\n        title=\"确认报警\"\r\n        :width=\"720\"\r\n        @close=\"onClose\"\r\n        :visible=\"isShowDrawer\"\r\n        :wrapStyle=\"{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}\"\r\n      >\r\n        <div class=\"chosen-alarm\">\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警名称</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmName }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警级别</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmLevel }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警类型</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmType }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警详情</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmDescription }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警时间</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmDateTime }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">设备标识</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.EquipmentId }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警点标识</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.PointId }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">报警状态</th>\r\n            <th width=\"190\" height=\"35\">{{ drawerForm.AlarmStatus }}</th>\r\n          </tr>\r\n          <tr>\r\n            <th width=\"150\" height=\"35\">备注</th>\r\n            <th width=\"190\" height=\"35\"><a-input v-model=\"remarks\"></a-input></th>\r\n          </tr>\r\n        </div>\r\n\r\n        <!-- 时间轴需要根据服务实际条数来渲染，还需额外处理 -->\r\n        <div class=\"time-line\">\r\n          <a-timeline>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n            <a-timeline-item>{{ alarmTime }} {{ noticeContent }}</a-timeline-item>\r\n          </a-timeline>\r\n        </div>\r\n\r\n        <div\r\n          :style=\"{\r\n          position: 'absolute',\r\n          left: 0,\r\n          bottom: 0,\r\n          width: '100%',\r\n          borderTop: '1px solid #e9e9e9',\r\n          padding: '10px 16px',\r\n          background: '#fff',\r\n          textAlign: 'right',\r\n        }\"\r\n        >\r\n          <a-button :style=\"{marginRight: '8px'}\" @click=\"onClose\">\r\n            关闭\r\n          </a-button>\r\n          <a-button @click=\"submitRemarks\" type=\"primary\">确认</a-button>\r\n        </div>\r\n      </a-drawer>\r\n    </div>\r\n\r\n    <div class=\"table\">\r\n      <a-table :columns=\"column\"\r\n               :loading=\"loading\"\r\n               :pagination=\"pagination\"\r\n               :dataSource=\"tableList\"\r\n               size=\"small\">\r\n        <template slot=\"operation\" slot-scope=\"text, record\">\r\n          <a-button type=\"primary\" @click=\"sureAlarm(record)\">确认报警</a-button>\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import AFormItem from \"ant-design-vue/es/form/FormItem\";\r\n    export default {\r\n        name: \"current-alarm\",\r\n      components: {AFormItem},\r\n\r\n      data() {\r\n          return {\r\n            alarmTime: '9019-10-09 09:09',\r\n            noticeContent: '注意防范',\r\n            searchAlarm: {}, // 不使用了\r\n            loading: false,\r\n            isShowDrawer: false,\r\n            pagination: {\r\n              current: 1,\r\n              defaultCurrent: 1,\r\n              defaultPageSize: 18,\r\n              total: 0,\r\n              size: 'large',\r\n              // 页码改变时的回调\r\n              onChange: (current) => this.changePage(current)\r\n            },\r\n            // 抽屉详情\r\n            drawerForm: {},\r\n            remarks: '',\r\n            // column's setting\r\n            column: [\r\n              {\r\n                title: '报警名称',\r\n                dataIndex: 'AlarmName',\r\n                align: 'center',\r\n                // sorter: true,\r\n                width: '8%',\r\n                // scopedSlots: { customRender: 'name' }\r\n              },\r\n              {\r\n                title: '报警级别',\r\n                dataIndex: 'AlarmLevel',\r\n                align: 'center',\r\n                width: 40\r\n              },\r\n              {\r\n                title: '报警类型',\r\n                dataIndex: 'AlarmType',\r\n                align: 'center',\r\n                width: 40\r\n              },\r\n              {\r\n                title: '报警详情',\r\n                dataIndex: 'AlarmDescription',\r\n                align: 'center',\r\n                width: '15%'\r\n              },\r\n              {\r\n                title: '报警时间',\r\n                dataIndex: 'AlarmDateTime',\r\n                align: 'center',\r\n                width: '15%'\r\n              },\r\n              {\r\n                title: '设备标识',\r\n                dataIndex: 'EquipmentId',\r\n                align: 'center',\r\n                width: 40\r\n              },\r\n              {\r\n                title: '报警点标识',\r\n                dataIndex: 'PointId',\r\n                align: 'center',\r\n                width: 40\r\n              },\r\n              {\r\n                title: '报警状态',\r\n                dataIndex: 'AlarmStatus',\r\n                align: 'center',\r\n                width: '10%'\r\n              },\r\n              {\r\n                title: '操 作',\r\n                // dataIndex: 'tel',\r\n                align: 'center',\r\n                width: '15%',\r\n                scopedSlots: { customRender: 'operation' }\r\n              }\r\n            ],\r\n            tableList: [],\r\n            // 存在数据量比较大的情况，所以使用一个容器来缓存请求获取的列表，每次改变页码等其他操作均使用此容器\r\n            // 存在有很多条相同报警名称的数据，使用该状态来缓存获取到条件查询的 list ，在翻页时调用不同的方法\r\n            tableListContainer: [],\r\n            // 查询条件\r\n            alarmNameCurrent: '',\r\n            condition: {\r\n              alarmName: '',\r\n              // alarmLevel: ''\r\n            }\r\n          }\r\n      },\r\n\r\n      beforeCreate () {\r\n        // 可不使用\r\n        this.form = this.$form.createForm(this, { name: 'advanced_search' });\r\n      },\r\n\r\n      mounted () {\r\n          this.initTable();\r\n      },\r\n\r\n      methods: {\r\n        initTable () {\r\n          const that = this;\r\n          this.pagination.current = 1;\r\n          this.loading = true;\r\n          // 使用当前绑定状态进行校验\r\n          this.form.validateFields((err, values) => {\r\n            if (!err) {\r\n              // 初始列表时查询所有数据，以显示全部的页码\r\n              that.$http.get(that.$api.getAlarmForPagination).then(res => {\r\n                if (res.status === 200) {\r\n                  // let table = [];\r\n                  let tableContainer = res.data.value;\r\n                  const length = that.pagination.defaultPageSize;\r\n                  that.pagination.total = tableContainer.length;\r\n                  /*tableContainer.forEach((value, index) => {\r\n                    value.AlarmDateTime = that.$common.timestampToTime(value.AlarmDateTime);\r\n                    value.AlarmStatus = value.AlarmStatus === '\"Unprocessed\"' ? '处理中' : '未处理';\r\n                    // 只获取一个 Name 字段属性\r\n                    value.AlarmLevel = value.AlarmLevel.Name;\r\n                    that.tableList.push(value);\r\n                  })*/\r\n                  for (let i=0;i<length;i++) {\r\n                    tableContainer[i].AlarmDateTime = that.$common.timestampToTime(tableContainer[i].AlarmDateTime);\r\n                    tableContainer[i].AlarmStatus = tableContainer[i].AlarmStatus === '\"Unprocessed\"' ? '处理中' : '未处理';\r\n                    tableContainer[i].AlarmLevel = tableContainer[i].AlarmLevel.Name;\r\n                    that.tableList.push(tableContainer[i]);\r\n                  }\r\n                }\r\n                this.loading = false;\r\n              })\r\n            }\r\n          })\r\n        },\r\n\r\n        searchForAlarm (e) {\r\n          const that = this;\r\n          // e.preventDefault();\r\n          this.tableList = [];\r\n          this.tableListContainer = [];\r\n          // 每次查询回到第一页\r\n          this.pagination.current = 1;\r\n          this.loading = true;\r\n          // 使用当前绑定状态进行校验\r\n          this.$http.get(that.$api.getAlarmForPagination).then(res => {\r\n            if (res.status === 200) {\r\n              // console.log(res)\r\n              // let index = {};\r\n              let table = [];\r\n              let tableContainer = res.data.value;\r\n              // const length = that.pagination.defaultPageSize;\r\n              // that.pagination.total = tableContainer.length;\r\n              tableContainer.forEach((value, index) => {\r\n                value.AlarmDateTime = that.$common.timestampToTime(value.AlarmDateTime);\r\n                value.AlarmStatus = value.AlarmStatus === 'Unprocessed' ? '未处理' : '处理中';\r\n                // 只获取一个 Name 字段\r\n                value.AlarmLevel = value.AlarmLevel.Name;\r\n                if (that.alarmNameCurrent !== '') {\r\n                  if (/*value.AlarmName === that.condition.alarmName || value.AlarmLevel.Name === that.condition.alarmLevel*/\r\n                    value.AlarmName.includes(that.alarmNameCurrent) /*|| value.AlarmLevel.Name.includes(that.condition.alarmLevel)*/\r\n                  ) {\r\n                    that.tableList.push(value);\r\n                    // table.splice(0, 1, value);\r\n                    table.push(value);\r\n                    // 额外的缓存\r\n                    that.tableListContainer = table;\r\n                  }\r\n                } else {\r\n                  that.tableList.push(value);\r\n                }\r\n              });\r\n              that.pagination.total = that.tableList.length;\r\n            }\r\n            this.loading = false;\r\n          })\r\n        },\r\n\r\n        // 页码改变时的回调\r\n        changePage (page) {\r\n          const that = this;\r\n          this.pagination.current = page;\r\n          // this.loading = true;\r\n          if (that.alarmNameCurrent !== '') {\r\n            this.handlePageForCondition(page);\r\n          } else {\r\n            this.callbackPageChange(page);\r\n          }\r\n        },\r\n        callbackPageChange (page) {\r\n          const that = this;\r\n          // 直接清空当前列表\r\n          this.loading = true;\r\n          this.tableList = [];\r\n          this.pagination.current = page;\r\n          const pageSize = this.pagination.defaultPageSize;\r\n          const length = this.tableList.length;\r\n          this.$http.get(that.$api.getAlarmForPagination + '&$top=' + pageSize + '&$skip=' + (page - 1) * pageSize)\r\n            .then(res => {\r\n              if (res.status === 200) {\r\n                // let index;\r\n                let table = [];\r\n                const tableContainer = res.data.value;\r\n                // const length = that.pagination.defaultPageSize;\r\n                // that.pagination.total = tableContainer.length;\r\n                // that.tableList = res.data.value;\r\n                tableContainer.forEach((value, index) => {\r\n                  value.AlarmDateTime = that.$common.timestampToTime(value.AlarmDateTime);\r\n                  value.AlarmStatus = value.AlarmStatus === \"Unprocessed\" ? '未处理' : '处理中';\r\n                  value.AlarmLevel = value.AlarmLevel.Name;\r\n                  table.push(value);\r\n                });\r\n                that.tableList = table;\r\n              }\r\n              this.loading = false;\r\n            })\r\n        },\r\n\r\n        /**\r\n         * @description 存在条件查询有超出一页数据的情况\r\n         */\r\n        handlePageForCondition (page) {\r\n          // 指向当前 Vue component\r\n          this.loading = true;\r\n          const that = this;\r\n          // this.tableList = [];\r\n          this.$http.get(that.$api.getAlarmForPagination).then(res => {\r\n            if (res.status === 200) {\r\n              let table = [];\r\n              let tableContainer = res.data.value;\r\n              tableContainer.forEach((value, index) => {\r\n                value.AlarmDateTime = that.$common.timestampToTime(value.AlarmDateTime);\r\n                value.AlarmStatus = value.AlarmStatus === 'Unprocessed' ? '未处理' : '处理中';\r\n                // 只获取一个 Name 字段\r\n                value.AlarmLevel = value.AlarmLevel.Name;\r\n                if (value.AlarmName.includes(that.alarmNameCurrent)) {\r\n                  // that.tableList.push(value);\r\n                  table.push(value);\r\n                }\r\n              });\r\n              that.tableList = table;\r\n            }\r\n          });\r\n          this.loading = false;\r\n        },\r\n\r\n        exportAlarm () {},\r\n\r\n        onClose () {\r\n          this.isShowDrawer = false;\r\n        },\r\n\r\n        sureAlarm (row) {\r\n          this.drawerForm = Object.assign({}, row);\r\n          this.isShowDrawer = true;\r\n          // console.log('current choose alarm detail:')\r\n          // console.log(this.drawerForm)\r\n        },\r\n\r\n        /**\r\n         * @function 确认当前报警信息\r\n         */\r\n        submitRemarks (callback) {\r\n          const remarks = this.remarks;\r\n          const that = this;\r\n          // console.log('current input remarks:' + remarks);\r\n          // console.log('current id:' + this.drawerForm.Id)\r\n          const paramId = this.drawerForm.Id;\r\n          this.$http.post(that.$api.confirmAlarm + '?key=' + paramId)\r\n            .then((res) => {\r\n            console.log(res);\r\n            if (res.status === 200) {\r\n              if (res.data === paramId) {\r\n                that.$info({\r\n                  title: '提示',\r\n                  content: '确认成功！',\r\n                  onOk() {\r\n                    // that.isShowModal = false;\r\n                  },\r\n                });\r\n              }\r\n            }\r\n            this.isShowDrawer = false;\r\n          })\r\n        }\r\n      }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.chosen-alarm {\r\n  font-size: 20px;\r\n  border-bottom: 1px solid #e9e9e9;\r\n  padding-bottom: 20px;\r\n}\r\n\r\n  .time-line {\r\n    margin-top: 30px;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/page/menu-module/current-alarm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"current-alarm\"},[_c('div',{staticClass:\"search-condition\"},[_c('a-form',{attrs:{\"layout\":\"inline\",\"form\":_vm.form},on:{\"submit\":_vm.searchForAlarm}},[_c('a-form-item',{attrs:{\"label\":\"报警名称：\"}},[_c('a-input',{attrs:{\"placeholder\":\"报警名称\"},model:{value:(_vm.alarmNameCurrent),callback:function ($$v) {_vm.alarmNameCurrent=$$v},expression:\"alarmNameCurrent\"}})],1),_vm._v(\" \"),_c('a-form-item',[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"search\",\"html-type\":\"submit\"}},[_vm._v(\"搜索\")])],1),_vm._v(\" \"),_c('a-form-item',[_c('a-button',{attrs:{\"type\":\"primary\",\"icon\":\"form\"},on:{\"click\":_vm.exportAlarm}},[_vm._v(\"导出\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"the-drawer-of-alarm\"},[_c('a-drawer',{attrs:{\"title\":\"确认报警\",\"width\":720,\"visible\":_vm.isShowDrawer,\"wrapStyle\":{height: 'calc(100% - 108px)',overflow: 'auto',paddingBottom: '108px'}},on:{\"close\":_vm.onClose}},[_c('div',{staticClass:\"chosen-alarm\"},[_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警名称\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmName))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警级别\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmLevel))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警类型\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmType))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警详情\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmDescription))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警时间\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmDateTime))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"设备标识\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.EquipmentId))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警点标识\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.PointId))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"报警状态\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_vm._v(_vm._s(_vm.drawerForm.AlarmStatus))])]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"width\":\"150\",\"height\":\"35\"}},[_vm._v(\"备注\")]),_vm._v(\" \"),_c('th',{attrs:{\"width\":\"190\",\"height\":\"35\"}},[_c('a-input',{model:{value:(_vm.remarks),callback:function ($$v) {_vm.remarks=$$v},expression:\"remarks\"}})],1)])]),_vm._v(\" \"),_c('div',{staticClass:\"time-line\"},[_c('a-timeline',[_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))]),_vm._v(\" \"),_c('a-timeline-item',[_vm._v(_vm._s(_vm.alarmTime)+\" \"+_vm._s(_vm.noticeContent))])],1)],1),_vm._v(\" \"),_c('div',{style:({\n        position: 'absolute',\n        left: 0,\n        bottom: 0,\n        width: '100%',\n        borderTop: '1px solid #e9e9e9',\n        padding: '10px 16px',\n        background: '#fff',\n        textAlign: 'right',\n      })},[_c('a-button',{style:({marginRight: '8px'}),on:{\"click\":_vm.onClose}},[_vm._v(\"\\n          关闭\\n        \")]),_vm._v(\" \"),_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitRemarks}},[_vm._v(\"确认\")])],1)])],1),_vm._v(\" \"),_c('div',{staticClass:\"table\"},[_c('a-table',{attrs:{\"columns\":_vm.column,\"loading\":_vm.loading,\"pagination\":_vm.pagination,\"dataSource\":_vm.tableList,\"size\":\"small\"},scopedSlots:_vm._u([{key:\"operation\",fn:function(text, record){return [_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.sureAlarm(record)}}},[_vm._v(\"确认报警\")])]}}])})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-289fe148\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/page/menu-module/current-alarm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-289fe148\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./current-alarm.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./current-alarm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./current-alarm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-289fe148\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./current-alarm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-289fe148\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/page/menu-module/current-alarm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}