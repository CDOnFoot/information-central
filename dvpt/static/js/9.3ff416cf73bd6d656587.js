webpackJsonp([9],{"6kPy":function(a,t){},"Q+g9":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=e("woOf"),o=e.n(l),i={name:"defineAlarm",components:{AFormItem:e("SWcn").a},data:function(){var a=this;return{modal:"",searchAlarm:{},isShowModal:!1,okButton:"保存",modalTitle:"",condition:{alarmName:"",alarmLevel:""},loading:!1,confirmLoading:!1,pagination:{current:1,defaultCurrent:1,defaultPageSize:18,total:0,size:"large",onChange:function(t){return a.changePage(t)}},form:this.$form.createForm(this,{name:"advanced_search"}),modalForm:{},column:[{title:"报警名称",dataIndex:"AlarmName",align:"center",width:"9%"},{title:"报警级别",dataIndex:"AlarmLevel",align:"center",width:"8%"},{title:"报警类型",dataIndex:"AlarmType",align:"center",width:"9%"},{title:"描述",dataIndex:"AlarmDescription",align:"center",width:"15%"},{title:"设备ID",dataIndex:"EquipmentId",align:"center",width:"9%"},{title:"警报根源",dataIndex:"AlarmRootCause",align:"center",width:"9%"},{title:"站ID",dataIndex:"StationId",align:"center",width:"9%"},{title:"系统ID",dataIndex:"SubsystemId",align:"center",width:"8%"},{title:"状态",dataIndex:"AlarmStatus",align:"center",width:"9%"},{title:"操 作",align:"center",scopedSlots:{customRender:"operation"}}],tableList:[],tableListContainer:[]}},mounted:function(){this.initTable()},methods:{initTable:function(){var a=this,t=this;this.pagination.current=1,this.loading=!0,this.form.validateFields(function(e,l){e||t.$http.get(t.$api.getAlarmForPagination).then(function(e){if(200===e.status){var l=e.data.value,o=t.pagination.defaultPageSize;t.pagination.total=l.length;for(var i=0;i<o;i++)l[i].AlarmDateTime=t.$common.timestampToTime(l[i].AlarmDateTime),l[i].AlarmStatus='"Unprocessed"'===l[i].AlarmStatus?"处理中":"未处理",l[i].AlarmLevel=l[i].AlarmLevel.Name,t.tableList.push(l[i])}a.loading=!1})})},searchForAlarmDefine:function(){var a=this,t=this;this.tableList=[],this.tableListContainer=[],this.pagination.current=1,this.loading=!0,this.$http.get(t.$api.getAlarmForPagination).then(function(e){if(200===e.status){var l=[];e.data.value.forEach(function(a,e){a.AlarmDateTime=t.$common.timestampToTime(a.AlarmDateTime),a.AlarmStatus="Unprocessed"===a.AlarmStatus?"未处理":"处理中",a.AlarmLevel=a.AlarmLevel.Name,""!==t.condition.alarmName||""!==t.condition.alarmLevel?a.AlarmName.includes(t.condition.alarmName)&&(t.tableList.push(a),l.push(a),t.tableListContainer=l):t.tableList.push(a)}),t.pagination.total=t.tableList.length}a.loading=!1})},changePage:function(a){this.loading=!0,""===this.condition.alarmName&&""===this.condition.alarmLevel||this.handlePageForCondition(a),this.callbackPageChange(a)},handlePageForCondition:function(a){this.loading=!0;var t=this;t.pagination.defaultPageSize;this.$http.get(t.$api.getAlarmForPagination).then(function(a){if(200===a.status){var e=[];a.data.value.forEach(function(a,l){a.AlarmDateTime=t.$common.timestampToTime(a.AlarmDateTime),a.AlarmStatus="Unprocessed"===a.AlarmStatus?"未处理":"处理中",a.AlarmLevel=a.AlarmLevel.Name,a.AlarmName.includes(t.condition.alarmName)&&e.push(a)}),t.tableList=e}}),this.loading=!1},callbackPageChange:function(a){var t=this,e=this;this.tableList=[],this.pagination.current=a;this.pagination.defaultPageSize,this.tableList.length;this.$http.get(e.$api.getAlarmForPagination+"&$top="+e.pagination.defaultPageSize+"&$skip="+(a-1)*e.pagination.defaultPageSize).then(function(a){if(200===a.status){var l=[],o=a.data.value;e.tableList=a.data.value,o.forEach(function(a,t){a.AlarmDateTime=e.$common.timestampToTime(a.AlarmDateTime),a.AlarmStatus="Unprocessed"===a.AlarmStatus?"未处理":"处理中",a.AlarmLevel=a.AlarmLevel.Name,l.push(a)}),e.tableList=l}t.loading=!1})},searchInAlarmDefine:function(){},exportAlarmDefine:function(){this.isShowModal=!0,this.modalTitle="添加报警",this.modalForm=o()({},{})},editAlarm:function(a){this.modalTitle="编辑报警",this.modalForm=o()({},a),this.isShowModal=!0},deleteAlarm:function(a){var t=this;this.modal=this.Modal.confirm({title:"删除报警",cancelText:"取消",centered:!0,closable:!1,content:"此操作将在列表删除此条数据，是否继续？",okType:"warning",onOk:function(a){t.modal.destroy()},onCancel:function(a){t.modal.destroy()}})},handleOk:function(){this.isShowModal=!1,"添加报警"===this.modalTitle||this.modalTitle},closeModal:function(){this.isShowModal=!1}}},n={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"define-alarm"},[e("div",{staticClass:"search-condition"},[e("a-form",{attrs:{layout:"inline",form:a.form},on:{submit:a.searchForAlarmDefine}},[e("a-form-item",{attrs:{label:"报警名称："}},[e("a-input",{attrs:{placeholder:"报警名称"},model:{value:a.condition.alarmName,callback:function(t){a.$set(a.condition,"alarmName",t)},expression:"condition.alarmName"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"报警"}},[e("a-input",{attrs:{placeholder:"报警级别"},model:{value:a.condition.alarmLevel,callback:function(t){a.$set(a.condition,"alarmLevel",t)},expression:"condition.alarmLevel"}})],1),a._v(" "),e("a-form-item",[e("a-button",{attrs:{type:"primary",icon:"search","html-type":"submit"}},[a._v("搜索")])],1),a._v(" "),e("a-form-item",[e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:a.exportAlarmDefine}},[a._v("添加")])],1)],1)],1),a._v(" "),e("div",{staticClass:"define-alarm-dialog"},[e("a-modal",{attrs:{visible:a.isShowModal,okText:a.okButton,centered:"",destroyOnClose:"",title:a.modalTitle,"confirm-loading":a.confirmLoading},on:{ok:a.handleOk,cancel:a.closeModal}},[e("div",{staticClass:"form-in-modal"},[e("a-form",{attrs:{form:a.modalForm}},[e("div",{staticClass:"modal-form"},[e("div",{staticClass:"modal-form-one"},[e("a-form-item",{attrs:{label:"报警名称","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.AlarmName,callback:function(t){a.$set(a.modalForm,"AlarmName",t)},expression:"modalForm.AlarmName"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"报警类型","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.AlarmType,callback:function(t){a.$set(a.modalForm,"AlarmType",t)},expression:"modalForm.AlarmType"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"报警级别","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.AlarmLevel,callback:function(t){a.$set(a.modalForm,"AlarmLevel",t)},expression:"modalForm.AlarmLevel"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"站ID","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.StationId,callback:function(t){a.$set(a.modalForm,"StationId",t)},expression:"modalForm.StationId"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"系统ID","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.SubsystemId,callback:function(t){a.$set(a.modalForm,"SubsystemId",t)},expression:"modalForm.SubsystemId"}})],1)],1),a._v(" "),e("div",{staticClass:"modal-form-two"},[e("a-form-item",{attrs:{label:"设备ID","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.EquipmentId,callback:function(t){a.$set(a.modalForm,"EquipmentId",t)},expression:"modalForm.EquipmentId"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"描述","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.AlarmDescription,callback:function(t){a.$set(a.modalForm,"AlarmDescription",t)},expression:"modalForm.AlarmDescription"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"报警根源","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.AlarmRootCause,callback:function(t){a.$set(a.modalForm,"AlarmRootCause",t)},expression:"modalForm.AlarmRootCause"}})],1),a._v(" "),e("a-form-item",{attrs:{label:"状态","label-col":{span:7},"wrapper-col":{span:14}}},[e("a-input",{model:{value:a.modalForm.AlarmStatus,callback:function(t){a.$set(a.modalForm,"AlarmStatus",t)},expression:"modalForm.AlarmStatus"}})],1)],1)])])],1)])],1),a._v(" "),e("div",{staticClass:"table"},[e("a-table",{attrs:{columns:a.column,loading:a.loading,pagination:a.pagination,dataSource:a.tableList,size:"small"},scopedSlots:a._u([{key:"operation",fn:function(t,l){return[e("a-button",{attrs:{type:"primary"},on:{click:function(t){return a.editAlarm(l)}}},[a._v("编辑")]),a._v(" "),e("a-button",{attrs:{type:"primary"},on:{click:function(t){return a.deleteAlarm(l)}}},[a._v("删除")])]}}])})],1)])},staticRenderFns:[]};var r=e("VU/8")(i,n,!1,function(a){e("6kPy")},"data-v-6756a78b",null);t.default=r.exports}});
//# sourceMappingURL=9.3ff416cf73bd6d656587.js.map